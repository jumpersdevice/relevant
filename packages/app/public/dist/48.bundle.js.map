{"version":3,"sources":["webpack:///./public/img/icons/upvoteActive.png","webpack:///./src/modules/animation/vote.component.js","webpack:///./src/modules/animation/upvoteNumber.component.js","webpack:///./src/modules/animation/upvoteAnimation.component.js"],"names":["ICONS","upvote","size","icon","require","bet","Vote","Component","constructor","props","context","super","this","state","position","Animated","Value","componentWillMount","x","y","parent","ENDX","Math","random","interpolate","inputRange","outputRange","opacity","extrapolate","rotateAnimation","scale","componentDidMount","i","specialKey","r","timing","toValue","delay","duration","useNativeDriver","start","destroy","render","horizontal","type","img","Image","resizeMode","style","width","height","source","View","key","animatedElement","left","w","transform","translateX","translateY","rotate","PropTypes","bool","object","number","func","string","VoteNumber","amount","element","c","colors","green","HANDLE_ANIMATIONS","Container","styled","isNative","UpvoteAnimation","useSelector","animation","currentType","index","includes","voteEls","setVoteEls","useState","numEls","setNumEls","useEffect","Array","keys","coinKey","els","slice","pointerEvents","map"],"mappings":"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","file":"48.bundle.js","sourcesContent":["export default __webpack_public_path__ + \"public/img/icons/upvoteActive.png\";","import React, { Component } from 'react';\nimport { Animated, Image } from 'react-native';\nimport PropTypes from 'prop-types';\nimport { animatedElement } from 'app/styles/layout';\n\nconst ENDY = 300;\n\nconst ICONS = {\n  upvote: { size: 28, icon: require('public/img/icons/upvoteActive.png') },\n  bet: { size: 18, icon: require('public/img/relevantcoin.png') }\n};\n\nclass Vote extends Component {\n  static propTypes = {\n    horizontal: PropTypes.bool,\n    parent: PropTypes.object,\n    specialKey: PropTypes.number,\n    destroy: PropTypes.func,\n    type: PropTypes.string\n  };\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      position: new Animated.Value(0)\n    };\n  }\n\n  componentWillMount() {\n    const { x, y } = this.props.parent;\n    const ENDX = Math.random() * 50;\n\n    this.y = this.state.position.interpolate({\n      inputRange: [0, 1],\n      outputRange: [y, y - ENDY]\n      // easing: Easing.in(Easing.ease)\n    });\n\n    this.x = this.state.position.interpolate({\n      inputRange: [0, 0.5 * Math.random(), 1],\n      outputRange: [x, x + ENDX / 2, x + ENDX]\n      // easing: Easing.out(Easing.ease)\n    });\n\n    this.opacity = this.state.position.interpolate({\n      inputRange: [0.7, 1],\n      outputRange: [1, 0],\n      extrapolate: 'clamp'\n    });\n\n    this.rotateAnimation = this.state.position.interpolate({\n      inputRange: [0, 1 / 4, 1 / 3, 1 / 2, 1],\n      outputRange: ['0deg', '-2deg', '0deg', '2deg', '0deg']\n    });\n\n    this.scale = this.state.position.interpolate({\n      inputRange: [0, 0.2, 0.3, 1],\n      outputRange: [0, 1.2, 1, 1.5],\n      extrapolate: 'clamp'\n    });\n  }\n\n  componentDidMount() {\n    const i = this.props.specialKey;\n    const r = Math.random();\n\n    Animated.timing(this.state.position, {\n      toValue: 1,\n      delay: i * (75 + r * 50),\n      duration: 1000,\n      useNativeDriver: true\n    }).start(() => this.props.destroy(i));\n  }\n\n  render() {\n    const { specialKey, horizontal, parent, type } = this.props;\n    const { icon, size } = ICONS[type];\n    const img = (\n      <Image resizeMode={'contain'} style={{ width: size, height: size }} source={icon} />\n    );\n\n    return (\n      <Animated.View\n        key={specialKey}\n        style={[\n          { ...animatedElement },\n          {\n            left: horizontal ? 0 : parent.w / 2,\n            transform: [\n              { translateX: this.x },\n              { translateY: this.y },\n              { scale: this.scale },\n              { rotate: this.rotateAnimation }\n            ],\n            opacity: this.opacity\n          }\n        ]}\n      >\n        {img}\n      </Animated.View>\n    );\n  }\n}\n\nexport default Vote;\n","import React, { Component } from 'react';\nimport { Animated } from 'react-native';\nimport PropTypes from 'prop-types';\nimport { animatedElement } from 'app/styles/layout';\nimport { colors } from 'app/styles';\nimport { Title } from 'modules/styled/uni';\n\nconst ENDY = 100;\n\nclass VoteNumber extends Component {\n  static propTypes = {\n    parent: PropTypes.object,\n    specialKey: PropTypes.number,\n    amount: PropTypes.number,\n    destroy: PropTypes.func,\n    horizontal: PropTypes.bool\n  };\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      position: new Animated.Value(0)\n    };\n  }\n\n  componentWillMount() {\n    const { x, y } = this.props.parent;\n    const ENDX = (Math.random() - 0.5) * 20;\n\n    this.y = this.state.position.interpolate({\n      inputRange: [0, 1],\n      outputRange: [y + 10, y - ENDY]\n    });\n\n    this.x = this.state.position.interpolate({\n      inputRange: [0, 0.05, 0.5, 1],\n      outputRange: [x - 15, x, x + ENDX / 2, x + ENDX]\n    });\n\n    this.opacity = this.state.position.interpolate({\n      inputRange: [0.7, 1],\n      outputRange: [1, 0],\n      extrapolate: 'clamp'\n    });\n\n    this.rotateAnimation = this.state.position.interpolate({\n      inputRange: [0, 1 / 4, 1 / 3, 1 / 2, 1],\n      outputRange: ['0deg', '-2deg', '0deg', '2deg', '0deg']\n    });\n\n    this.scale = this.state.position.interpolate({\n      inputRange: [0, 0.05, 0.1, 0.9, 0.95, 1],\n      outputRange: [0, 1.4, 1, 1, 1.2, 0]\n    });\n  }\n\n  componentDidMount() {\n    const { amount } = this.props;\n    const i = this.props.specialKey;\n    const r = Math.random();\n\n    Animated.timing(this.state.position, {\n      toValue: 1,\n      delay: r * 30 + (i * 100 * 10) / amount,\n      duration: 2000,\n      useNativeDriver: true\n    }).start(() => this.props.destroy(null, i));\n  }\n\n  render() {\n    const { amount, parent, horizontal } = this.props;\n    const { w } = parent;\n    const { specialKey } = this.props;\n    const element = <Title c={colors.green}>+{amount}</Title>;\n\n    return (\n      <Animated.View\n        key={specialKey}\n        style={[\n          { ...animatedElement },\n          {\n            left: horizontal ? 20 : (w * 2) / 3,\n            transform: [\n              { translateX: this.x },\n              { translateY: this.y },\n              { scale: this.scale }\n            ],\n            opacity: this.opacity\n          }\n        ]}\n      >\n        {element}\n      </Animated.View>\n    );\n  }\n}\n\nexport default VoteNumber;\n","import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport styled from 'styled-components/primitives';\nimport { isNative } from 'styles';\nimport Vote from './vote.component';\nimport VoteNumber from './upvoteNumber.component';\n\nconst HANDLE_ANIMATIONS = ['upvote', 'bet'];\n\nconst Container = styled.View`\n  position: ${isNative ? 'absolute' : 'fixed'};\n  z-index: 10000;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n`;\n\nexport default function UpvoteAnimation() {\n  const type = useSelector(state => state.animation.currentType);\n  const { index, parent, horizontal, amount } = useSelector(state =>\n    HANDLE_ANIMATIONS.includes(type) ? state.animation[type] : {}\n  );\n\n  const [voteEls, setVoteEls] = useState([]);\n  const [numEls, setNumEls] = useState([]);\n\n  useEffect(() => {\n    function initAnimation() {\n      if (!parent) return;\n      setVoteEls([...Array(10).keys()]);\n      if (!amount) return;\n      setNumEls([...Array(1).keys()]);\n    }\n    initAnimation();\n\n    return () => {\n      setVoteEls([]);\n      setNumEls([]);\n    };\n  }, [index, parent, amount]);\n\n  if (!HANDLE_ANIMATIONS.includes(type)) return null;\n\n  function destroy(key, coinKey) {\n    if (typeof key === 'number') {\n      setVoteEls(els => [...els.slice(0, key), ...els.slice(key + 1)]);\n    }\n    if (typeof coinKey === 'number') {\n      setNumEls(els => [...els.slice(0, coinKey), ...els.slice(coinKey + 1)]);\n    }\n  }\n\n  return (\n    <Container pointerEvents={'none'}>\n      {voteEls.map(i => (\n        <Vote\n          type={type}\n          horizontal={horizontal}\n          destroy={destroy}\n          parent={parent}\n          key={i}\n          specialKey={i}\n        />\n      ))}\n      {numEls.map(i => (\n        <VoteNumber\n          destroy={destroy}\n          parent={parent}\n          amount={amount}\n          key={i}\n          specialKey={i}\n          horizontal={horizontal}\n        />\n      ))}\n    </Container>\n  );\n}\n"],"sourceRoot":""}