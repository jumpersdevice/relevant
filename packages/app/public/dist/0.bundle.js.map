{"version":3,"sources":["webpack:////Users/slavab/local/relevant/node_modules/@webscopeio/react-textarea-autocomplete/dist/react-textarea-autocomplete.es.js","webpack:////Users/slavab/local/relevant/node_modules/custom-event/index.js","webpack:////Users/slavab/local/relevant/node_modules/react-textarea-autosize/dist/react-textarea-autosize.esm.browser.js","webpack:////Users/slavab/local/relevant/node_modules/textarea-caret/index.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","_createClass","protoProps","staticProps","prototype","_typeof2","Symbol","iterator","constructor","_typeof","_possibleConstructorReturn","self","call","ReferenceError","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","_inherits","subClass","superClass","create","_toConsumableArray","arr","Array","isArray","arr2","_arrayWithoutHoles","iter","toString","from","_iterableToArray","_nonIterableSpread","KEY_CODES","ESC","UP","DOWN","LEFT","RIGHT","ENTER","TAB","Listeners","Listener","_this","this","startListen","ref","addEventListener","f","stopListen","removeEventListener","add","keyCodes","fn","keyCode","listeners","index","remove","id","removeAll","e","code","which","values","forEach","_ref","includes","stopPropagation","preventDefault","Item","_React$Component","_getPrototypeOf2","_len","arguments","args","_key","apply","concat","selectItem","_this$props","item","onSelectHandler","nextProps","selected","style","className","_this2","_this$props2","Component","component","onClickHandler","innerRef","createElement","role","tabIndex","onClick","onFocus","onMouseEnter","onTouchStart","clicked","onTouchEnd","onTouchMove","onTouchCancel","entity","List","state","selectedItem","cachedIdOfItems","Map","onPressEnter","modifyText","getPositionInList","findIndex","a","getId","has","get","textToReplace","getTextToReplace","text","Error","JSON","stringify","computeId","set","itemsRef","onSelect","keyboard","undefined","setState","dropdownScroll","scroll","newPosition","oldPosition","isSelected","push","oldValues","map","val","join","listener","pop","_this3","itemClassName","itemStyle","POSITION_CONFIGURATION","TOP","BOTTOM","errorMessage","message","console","error","reservedRegexChars","escapeRegex","character","Autocomplete","boundariesElement","elem","document","querySelector","containerElem","HTMLElement","contains","_this$ref$classList","_this$ref$classList2","top","left","usedClasses","unusedClasses","topPosition","leftPosition","containerBounds","getBoundingClientRect","dropdownBounds","textareaBounds","textareaRef","computedStyle","window","getComputedStyle","marginTop","parseInt","getPropertyValue","marginBottom","marginLeft","marginRight","dropdownBottom","height","width","right","bottom","renderToBody","classList","children","body","autocompleteContainer","createPortal","ReactTextareaAutocomplete","_React$Component2","_props","currentTrigger","actualToken","data","dataLoading","selectionEnd","escListenerInit","escListener","_closeAutocomplete","escListenerDestroy","getSelectionPosition","selectionStart","getSelectedText","_this2$textareaRef","substr","setCaretPosition","position","focus","setSelectionRange","getCaretPosition","_handleCaretChange","cleanLastTrigger","beforeHandle","lastTrigger","type","_isAutocompleteOpen","_onSelect","_this2$state","textareaValue","_this2$props","trigger","onItemSelected","getTextToReplaceForCurrentTrigger","_getTextToReplace","newToken","textToModify","slice","startOfTokenPosition","search","RegExp","allowWhitespace","newTokenString","caretPosition","newCaretPosition","token","startToken","Number","isInteger","computeCaretPosition","modifiedText","substring","newValue","replace","insertedTrigger","tokenRegExpEnding","exec","insertedTriggerModifier","_changeHandler","scrollTop","chrome","triggerSettings","output","String","_getCurrentTriggerSettings","_getValuesFromProvider","_this2$state2","dataProvider","providedData","Promise","resolve","then","catch","_getSuggestions","_this2$state3","_createRegExp","tokenRegExp","keys","sort","b","_cleanUpProps","source","ownKeys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","notSafe","prop","_this2$props2","onChange","minChar","onCaretPositionChange","movePopupAsYouType","_this2$state4","event","bubbles","dispatchEvent","textarea","lastValueBubbledEvent","persist","setTopLeft","_getCaretCoordinates","newTop","newLeft","triggerLength","_affectedTextareaValue","_newTrigger","affectedTextareaValue","tokenMatch","lastToken","currentTriggerLength","newTrigger","afterWhitespace","test","find","err","_selectHandler","_this2$props3","_shouldStayOpen","el","relatedTarget","activeElement","dropdownRef","Node","_onClick","_onBlur","onBlur","_onScrollHandler","_dropdownScroll","scrollToItem","container","itemHeight","containerHight","itemOffsetTop","offsetTop","actualScrollTop","defaultScrollToItem","_this2$state5","suggestionData","_textareaRef","_this2$props4","loadingComponent","_trigger","_value","_ref2","oldTrigger","oldValue","TextAreaComponent","_this$props3","Loader","listStyle","listClassName","dropdownClassName","dropdownStyle","containerStyle","containerClassName","loaderStyle","loaderClassName","textAreaComponent","_this$state","isAutocompleteOpen","extraAttrs","assign","onScroll","_ref3","defaultProps","NativeCustomEvent","global","CustomEvent","module","exports","detail","foo","useNative","createEvent","params","initCustomEvent","cancelable","createEventObject","Boolean","isIE","documentElement","currentStyle","HIDDEN_TEXTAREA_STYLE","visibility","overflow","SIZING_STYLE","computedStyleCache","hiddenTextarea","forceHiddenStyles","node","setProperty","calculateNodeHeight","uiTextNode","uid","useCache","minRows","maxRows","parentNode","appendChild","nodeStyling","sizingStyle","reduce","name","boxSizing","parseFloat","paddingSize","borderSize","nodeInfo","calculateNodeStyling","placeholder","minHeight","Infinity","maxHeight","scrollHeight","singleRowHeight","valueRowCount","Math","floor","max","min","rowCount","setAttribute","noop","TextareaAutosize","_onRef","inputRef","current","_onChange","_controlled","_resizeComponent","callback","nodeHeight","_uid","useCacheForDOMMeasurements","_resizeLock","_proto","render","onHeightChange","componentDidMount","_resizeListener","componentDidUpdate","prevProps","prevState","componentWillUnmount","purgeCache","properties","isBrowser","isFirefox","mozInnerScreenX","getCaretCoordinates","element","options","debug","removeChild","div","computed","whiteSpace","nodeName","wordWrap","overflowY","textContent","span","coordinates","offsetLeft","backgroundColor"],"mappings":"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","file":"0.bundle.js","sourcesContent":["/**\n * The MIT License (MIT)\n *\n * Copyright (c) 2017 Jakub Beneš <benes@webscope.io>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nimport ReactDOM from 'react-dom';\nimport getCaretCoordinates from 'textarea-caret';\nimport CustomEvent from 'custom-event';\nimport React from 'react';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _typeof2(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof2 = function _typeof2(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof2 = function _typeof2(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof2(obj);\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nvar KEY_CODES = {\n  ESC: 27,\n  UP: 38,\n  DOWN: 40,\n  LEFT: 37,\n  RIGHT: 39,\n  ENTER: 13,\n  TAB: 9\n}; // This is self-made key shortcuts manager, used for caching key strokes\n\nvar Listener = function Listener() {\n  var _this = this;\n\n  _classCallCheck(this, Listener);\n\n  this.startListen = function (ref) {\n    if (!ref) return;\n    ref.addEventListener(\"keydown\", _this.f);\n  };\n\n  this.stopListen = function (ref) {\n    if (!ref) return;\n    ref.removeEventListener(\"keydown\", _this.f);\n  };\n\n  this.add = function (keyCodes, fn) {\n    var keyCode = keyCodes;\n    if (typeof keyCode !== \"object\") keyCode = [keyCode];\n    _this.listeners[_this.index] = {\n      keyCode: keyCode,\n      fn: fn\n    };\n    return _this.index++;\n  };\n\n  this.remove = function (id) {\n    delete _this.listeners[id];\n  };\n\n  this.removeAll = function () {\n    _this.listeners = {};\n    _this.index = 1;\n  };\n\n  this.index = 1;\n  this.listeners = {};\n\n  this.f = function (e) {\n    if (!e) return;\n    var code = e.keyCode || e.which;\n    Object.values(_this.listeners).forEach(function (_ref) {\n      var keyCode = _ref.keyCode,\n          fn = _ref.fn;\n\n      if (keyCode.includes(code)) {\n        e.stopPropagation();\n        e.preventDefault();\n        fn(e);\n      }\n    });\n  };\n};\n\nvar Listeners = new Listener();\n\nvar Item =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Item, _React$Component);\n\n  function Item() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Item);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Item)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.selectItem = function () {\n      var _this$props = _this.props,\n          item = _this$props.item,\n          onSelectHandler = _this$props.onSelectHandler;\n      onSelectHandler(item);\n    };\n\n    return _this;\n  }\n\n  _createClass(Item, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      if (this.props.item !== nextProps.item || this.props.selected !== nextProps.selected || this.props.style !== nextProps.style || this.props.className !== nextProps.className) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          Component = _this$props2.component,\n          style = _this$props2.style,\n          onClickHandler = _this$props2.onClickHandler,\n          item = _this$props2.item,\n          selected = _this$props2.selected,\n          className = _this$props2.className,\n          innerRef = _this$props2.innerRef;\n      return React.createElement(\"li\", {\n        className: \"rta__item  \".concat(selected === true ? \"rta__item--selected\" : \"\", \" \").concat(className || \"\"),\n        style: style\n      }, React.createElement(\"div\", {\n        className: \"rta__entity \".concat(selected === true ? \"rta__entity--selected\" : \"\"),\n        role: \"button\",\n        tabIndex: 0,\n        onClick: onClickHandler,\n        onFocus: this.selectItem,\n        onMouseEnter: this.selectItem,\n        onTouchStart: function onTouchStart() {\n          _this2.clicked = true;\n\n          _this2.selectItem();\n        },\n        onTouchEnd: function onTouchEnd(e) {\n          e.preventDefault();\n\n          if (_this2.clicked) {\n            onClickHandler(e);\n          }\n        },\n        onTouchMove: function onTouchMove() {\n          _this2.clicked = false;\n        },\n        onTouchCancel: function onTouchCancel() {\n          _this2.clicked = false;\n        }\n        /* $FlowFixMe */\n        ,\n        ref: innerRef\n      }, React.createElement(Component, {\n        selected: selected,\n        entity: item\n      })));\n    }\n  }]);\n\n  return Item;\n}(React.Component);\n\nvar List =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(List, _React$Component);\n\n  function List() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, List);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(List)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      selectedItem: null\n    };\n    _this.cachedIdOfItems = new Map();\n\n    _this.onPressEnter = function (e) {\n      if (typeof e !== \"undefined\") {\n        e.preventDefault();\n      }\n\n      var values = _this.props.values;\n\n      _this.modifyText(values[_this.getPositionInList()]);\n    };\n\n    _this.getPositionInList = function () {\n      var values = _this.props.values;\n      var selectedItem = _this.state.selectedItem;\n      if (!selectedItem) return 0;\n      return values.findIndex(function (a) {\n        return _this.getId(a) === _this.getId(selectedItem);\n      });\n    };\n\n    _this.getId = function (item) {\n      if (_this.cachedIdOfItems.has(item)) {\n        // $FlowFixMe\n        return _this.cachedIdOfItems.get(item);\n      }\n\n      var textToReplace = _this.props.getTextToReplace(item);\n\n      var computeId = function computeId() {\n        if (textToReplace) {\n          if (textToReplace.key) {\n            return textToReplace.key;\n          }\n\n          if (typeof item === \"string\" || !item.key) {\n            return textToReplace.text;\n          }\n        }\n\n        if (!item.key) {\n          throw new Error(\"Item \".concat(JSON.stringify(item), \" has to have defined \\\"key\\\" property\"));\n        } // $FlowFixMe\n\n\n        return item.key;\n      };\n\n      var id = computeId();\n\n      _this.cachedIdOfItems.set(item, id);\n\n      return id;\n    };\n\n    _this.listeners = [];\n    _this.itemsRef = {};\n\n    _this.modifyText = function (value) {\n      if (!value) return;\n      var onSelect = _this.props.onSelect;\n      onSelect(value);\n    };\n\n    _this.selectItem = function (item) {\n      var keyboard = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (_this.state.selectedItem === item) return;\n\n      _this.setState({\n        selectedItem: item\n      }, function () {\n        if (keyboard) {\n          _this.props.dropdownScroll(_this.itemsRef[_this.getId(item)]);\n        }\n      });\n    };\n\n    _this.scroll = function (e) {\n      e.preventDefault();\n      var values = _this.props.values;\n      var code = e.keyCode || e.which;\n\n      var oldPosition = _this.getPositionInList();\n\n      var newPosition;\n\n      switch (code) {\n        case KEY_CODES.DOWN:\n          newPosition = oldPosition + 1;\n          break;\n\n        case KEY_CODES.UP:\n          newPosition = oldPosition - 1;\n          break;\n\n        default:\n          newPosition = oldPosition;\n          break;\n      }\n\n      newPosition = (newPosition % values.length + values.length) % values.length; // eslint-disable-line\n\n      _this.selectItem(values[newPosition], [KEY_CODES.DOWN, KEY_CODES.UP].includes(code));\n    };\n\n    _this.isSelected = function (item) {\n      var selectedItem = _this.state.selectedItem;\n      if (!selectedItem) return false;\n      return _this.getId(selectedItem) === _this.getId(item);\n    };\n\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.listeners.push(Listeners.add([KEY_CODES.DOWN, KEY_CODES.UP], this.scroll), Listeners.add([KEY_CODES.ENTER, KEY_CODES.TAB], this.onPressEnter));\n      var values = this.props.values;\n      if (values && values[0]) this.selectItem(values[0]);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_ref) {\n      var _this2 = this;\n\n      var oldValues = _ref.values;\n      var values = this.props.values;\n      var oldValuesSerialized = oldValues.map(function (val) {\n        return _this2.getId(val);\n      }).join(\"\");\n      var newValuesSerialized = values.map(function (val) {\n        return _this2.getId(val);\n      }).join(\"\");\n\n      if (oldValuesSerialized !== newValuesSerialized && values && values[0]) {\n        this.selectItem(values[0]);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var listener;\n\n      while (this.listeners.length) {\n        listener = this.listeners.pop();\n        Listeners.remove(listener);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          values = _this$props.values,\n          component = _this$props.component,\n          style = _this$props.style,\n          itemClassName = _this$props.itemClassName,\n          className = _this$props.className,\n          itemStyle = _this$props.itemStyle;\n      return React.createElement(\"ul\", {\n        className: \"rta__list \".concat(className || \"\"),\n        style: style\n      }, values.map(function (item) {\n        return React.createElement(Item, {\n          key: _this3.getId(item),\n          innerRef: function innerRef(ref) {\n            _this3.itemsRef[_this3.getId(item)] = ref;\n          },\n          selected: _this3.isSelected(item),\n          item: item,\n          className: itemClassName,\n          style: itemStyle,\n          onClickHandler: _this3.onPressEnter,\n          onSelectHandler: _this3.selectItem,\n          component: component\n        });\n      }));\n    }\n  }]);\n\n  return List;\n}(React.Component);\n\nfunction defaultScrollToItem(container, item) {\n  var itemHeight = parseInt(getComputedStyle(item).getPropertyValue(\"height\"), 10);\n  var containerHight = parseInt(getComputedStyle(container).getPropertyValue(\"height\"), 10) - itemHeight;\n  var itemOffsetTop = item.offsetTop;\n  var actualScrollTop = container.scrollTop;\n\n  if (itemOffsetTop < actualScrollTop + containerHight && actualScrollTop < itemOffsetTop) {\n    return;\n  } // eslint-disable-next-line\n\n\n  container.scrollTop = itemOffsetTop;\n}\n\nvar DEFAULT_CARET_POSITION = \"next\";\nvar POSITION_CONFIGURATION = {\n  X: {\n    LEFT: \"rta__autocomplete--left\",\n    RIGHT: \"rta__autocomplete--right\"\n  },\n  Y: {\n    TOP: \"rta__autocomplete--top\",\n    BOTTOM: \"rta__autocomplete--bottom\"\n  }\n};\n\nvar errorMessage = function errorMessage(message) {\n  return console.error(\"RTA: dataProvider fails: \".concat(message, \"\\n    \\nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues\"));\n};\n\nvar reservedRegexChars = ['.', '^', '$', '*', '+', '-', '?', '(', ')', '[', ']', '{', '}', '\\\\', '|'];\n\nvar escapeRegex = function escapeRegex(text) {\n  return _toConsumableArray(text).map(function (character) {\n    return reservedRegexChars.includes(character) ? \"\\\\\".concat(character) : character;\n  }).join('');\n}; // The main purpose of this component is to figure out to which side the autocomplete should be opened\n\n\nvar Autocomplete =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Autocomplete, _React$Component);\n\n  function Autocomplete() {\n    _classCallCheck(this, Autocomplete);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Autocomplete).apply(this, arguments));\n  }\n\n  _createClass(Autocomplete, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var boundariesElement = this.props.boundariesElement;\n\n      if (typeof boundariesElement === \"string\") {\n        var elem = document.querySelector(boundariesElement);\n\n        if (!elem) {\n          throw new Error(\"RTA: Invalid prop boundariesElement: it has to be string or HTMLElement.\");\n        }\n\n        this.containerElem = elem;\n      } else if (boundariesElement instanceof HTMLElement) {\n        this.containerElem = boundariesElement;\n      } else {\n        throw new Error(\"RTA: Invalid prop boundariesElement: it has to be string or HTMLElement.\");\n      }\n\n      if (!this.containerElem || !this.containerElem.contains(this.ref)) {\n        if (process.env.NODE_ENV !== \"test\") {\n          throw new Error(\"RTA: Invalid prop boundariesElement: it has to be one of the parents of the RTA.\");\n        }\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this$ref$classList, _this$ref$classList2;\n\n      var top = this.props.top || 0;\n      var left = this.props.left || 0;\n      var usedClasses = [];\n      var unusedClasses = [];\n      var topPosition = 0;\n      var leftPosition = 0;\n      var containerBounds = this.containerElem.getBoundingClientRect();\n      var dropdownBounds = this.ref.getBoundingClientRect();\n      var textareaBounds = this.props.textareaRef.getBoundingClientRect();\n      var computedStyle = window.getComputedStyle(this.ref);\n      var marginTop = parseInt(computedStyle.getPropertyValue(\"margin-top\"), 10);\n      var marginBottom = parseInt(computedStyle.getPropertyValue(\"margin-bottom\"), 10);\n      var marginLeft = parseInt(computedStyle.getPropertyValue(\"margin-left\"), 10);\n      var marginRight = parseInt(computedStyle.getPropertyValue(\"margin-right\"), 10);\n      var dropdownBottom = marginTop + marginBottom + textareaBounds.top + top + dropdownBounds.height;\n      var dropdownRight = marginLeft + marginRight + textareaBounds.left + left + dropdownBounds.width;\n\n      if (dropdownRight > containerBounds.right) {\n        leftPosition = left - dropdownBounds.width;\n        usedClasses.push(POSITION_CONFIGURATION.X.LEFT);\n        unusedClasses.push(POSITION_CONFIGURATION.X.RIGHT);\n      } else {\n        leftPosition = left;\n        usedClasses.push(POSITION_CONFIGURATION.X.RIGHT);\n        unusedClasses.push(POSITION_CONFIGURATION.X.LEFT);\n      }\n\n      if (dropdownBottom > containerBounds.bottom) {\n        topPosition = top - dropdownBounds.height;\n        usedClasses.push(POSITION_CONFIGURATION.Y.TOP);\n        unusedClasses.push(POSITION_CONFIGURATION.Y.BOTTOM);\n      } else {\n        topPosition = top;\n        usedClasses.push(POSITION_CONFIGURATION.Y.BOTTOM);\n        unusedClasses.push(POSITION_CONFIGURATION.Y.TOP);\n      }\n\n      if (this.props.renderToBody) {\n        topPosition += textareaBounds.top;\n        leftPosition += textareaBounds.left;\n      }\n\n      this.ref.style.top = \"\".concat(topPosition, \"px\");\n      this.ref.style.left = \"\".concat(leftPosition, \"px\");\n\n      (_this$ref$classList = this.ref.classList).remove.apply(_this$ref$classList, unusedClasses);\n\n      (_this$ref$classList2 = this.ref.classList).add.apply(_this$ref$classList2, usedClasses);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props = this.props,\n          style = _this$props.style,\n          className = _this$props.className,\n          innerRef = _this$props.innerRef,\n          children = _this$props.children,\n          renderToBody = _this$props.renderToBody;\n      var body = document.body;\n      var autocompleteContainer = React.createElement(\"div\", {\n        ref: function ref(_ref) {\n          // $FlowFixMe\n          _this.ref = _ref; // $FlowFixMe\n\n          innerRef(_ref);\n        },\n        className: \"rta__autocomplete \".concat(className || \"\"),\n        style: style\n      }, children);\n      return renderToBody && body !== null ? ReactDOM.createPortal(autocompleteContainer, body) : autocompleteContainer;\n    }\n  }]);\n\n  return Autocomplete;\n}(React.Component);\n\nvar ReactTextareaAutocomplete =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(ReactTextareaAutocomplete, _React$Component2);\n\n  function ReactTextareaAutocomplete(_props) {\n    var _this2;\n\n    _classCallCheck(this, ReactTextareaAutocomplete);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ReactTextareaAutocomplete).call(this, _props));\n    _this2.state = {\n      top: null,\n      left: null,\n      currentTrigger: null,\n      actualToken: \"\",\n      data: null,\n      value: \"\",\n      dataLoading: false,\n      selectionEnd: 0,\n      component: null,\n      textToReplace: null\n    };\n\n    _this2.escListenerInit = function () {\n      if (!_this2.escListener) {\n        _this2.escListener = Listeners.add(KEY_CODES.ESC, _this2._closeAutocomplete);\n      }\n    };\n\n    _this2.escListenerDestroy = function () {\n      if (_this2.escListener) {\n        Listeners.remove(_this2.escListener);\n        _this2.escListener = null;\n      }\n    };\n\n    _this2.getSelectionPosition = function () {\n      if (!_this2.textareaRef) return null;\n      return {\n        selectionStart: _this2.textareaRef.selectionStart,\n        selectionEnd: _this2.textareaRef.selectionEnd\n      };\n    };\n\n    _this2.getSelectedText = function () {\n      if (!_this2.textareaRef) return null;\n      var _this2$textareaRef = _this2.textareaRef,\n          selectionStart = _this2$textareaRef.selectionStart,\n          selectionEnd = _this2$textareaRef.selectionEnd;\n      if (selectionStart === selectionEnd) return null;\n      return _this2.state.value.substr(selectionStart, selectionEnd - selectionStart);\n    };\n\n    _this2.setCaretPosition = function () {\n      var position = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      if (!_this2.textareaRef) return;\n\n      _this2.textareaRef.focus();\n\n      _this2.textareaRef.setSelectionRange(position, position);\n    };\n\n    _this2.getCaretPosition = function () {\n      if (!_this2.textareaRef) {\n        return 0;\n      }\n\n      var position = _this2.textareaRef.selectionEnd;\n      return position;\n    };\n\n    _this2._handleCaretChange = function (e) {\n      var cleanLastTrigger = function cleanLastTrigger() {\n        var beforeHandle = _this2.getCaretPosition() - 1;\n        _this2.lastTrigger = _this2.lastTrigger ? beforeHandle : 0;\n      };\n\n      if (e.type === \"keydown\") {\n        // $FlowFixMe\n        var code = e.keyCode || e.which;\n\n        switch (code) {\n          case KEY_CODES.UP:\n          case KEY_CODES.DOWN:\n            if (!_this2._isAutocompleteOpen()) {\n              cleanLastTrigger();\n            }\n\n            break;\n\n          case KEY_CODES.LEFT:\n          case KEY_CODES.RIGHT:\n            cleanLastTrigger();\n            break;\n\n          default:\n        }\n\n        return;\n      }\n\n      cleanLastTrigger();\n    };\n\n    _this2._onSelect = function (item) {\n      var _this2$state = _this2.state,\n          selectionEnd = _this2$state.selectionEnd,\n          currentTrigger = _this2$state.currentTrigger,\n          textareaValue = _this2$state.value;\n      var _this2$props = _this2.props,\n          trigger = _this2$props.trigger,\n          onItemSelected = _this2$props.onItemSelected;\n      if (!currentTrigger) return;\n\n      var getTextToReplaceForCurrentTrigger = _this2._getTextToReplace(currentTrigger);\n\n      if (!getTextToReplaceForCurrentTrigger) {\n        _this2._closeAutocomplete();\n\n        return;\n      }\n\n      var newToken = getTextToReplaceForCurrentTrigger(item);\n\n      if (!newToken) {\n        _this2._closeAutocomplete();\n\n        return;\n      }\n\n      if (onItemSelected) {\n        onItemSelected({\n          currentTrigger: currentTrigger,\n          item: item\n        });\n      }\n\n      var computeCaretPosition = function computeCaretPosition(position, token, startToken) {\n        switch (position) {\n          case \"start\":\n            return startToken;\n\n          case \"next\":\n          case \"end\":\n            return startToken + token.length;\n\n          default:\n            if (!Number.isInteger(position)) {\n              throw new Error('RTA: caretPosition should be \"start\", \"next\", \"end\" or number.');\n            }\n\n            return position;\n        }\n      };\n\n      var textToModify = textareaValue.slice(0, selectionEnd);\n      var startOfTokenPosition = textToModify.search(\n      /**\n       * It's important to escape the currentTrigger char for chars like [, (,...\n       */\n      new RegExp(\"\".concat(escapeRegex(currentTrigger), \"[^\".concat(escapeRegex(currentTrigger)).concat(trigger[currentTrigger].allowWhitespace ? \"\" : \"\\\\s\", \"]\"), \"*$\"))); // we add space after emoji is selected if a caret position is next\n\n      var newTokenString = newToken.caretPosition === \"next\" ? \"\".concat(newToken.text, \" \") : newToken.text;\n      var newCaretPosition = computeCaretPosition(newToken.caretPosition, newTokenString, startOfTokenPosition);\n      var modifiedText = textToModify.substring(0, startOfTokenPosition) + newTokenString;\n      var newValue = textareaValue.replace(textToModify, modifiedText); // set the new textarea value and after that set the caret back to its position\n\n      _this2.setState({\n        value: newValue,\n        dataLoading: false\n      }, function () {\n        var insertedTrigger = _this2.tokenRegExpEnding.exec(newTokenString);\n\n        var insertedTriggerModifier = insertedTrigger ? insertedTrigger[0].length : 1;\n        _this2.lastTrigger = newCaretPosition ? newCaretPosition - insertedTriggerModifier : newCaretPosition;\n        _this2.textareaRef.value = newValue;\n        _this2.textareaRef.selectionEnd = newCaretPosition;\n\n        _this2._changeHandler();\n\n        var scrollTop = _this2.textareaRef.scrollTop;\n\n        _this2.setCaretPosition(newCaretPosition);\n        /*\n          Chrome does not maintain scroll position\n          Relevant discussion https://github.com/webscopeio/react-textarea-autocomplete/pull/97\n        */\n\n\n        if (window.chrome) {\n          _this2.textareaRef.scrollTop = scrollTop;\n        }\n      });\n    };\n\n    _this2._getTextToReplace = function (currentTrigger) {\n      var triggerSettings = _this2.props.trigger[currentTrigger];\n      if (!currentTrigger || !triggerSettings) return null;\n      var output = triggerSettings.output;\n      return function (item) {\n        if (typeof item === \"object\" && (!output || typeof output !== \"function\")) {\n          throw new Error('Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n        }\n\n        if (output) {\n          var textToReplace = output(item, currentTrigger);\n\n          if (textToReplace === undefined || typeof textToReplace === \"number\") {\n            throw new Error(\"Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \\\"\".concat(String(textToReplace), \"\\\". Check the implementation for trigger \\\"\").concat(currentTrigger, \"\\\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more information.\\n\"));\n          }\n\n          if (textToReplace === null) return null;\n\n          if (typeof textToReplace === \"string\") {\n            return {\n              text: textToReplace,\n              caretPosition: DEFAULT_CARET_POSITION\n            };\n          }\n\n          if (!textToReplace.text) {\n            throw new Error(\"Output \\\"text\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\".concat(currentTrigger, \"\\\"\\n\"));\n          }\n\n          if (!textToReplace.caretPosition) {\n            throw new Error(\"Output \\\"caretPosition\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\".concat(currentTrigger, \"\\\"\\n\"));\n          }\n\n          return textToReplace;\n        }\n\n        if (typeof item !== \"string\") {\n          throw new Error(\"Output item should be string\\n\");\n        }\n\n        return {\n          text: \"\".concat(currentTrigger).concat(item).concat(currentTrigger),\n          caretPosition: DEFAULT_CARET_POSITION\n        };\n      };\n    };\n\n    _this2._getCurrentTriggerSettings = function () {\n      var currentTrigger = _this2.state.currentTrigger;\n      if (!currentTrigger) return null;\n      return _this2.props.trigger[currentTrigger];\n    };\n\n    _this2._getValuesFromProvider = function () {\n      var _this2$state2 = _this2.state,\n          currentTrigger = _this2$state2.currentTrigger,\n          actualToken = _this2$state2.actualToken;\n\n      var triggerSettings = _this2._getCurrentTriggerSettings();\n\n      if (!currentTrigger || !triggerSettings) {\n        return;\n      }\n\n      var dataProvider = triggerSettings.dataProvider,\n          component = triggerSettings.component;\n\n      if (typeof dataProvider !== \"function\") {\n        throw new Error(\"Trigger provider has to be a function!\");\n      }\n\n      _this2.setState({\n        dataLoading: true\n      });\n\n      var providedData = dataProvider(actualToken);\n\n      if (!(providedData instanceof Promise)) {\n        providedData = Promise.resolve(providedData);\n      }\n\n      providedData.then(function (data) {\n        if (!Array.isArray(data)) {\n          throw new Error(\"Trigger provider has to provide an array!\");\n        }\n\n        if (typeof component !== \"function\") {\n          throw new Error(\"Component should be defined!\");\n        } // throw away if we resolved old trigger\n\n\n        if (currentTrigger !== _this2.state.currentTrigger) return; // if we haven't resolved any data let's close the autocomplete\n\n        if (!data.length) {\n          _this2._closeAutocomplete();\n\n          return;\n        }\n\n        _this2.setState({\n          dataLoading: false,\n          data: data,\n          component: component\n        });\n      }).catch(function (e) {\n        return errorMessage(e.message);\n      });\n    };\n\n    _this2._getSuggestions = function () {\n      var _this2$state3 = _this2.state,\n          currentTrigger = _this2$state3.currentTrigger,\n          data = _this2$state3.data;\n      if (!currentTrigger || !data || data && !data.length) return null;\n      return data;\n    };\n\n    _this2._createRegExp = function () {\n      var trigger = _this2.props.trigger; // negative lookahead to match only the trigger + the actual token = \"bladhwd:adawd:word test\" => \":word\"\n      // https://stackoverflow.com/a/8057827/2719917\n\n      _this2.tokenRegExp = new RegExp(\"(\".concat(Object.keys(trigger) // the sort is important for multi-char combos as \"/kick\", \"/\"\n      .sort(function (a, b) {\n        if (a < b) {\n          return 1;\n        }\n\n        if (a > b) {\n          return -1;\n        }\n\n        return 0;\n      }).map(function (a) {\n        return escapeRegex(a);\n      }).join(\"|\"), \")((?:(?!\\\\1)[^\\\\s])*$)\"));\n      _this2.tokenRegExpEnding = new RegExp(\"(\".concat(Object.keys(trigger) // the sort is important for multi-char combos as \"/kick\", \"/\"\n      .sort(function (a, b) {\n        if (a < b) {\n          return 1;\n        }\n\n        if (a > b) {\n          return -1;\n        }\n\n        return 0;\n      }).map(function (a) {\n        return escapeRegex(a);\n      }).join(\"|\"), \")$\"));\n    };\n\n    _this2._closeAutocomplete = function () {\n      _this2.escListenerDestroy();\n\n      _this2.setState({\n        data: null,\n        dataLoading: false,\n        currentTrigger: null\n      });\n    };\n\n    _this2._cleanUpProps = function () {\n      var props = _objectSpread({}, _this2.props);\n\n      var notSafe = [\"loadingComponent\", \"boundariesElement\", \"containerStyle\", \"minChar\", \"scrollToItem\", \"ref\", \"innerRef\", \"onChange\", \"onCaretPositionChange\", \"className\", \"value\", \"trigger\", \"listStyle\", \"itemStyle\", \"containerStyle\", \"loaderStyle\", \"className\", \"containerClassName\", \"listClassName\", \"itemClassName\", \"loaderClassName\", \"dropdownStyle\", \"dropdownClassName\", \"movePopupAsYouType\", \"textAreaComponent\", \"renderToBody\", \"onItemSelected\"]; // eslint-disable-next-line\n\n      for (var prop in props) {\n        if (notSafe.includes(prop)) delete props[prop];\n      }\n\n      return props;\n    };\n\n    _this2._changeHandler = function (e) {\n      var _this2$props2 = _this2.props,\n          trigger = _this2$props2.trigger,\n          onChange = _this2$props2.onChange,\n          minChar = _this2$props2.minChar,\n          onCaretPositionChange = _this2$props2.onCaretPositionChange,\n          movePopupAsYouType = _this2$props2.movePopupAsYouType;\n      var _this2$state4 = _this2.state,\n          top = _this2$state4.top,\n          left = _this2$state4.left;\n      var event = e;\n\n      if (!event) {\n        // fire onChange event after successful selection\n        event = new CustomEvent(\"change\", {\n          bubbles: true\n        });\n\n        _this2.textareaRef.dispatchEvent(event);\n      }\n\n      var textarea = event.target;\n      var selectionEnd = textarea.selectionEnd;\n      var value = textarea.value;\n      _this2.lastValueBubbledEvent = value;\n\n      if (onChange && event) {\n        event.persist && event.persist();\n        onChange(event);\n      }\n\n      if (onCaretPositionChange) {\n        var caretPosition = _this2.getCaretPosition();\n\n        onCaretPositionChange(caretPosition);\n      }\n\n      _this2.setState({\n        value: value\n      });\n\n      var setTopLeft = function setTopLeft() {\n        var _getCaretCoordinates = getCaretCoordinates(textarea, selectionEnd),\n            newTop = _getCaretCoordinates.top,\n            newLeft = _getCaretCoordinates.left;\n\n        _this2.setState({\n          // make position relative to textarea\n          top: newTop - _this2.textareaRef.scrollTop || 0,\n          left: newLeft\n        });\n      };\n\n      var cleanLastTrigger = function cleanLastTrigger(triggerLength) {\n        _this2.lastTrigger = selectionEnd - triggerLength;\n\n        _this2._closeAutocomplete();\n\n        setTopLeft();\n      };\n\n      if (selectionEnd <= _this2.lastTrigger) {\n        var _affectedTextareaValue = value.slice(0, selectionEnd);\n\n        var _newTrigger = _this2.tokenRegExp.exec(_affectedTextareaValue);\n\n        cleanLastTrigger(_newTrigger ? _newTrigger[0].length : 0);\n      }\n\n      var affectedTextareaValue = value.slice(_this2.lastTrigger, selectionEnd);\n\n      var tokenMatch = _this2.tokenRegExp.exec(affectedTextareaValue);\n\n      var lastToken = tokenMatch && tokenMatch[0];\n      var currentTrigger = tokenMatch && tokenMatch[1] || null;\n      var currentTriggerLength = currentTrigger ? currentTrigger.length - 1 : 0; // with this approach we want to know if the user just inserted a new trigger sequence\n\n      var newTrigger = _this2.tokenRegExpEnding.exec(affectedTextareaValue);\n\n      if (newTrigger) {\n        cleanLastTrigger(newTrigger[0].length);\n      } else if (!_this2._isAutocompleteOpen()) {\n        _this2._closeAutocomplete();\n      }\n      /*\n       if we lost the trigger token or there is no following character we want to close\n       the autocomplete\n      */\n\n\n      if ((!lastToken || lastToken.length <= minChar + currentTriggerLength) && ( // check if our current trigger disallows whitespace\n      _this2.state.currentTrigger && !trigger[_this2.state.currentTrigger].allowWhitespace || !_this2.state.currentTrigger)) {\n        _this2._closeAutocomplete();\n\n        return;\n      }\n      /**\n       * This code has to be sync that is the reason why we obtain the currentTrigger\n       * from currentTrigger not this.state.currentTrigger\n       *\n       * Check if the currently typed token has to be afterWhitespace, or not.\n       *\n       * This setting means that there has to be whitespace before the token (on it has to be the the first character typed into textarea)\n       */\n\n\n      if (currentTrigger && trigger[currentTrigger].afterWhitespace && !/\\s/.test(value[selectionEnd - lastToken.length - 1]) && value[selectionEnd - lastToken.length - 1] !== undefined) {\n        _this2._closeAutocomplete();\n\n        return;\n      }\n      /**\n        If our current trigger allows whitespace\n        get the correct token for DataProvider, so we need to construct new RegExp\n       */\n\n\n      if (_this2.state.currentTrigger && trigger[_this2.state.currentTrigger].allowWhitespace) {\n        tokenMatch = new RegExp(\"\".concat(escapeRegex(_this2.state.currentTrigger), \".*$\")).exec(value.slice(0, selectionEnd));\n        lastToken = tokenMatch && tokenMatch[0];\n\n        if (!lastToken) {\n          _this2._closeAutocomplete();\n\n          return;\n        }\n\n        currentTrigger = Object.keys(trigger).find(function (a) {\n          return a === lastToken[0];\n        }) || null;\n      }\n\n      var actualToken = lastToken.slice(1); // if trigger is not configured step out from the function, otherwise proceed\n\n      if (!currentTrigger) {\n        return;\n      }\n\n      if (movePopupAsYouType || top === null && left === null || // if the trigger got changed, let's reposition the autocomplete\n      _this2.state.currentTrigger !== currentTrigger) {\n        setTopLeft();\n      }\n\n      _this2.escListenerInit();\n\n      var textToReplace = _this2._getTextToReplace(currentTrigger);\n\n      _this2.setState({\n        selectionEnd: selectionEnd,\n        currentTrigger: currentTrigger,\n        textToReplace: textToReplace,\n        actualToken: actualToken\n      }, function () {\n        try {\n          _this2._getValuesFromProvider();\n        } catch (err) {\n          errorMessage(err.message);\n        }\n      });\n    };\n\n    _this2._selectHandler = function (e) {\n      var _this2$props3 = _this2.props,\n          onCaretPositionChange = _this2$props3.onCaretPositionChange,\n          onSelect = _this2$props3.onSelect;\n\n      if (onCaretPositionChange) {\n        var caretPosition = _this2.getCaretPosition();\n\n        onCaretPositionChange(caretPosition);\n      }\n\n      if (onSelect) {\n        e.persist();\n        onSelect(e);\n      }\n    };\n\n    _this2._shouldStayOpen = function (e) {\n      var el = e.relatedTarget; // IE11 doesn't know about `relatedTarget` // https://stackoverflow.com/a/49325196/2719917\n\n      if (el === null) {\n        el = document.activeElement;\n      }\n\n      if (_this2.dropdownRef && el instanceof Node && _this2.dropdownRef.contains(el)) {\n        return true;\n      }\n\n      return false;\n    };\n\n    _this2._onClick = function (e) {\n      var onClick = _this2.props.onClick;\n\n      if (onClick) {\n        e.persist();\n        onClick(e);\n      }\n\n      if (_this2._shouldStayOpen(e)) {\n        return;\n      }\n\n      _this2._closeAutocomplete();\n    };\n\n    _this2._onBlur = function (e) {\n      var onBlur = _this2.props.onBlur;\n\n      if (onBlur) {\n        e.persist();\n        onBlur(e);\n      }\n\n      if (_this2._shouldStayOpen(e)) {\n        return;\n      }\n\n      _this2._closeAutocomplete();\n    };\n\n    _this2._onScrollHandler = function () {\n      _this2._closeAutocomplete();\n    };\n\n    _this2._dropdownScroll = function (item) {\n      var scrollToItem = _this2.props.scrollToItem;\n      if (!scrollToItem) return;\n\n      if (scrollToItem === true) {\n        defaultScrollToItem(_this2.dropdownRef, item);\n        return;\n      }\n\n      if (typeof scrollToItem !== \"function\" || scrollToItem.length !== 2) {\n        throw new Error(\"`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.\");\n      }\n\n      scrollToItem(_this2.dropdownRef, item);\n    };\n\n    _this2._isAutocompleteOpen = function () {\n      var _this2$state5 = _this2.state,\n          dataLoading = _this2$state5.dataLoading,\n          currentTrigger = _this2$state5.currentTrigger;\n\n      var suggestionData = _this2._getSuggestions();\n\n      return !!((dataLoading || suggestionData) && currentTrigger);\n    };\n\n    _this2._textareaRef = function (ref) {\n      // $FlowFixMe - ref is actually a `?HTMLTextAreaElement`\n      _this2.props.innerRef && _this2.props.innerRef(ref);\n      _this2.textareaRef = ref;\n    };\n\n    _this2.lastTrigger = 0;\n    _this2.escListener = null;\n    var _this2$props4 = _this2.props,\n        loadingComponent = _this2$props4.loadingComponent,\n        _trigger = _this2$props4.trigger,\n        _value = _this2$props4.value;\n    if (_value) _this2.state.value = _value;\n\n    _this2._createRegExp();\n\n    if (!loadingComponent) {\n      throw new Error(\"RTA: loadingComponent is not defined\");\n    }\n\n    if (!_trigger) {\n      throw new Error(\"RTA: trigger is not defined\");\n    }\n\n    return _this2;\n  }\n\n  _createClass(ReactTextareaAutocomplete, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Listeners.startListen(this.textareaRef); // handle caret change\n\n      this.textareaRef && this.textareaRef.addEventListener(\"focus\", this._handleCaretChange);\n      this.textareaRef && this.textareaRef.addEventListener(\"click\", this._handleCaretChange);\n      this.textareaRef && this.textareaRef.addEventListener(\"keydown\", this._handleCaretChange);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_ref2) {\n      var oldTrigger = _ref2.trigger,\n          oldValue = _ref2.value;\n      var _this$props2 = this.props,\n          trigger = _this$props2.trigger,\n          value = _this$props2.value;\n\n      if (Object.keys(trigger).join(\"\") !== Object.keys(oldTrigger).join(\"\")) {\n        this._createRegExp();\n      }\n\n      if (oldValue !== value && this.lastValueBubbledEvent !== value) {\n        this.lastTrigger = 0;\n\n        this._changeHandler();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.escListenerDestroy();\n      Listeners.stopListen(this.textareaRef); // handle caret change\n\n      this.textareaRef && this.textareaRef.removeEventListener(\"focus\", this._handleCaretChange);\n      this.textareaRef && this.textareaRef.removeEventListener(\"click\", this._handleCaretChange);\n      this.textareaRef && this.textareaRef.removeEventListener(\"keydown\", this._handleCaretChange);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props3 = this.props,\n          Loader = _this$props3.loadingComponent,\n          style = _this$props3.style,\n          className = _this$props3.className,\n          listStyle = _this$props3.listStyle,\n          itemStyle = _this$props3.itemStyle,\n          boundariesElement = _this$props3.boundariesElement,\n          movePopupAsYouType = _this$props3.movePopupAsYouType,\n          listClassName = _this$props3.listClassName,\n          itemClassName = _this$props3.itemClassName,\n          dropdownClassName = _this$props3.dropdownClassName,\n          dropdownStyle = _this$props3.dropdownStyle,\n          containerStyle = _this$props3.containerStyle,\n          containerClassName = _this$props3.containerClassName,\n          loaderStyle = _this$props3.loaderStyle,\n          loaderClassName = _this$props3.loaderClassName,\n          textAreaComponent = _this$props3.textAreaComponent,\n          renderToBody = _this$props3.renderToBody;\n      var _this$state = this.state,\n          left = _this$state.left,\n          top = _this$state.top,\n          dataLoading = _this$state.dataLoading,\n          component = _this$state.component,\n          value = _this$state.value,\n          textToReplace = _this$state.textToReplace;\n\n      var isAutocompleteOpen = this._isAutocompleteOpen();\n\n      var suggestionData = this._getSuggestions();\n\n      var extraAttrs = {};\n      var TextAreaComponent;\n\n      if (textAreaComponent.component) {\n        TextAreaComponent = textAreaComponent.component;\n        extraAttrs[textAreaComponent.ref] = this._textareaRef;\n      } else {\n        TextAreaComponent = textAreaComponent;\n        extraAttrs.ref = this._textareaRef;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"rta \".concat(dataLoading === true ? \"rta--loading\" : \"\", \" \").concat(containerClassName || \"\"),\n        style: containerStyle\n      }, React.createElement(TextAreaComponent, Object.assign({}, this._cleanUpProps(), {\n        className: \"rta__textarea \".concat(className || \"\"),\n        onChange: this._changeHandler,\n        onSelect: this._selectHandler,\n        onScroll: this._onScrollHandler,\n        onClick: // The textarea itself is outside the autoselect dropdown.\n        this._onClick,\n        onBlur: this._onBlur,\n        value: value,\n        style: style\n      }, extraAttrs)), isAutocompleteOpen && React.createElement(Autocomplete, {\n        innerRef: function innerRef(ref) {\n          // $FlowFixMe\n          _this3.dropdownRef = ref;\n        },\n        top: top,\n        left: left,\n        style: dropdownStyle,\n        className: dropdownClassName,\n        movePopupAsYouType: movePopupAsYouType,\n        boundariesElement: boundariesElement,\n        textareaRef: this.textareaRef,\n        renderToBody: renderToBody\n      }, suggestionData && component && textToReplace && React.createElement(List, {\n        values: suggestionData,\n        component: component,\n        style: listStyle,\n        className: listClassName,\n        itemClassName: itemClassName,\n        itemStyle: itemStyle,\n        getTextToReplace: textToReplace,\n        onSelect: this._onSelect,\n        dropdownScroll: this._dropdownScroll\n      }), dataLoading && React.createElement(\"div\", {\n        className: \"rta__loader \".concat(suggestionData !== null ? \"rta__loader--suggestion-data\" : \"rta__loader--empty-suggestion-data\", \" \").concat(loaderClassName || \"\"),\n        style: loaderStyle\n      }, React.createElement(Loader, {\n        data: suggestionData\n      }))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(_ref3) {\n      var value = _ref3.value;\n      if (value === null || value === undefined) return null;\n      return {\n        value: value\n      };\n    }\n  }]);\n\n  return ReactTextareaAutocomplete;\n}(React.Component);\n\nReactTextareaAutocomplete.defaultProps = {\n  movePopupAsYouType: false,\n  value: null,\n  minChar: 1,\n  boundariesElement: \"body\",\n  scrollToItem: true,\n  textAreaComponent: \"textarea\",\n  renderToBody: false\n};\n\nexport default ReactTextareaAutocomplete;\n","\nvar NativeCustomEvent = global.CustomEvent;\n\nfunction useNative () {\n  try {\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n    return  'cat' === p.type && 'bar' === p.detail.foo;\n  } catch (e) {\n  }\n  return false;\n}\n\n/**\n * Cross-browser `CustomEvent` constructor.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\n *\n * @public\n */\n\nmodule.exports = useNative() ? NativeCustomEvent :\n\n// IE >= 9\n'undefined' !== typeof document && 'function' === typeof document.createEvent ? function CustomEvent (type, params) {\n  var e = document.createEvent('CustomEvent');\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, void 0);\n  }\n  return e;\n} :\n\n// IE <= 8\nfunction CustomEvent (type, params) {\n  var e = document.createEventObject();\n  e.type = type;\n  if (params) {\n    e.bubbles = Boolean(params.bubbles);\n    e.cancelable = Boolean(params.cancelable);\n    e.detail = params.detail;\n  } else {\n    e.bubbles = false;\n    e.cancelable = false;\n    e.detail = void 0;\n  }\n  return e;\n}\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport { createElement, Component } from 'react';\nimport { oneOfType, func, shape, any, number, object, bool, string } from 'prop-types';\n\nvar isIE =  !!document.documentElement.currentStyle ;\nvar HIDDEN_TEXTAREA_STYLE = {\n  'min-height': '0',\n  'max-height': 'none',\n  height: '0',\n  visibility: 'hidden',\n  overflow: 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0'\n};\nvar SIZING_STYLE = ['letter-spacing', 'line-height', 'font-family', 'font-weight', 'font-size', 'font-style', 'tab-size', 'text-rendering', 'text-transform', 'width', 'text-indent', 'padding-top', 'padding-right', 'padding-bottom', 'padding-left', 'border-top-width', 'border-right-width', 'border-bottom-width', 'border-left-width', 'box-sizing'];\nvar computedStyleCache = {};\nvar hiddenTextarea =  document.createElement('textarea');\n\nvar forceHiddenStyles = function forceHiddenStyles(node) {\n  Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function (key) {\n    node.style.setProperty(key, HIDDEN_TEXTAREA_STYLE[key], 'important');\n  });\n};\n\n{\n  hiddenTextarea.setAttribute('tab-index', '-1');\n  hiddenTextarea.setAttribute('aria-hidden', 'true');\n  forceHiddenStyles(hiddenTextarea);\n}\n\nfunction calculateNodeHeight(uiTextNode, uid, useCache, minRows, maxRows) {\n  if (useCache === void 0) {\n    useCache = false;\n  }\n\n  if (minRows === void 0) {\n    minRows = null;\n  }\n\n  if (maxRows === void 0) {\n    maxRows = null;\n  }\n\n  if (hiddenTextarea.parentNode === null) {\n    document.body.appendChild(hiddenTextarea);\n  } // Copy all CSS properties that have an impact on the height of the content in\n  // the textbox\n\n\n  var nodeStyling = calculateNodeStyling(uiTextNode, uid, useCache);\n\n  if (nodeStyling === null) {\n    return null;\n  }\n\n  var paddingSize = nodeStyling.paddingSize,\n      borderSize = nodeStyling.borderSize,\n      boxSizing = nodeStyling.boxSizing,\n      sizingStyle = nodeStyling.sizingStyle; // Need to have the overflow attribute to hide the scrollbar otherwise\n  // text-lines will not calculated properly as the shadow will technically be\n  // narrower for content\n\n  Object.keys(sizingStyle).forEach(function (key) {\n    hiddenTextarea.style[key] = sizingStyle[key];\n  });\n  forceHiddenStyles(hiddenTextarea);\n  hiddenTextarea.value = uiTextNode.value || uiTextNode.placeholder || 'x';\n  var minHeight = -Infinity;\n  var maxHeight = Infinity;\n  var height = hiddenTextarea.scrollHeight;\n\n  if (boxSizing === 'border-box') {\n    // border-box: add border, since height = content + padding + border\n    height = height + borderSize;\n  } else if (boxSizing === 'content-box') {\n    // remove padding, since height = content\n    height = height - paddingSize;\n  } // measure height of a textarea with a single row\n\n\n  hiddenTextarea.value = 'x';\n  var singleRowHeight = hiddenTextarea.scrollHeight - paddingSize; // Stores the value's rows count rendered in `hiddenTextarea`,\n  // regardless if `maxRows` or `minRows` props are passed\n\n  var valueRowCount = Math.floor(height / singleRowHeight);\n\n  if (minRows !== null) {\n    minHeight = singleRowHeight * minRows;\n\n    if (boxSizing === 'border-box') {\n      minHeight = minHeight + paddingSize + borderSize;\n    }\n\n    height = Math.max(minHeight, height);\n  }\n\n  if (maxRows !== null) {\n    maxHeight = singleRowHeight * maxRows;\n\n    if (boxSizing === 'border-box') {\n      maxHeight = maxHeight + paddingSize + borderSize;\n    }\n\n    height = Math.min(maxHeight, height);\n  }\n\n  var rowCount = Math.floor(height / singleRowHeight);\n  return {\n    height: height,\n    minHeight: minHeight,\n    maxHeight: maxHeight,\n    rowCount: rowCount,\n    valueRowCount: valueRowCount\n  };\n}\n\nfunction calculateNodeStyling(node, uid, useCache) {\n  if (useCache === void 0) {\n    useCache = false;\n  }\n\n  if (useCache && computedStyleCache[uid]) {\n    return computedStyleCache[uid];\n  }\n\n  var style = window.getComputedStyle(node);\n\n  if (style === null) {\n    return null;\n  }\n\n  var sizingStyle = SIZING_STYLE.reduce(function (obj, name) {\n    obj[name] = style.getPropertyValue(name);\n    return obj;\n  }, {});\n  var boxSizing = sizingStyle['box-sizing']; // probably node is detached from DOM, can't read computed dimensions\n\n  if (boxSizing === '') {\n    return null;\n  } // IE (Edge has already correct behaviour) returns content width as computed width\n  // so we need to add manually padding and border widths\n\n\n  if (isIE && boxSizing === 'border-box') {\n    sizingStyle.width = parseFloat(sizingStyle.width) + parseFloat(style['border-right-width']) + parseFloat(style['border-left-width']) + parseFloat(style['padding-right']) + parseFloat(style['padding-left']) + 'px';\n  }\n\n  var paddingSize = parseFloat(sizingStyle['padding-bottom']) + parseFloat(sizingStyle['padding-top']);\n  var borderSize = parseFloat(sizingStyle['border-bottom-width']) + parseFloat(sizingStyle['border-top-width']);\n  var nodeInfo = {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize,\n    boxSizing: boxSizing\n  };\n\n  if (useCache) {\n    computedStyleCache[uid] = nodeInfo;\n  }\n\n  return nodeInfo;\n}\n\nvar purgeCache = function purgeCache(uid) {\n  delete computedStyleCache[uid];\n};\n\nvar noop = function noop() {};\n\nvar uid = 0;\n\nvar TextareaAutosize =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(TextareaAutosize, _React$Component);\n\n  function TextareaAutosize(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _this._onRef = function (node) {\n      _this._ref = node;\n      var inputRef = _this.props.inputRef;\n\n      if (typeof inputRef === 'function') {\n        inputRef(node);\n        return;\n      }\n\n      inputRef.current = node;\n    };\n\n    _this._onChange = function (event) {\n      if (!_this._controlled) {\n        _this._resizeComponent();\n      }\n\n      _this.props.onChange(event, _assertThisInitialized(_this));\n    };\n\n    _this._resizeComponent = function (callback) {\n      if (callback === void 0) {\n        callback = noop;\n      }\n\n      var nodeHeight = calculateNodeHeight(_this._ref, _this._uid, _this.props.useCacheForDOMMeasurements, _this.props.minRows, _this.props.maxRows);\n\n      if (nodeHeight === null) {\n        callback();\n        return;\n      }\n\n      var height = nodeHeight.height,\n          minHeight = nodeHeight.minHeight,\n          maxHeight = nodeHeight.maxHeight,\n          rowCount = nodeHeight.rowCount,\n          valueRowCount = nodeHeight.valueRowCount;\n      _this.rowCount = rowCount;\n      _this.valueRowCount = valueRowCount;\n\n      if (_this.state.height !== height || _this.state.minHeight !== minHeight || _this.state.maxHeight !== maxHeight) {\n        _this.setState({\n          height: height,\n          minHeight: minHeight,\n          maxHeight: maxHeight\n        }, callback);\n\n        return;\n      }\n\n      callback();\n    };\n\n    _this.state = {\n      height: props.style && props.style.height || 0,\n      minHeight: -Infinity,\n      maxHeight: Infinity\n    };\n    _this._uid = uid++;\n    _this._controlled = props.value !== undefined;\n    _this._resizeLock = false;\n    return _this;\n  }\n\n  var _proto = TextareaAutosize.prototype;\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        _inputRef = _this$props.inputRef,\n        _maxRows = _this$props.maxRows,\n        _minRows = _this$props.minRows,\n        _onHeightChange = _this$props.onHeightChange,\n        _useCacheForDOMMeasurements = _this$props.useCacheForDOMMeasurements,\n        props = _objectWithoutPropertiesLoose(_this$props, [\"inputRef\", \"maxRows\", \"minRows\", \"onHeightChange\", \"useCacheForDOMMeasurements\"]);\n\n    props.style = _extends({}, props.style, {\n      height: this.state.height\n    });\n    var maxHeight = Math.max(props.style.maxHeight || Infinity, this.state.maxHeight);\n\n    if (maxHeight < this.state.height) {\n      props.style.overflow = 'hidden';\n    }\n\n    return createElement(\"textarea\", _extends({}, props, {\n      onChange: this._onChange,\n      ref: this._onRef\n    }));\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    this._resizeComponent(); // Working around Firefox bug which runs resize listeners even when other JS is running at the same moment\n    // causing competing rerenders (due to setState in the listener) in React.\n    // More can be found here - facebook/react#6324\n\n\n    this._resizeListener = function () {\n      if (_this2._resizeLock) {\n        return;\n      }\n\n      _this2._resizeLock = true;\n\n      _this2._resizeComponent(function () {\n        _this2._resizeLock = false;\n      });\n    };\n\n    window.addEventListener('resize', this._resizeListener);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (prevProps !== this.props) {\n      this._resizeComponent();\n    }\n\n    if (this.state.height !== prevState.height) {\n      this.props.onHeightChange(this.state.height, this);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    window.removeEventListener('resize', this._resizeListener);\n    purgeCache(this._uid);\n  };\n\n  return TextareaAutosize;\n}(Component);\n\nTextareaAutosize.defaultProps = {\n  inputRef: noop,\n  onChange: noop,\n  onHeightChange: noop,\n  useCacheForDOMMeasurements: false\n};\nprocess.env.NODE_ENV !== \"production\" ? TextareaAutosize.propTypes = {\n  inputRef: oneOfType([func, shape({\n    current: any\n  })]),\n  maxRows: number,\n  minRows: number,\n  onChange: func,\n  onHeightChange: func,\n  style: object,\n  useCacheForDOMMeasurements: bool,\n  value: string\n} : void 0;\n\nexport default TextareaAutosize;\n","/* jshint browser: true */\n\n(function () {\n\n// The properties that we copy into a mirrored div.\n// Note that some browsers, such as Firefox,\n// do not concatenate properties, i.e. padding-top, bottom etc. -> padding,\n// so we have to do every single property specifically.\nvar properties = [\n  'direction',  // RTL support\n  'boxSizing',\n  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height',\n  'overflowX',\n  'overflowY',  // copy the scrollbar for IE\n\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderStyle',\n\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration',  // might not make a difference, but better be safe\n\n  'letterSpacing',\n  'wordSpacing',\n\n  'tabSize',\n  'MozTabSize'\n\n];\n\nvar isBrowser = (typeof window !== 'undefined');\nvar isFirefox = (isBrowser && window.mozInnerScreenX != null);\n\nfunction getCaretCoordinates(element, position, options) {\n  if(!isBrowser) {\n    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n  }\n\n  var debug = options && options.debug || false;\n  if (debug) {\n    var el = document.querySelector('#input-textarea-caret-position-mirror-div');\n    if ( el ) { el.parentNode.removeChild(el); }\n  }\n\n  // mirrored div\n  var div = document.createElement('div');\n  div.id = 'input-textarea-caret-position-mirror-div';\n  document.body.appendChild(div);\n\n  var style = div.style;\n  var computed = window.getComputedStyle? getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\n\n  // default textarea styles\n  style.whiteSpace = 'pre-wrap';\n  if (element.nodeName !== 'INPUT')\n    style.wordWrap = 'break-word';  // only for textarea-s\n\n  // position off-screen\n  style.position = 'absolute';  // required to return coordinates properly\n  if (!debug)\n    style.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n  // transfer the element's properties to the div\n  properties.forEach(function (prop) {\n    style[prop] = computed[prop];\n  });\n\n  if (isFirefox) {\n    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n    if (element.scrollHeight > parseInt(computed.height))\n      style.overflowY = 'scroll';\n  } else {\n    style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n  }\n\n  div.textContent = element.value.substring(0, position);\n  // the second special handling for input type=\"text\" vs textarea: spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n  if (element.nodeName === 'INPUT')\n    div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n\n  var span = document.createElement('span');\n  // Wrapping must be replicated *exactly*, including when a long word gets\n  // onto the next line, with whitespace at the end of the line before (#7).\n  // The  *only* reliable way to do that is to copy the *entire* rest of the\n  // textarea's content into the <span> created at the caret position.\n  // for inputs, just '.' would be enough, but why bother?\n  span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n  div.appendChild(span);\n\n  var coordinates = {\n    top: span.offsetTop + parseInt(computed['borderTopWidth']),\n    left: span.offsetLeft + parseInt(computed['borderLeftWidth'])\n  };\n\n  if (debug) {\n    span.style.backgroundColor = '#aaa';\n  } else {\n    document.body.removeChild(div);\n  }\n\n  return coordinates;\n}\n\nif (typeof module != 'undefined' && typeof module.exports != 'undefined') {\n  module.exports = getCaretCoordinates;\n} else if(isBrowser){\n  window.getCaretCoordinates = getCaretCoordinates;\n}\n\n}());\n"],"sourceRoot":""}