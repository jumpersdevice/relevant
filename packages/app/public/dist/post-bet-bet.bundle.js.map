{"version":3,"sources":["webpack:///./public/img/info.png","webpack:///./src/utils/notifications.js","webpack:///./src/modules/activity/activity.actions.js","webpack:///./src/modules/activity/notificationTimes.js","webpack:///./src/modules/community/community.selectors.js","webpack:///./src/modules/stats/piechart.js","webpack:////Users/slavab/local/relevant/node_modules/react-native-web-svg/index.es.js","webpack:///./src/modules/post/bet/smallcoinstat.js","webpack:///./src/modules/post/bet/betstats.js","webpack:///./src/modules/post/bet/circlebutton.js","webpack:///./src/modules/post/bet/bet.js","webpack:///./src/modules/post/invest.actions.js","webpack:///./src/modules/web_ethTools/eth.context.js","webpack:///./src/modules/stats/coinStat.component.js","webpack:///./src/modules/tooltip/mobile/setupTooltips.js","webpack:///./src/modules/tooltip/tooltip.component.js","webpack:///./src/modules/wallet/price.context.js","webpack:///./src/utils/propValidation.js","webpack:///./src/utils/rewards.js"],"names":["initPushNotifications","a","navigator","serviceWorker","ready","registration","pushManager","getSubscription","subscription","process","convertedVapidKey","urlBase64ToUint8Array","subscribe","userVisibleOnly","applicationServerKey","console","log","base64String","base64","repeat","length","replace","rawData","window","atob","outputArray","Uint8Array","i","charCodeAt","register","err","registerServiceWorker","apiServer","reqOptions","tk","credentials","headers","Accept","Authorization","setActivity","data","type","index","types","payload","resetActivity","clearCount","setCount","getActivity","skip","dispatch","api","request","method","endpoint","path","auth","query","res","errorActions","message","markRead","storage","getToken","then","fetch","catch","createNotification","obj","body","JSON","stringify","getNotificationCount","unread","showBannerPrompt","promptType","promptProps","hideBannerPrompt","notification","enableDesktopNotifications","updateNotificationSettings","desktop","all","toJSON","showBetPrompt","isDismissed","showPushNotificationPrompt","handleDesktopPrompt","handleMobilePrompt","Notification","permission","Promise","resolve","reject","PushNotification","checkPermissions","resp","alert","isMobile","useCommunity","useSelector","state","community","communities","active","PieChart","percent","color","text","strokeWidth","w","h","r","d","height","width","viewBox","cx","cy","fill","stroke","colors","lightBorder","strokeDasharray","strokeDashoffset","fontSize","x","y","black","textAnchor","fontFamily","propTypes","PropTypes","number","string","SmallCoinStat","amount","rest","size","fs","secondary","c","inline","BetStats","post","earning","maxBet","investments","posts","_id","map","filter","inv","stakedTokens","investor","user","useDispatch","useEffect","getPostInvestments","existingShares","shares","existingStake","bets","users","invText","toFixed","totalShares","computeShares","postRewards","computePostPayout","shareOfRewards","shareOfRewardsPercent","potentialRewards","shareEl","style","top","mb","blue","mt","fdirection","CircleButton","children","onPress","border","minwidth","bradius","bg","white","lh","BetContainer","props","navigation","modalData","postId","Bet","close","earnings","pending","e","entities","find","ee","useState","processingBet","setProcessingBet","title","totalBalance","balance","tokenBalance","lockedTokens","defaultAmount","Math","max","VOTE_COST_RATIO","setAmount","timeLeftTick","payoutTime","time","setTimer","id","setInterval","clearInterval","placeBet","bet","exchageUrl","exchangeLink","power","mr","name","info","align","justify","largeStep","smallStep","pr","spaceBetween","min","tokenEnabled","to","external","target","goToUrl","disabled","object","node","func","Alert","linkSchema","schema","Entity","idAttribute","postSchema","metaPost","userSchema","investmentSchema","updatePostVote","voteObj","UPDATE_POST_INVESTMENTS","undoPostVote","UNDO_POST_INVESTMENT","setInvestments","userId","SET_INVESTMENTS","loadingInvestments","LOADING_INVESTMENTS","setPostInvestments","SET_POST_INVESTMENTS","setUsers","SET_USERS","vote","undo","displayBetPrompt","undoInvest","investment","isComment","parentPost","getInvestments","limit","normalize","setPostsSimple","loadingPostInvestments","LOADING_POST_INVESTMENTS","React","createContext","wallet","coinImage","require","CoinStat","tokens","isOwner","noNumber","showPrice","usdValue","usePrice","ethAddress","connectedBalance","iconSize","NumberStyle","SecondaryText","NumericalValue","imageMargin","sizing","Wrapper","Text","ImageWrapper","spacer","source","bottom","resizeMode","ml","abbreviateNumber","oneOfType","bool","userProps","lineheight","memo","Consumer","defaultData","vertical","horizontal","horizontalOffset","verticalOffset","InfoImage","AbsoluteWrapper","styled","TooltipContainer","ReactTooltip","rebuild","shouldRegister","initTooltip","el","useRef","tooltips","toggleTooltip","forEach","tooltip","desktopOnly","current","measureInWindow","parent","Dimensions","get","setTooltipData","showTooltip","initTooltips","toggle","setupMobileTooltips","View","ref","data-event-off","data-place","position","data-for","data-tip","onLongPress","TOKEN_ADDRESS","DISABLE_PRICE","PriceContext","price","useContext","PriceProvider","useReducer","priceReducer","loading","error","refresh","didCancel","getTokenReserves","tokenPrice","json","ethPrice","bid","fetchData","setTimeout","ethReserve","tokenReserve","usdPrice","div","times","parseFloat","toString","computePrice","priceString","Provider","value","action","Error","shape","handle","image","authProps","isRequired","embeddedUser","tags","array","postDate","instanceOf","Date","link","isAuthenticated","elementTypePropTypeChecker","propName","componentName","isValidElementType","postData","pagerank","currentShares","postCount","payoutShare","topPostShares","payout","rewardFund","TOKEN_DECIMALS","computeUserPayout","status","totalPostShares","estimatedPayout","estimatedPostPayout","earned"],"mappings":"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","file":"post-bet-bet.bundle.js","sourcesContent":["export default __webpack_public_path__ + \"public/img/info.png\";","if (process.env.BROWSER === true) {\n  registerServiceWorker();\n}\n\nfunction registerServiceWorker() {\n  try {\n    navigator.serviceWorker.register('/service-worker.js');\n  } catch (err) {\n    console.log(err); // eslint-disable-line\n  }\n}\n\nexport async function initPushNotifications() {\n  try {\n    const registration = await navigator.serviceWorker.ready;\n    const subscription = await registration.pushManager.getSubscription();\n    if (subscription) return subscription;\n\n    const vapidPublicKey = process.env.VAPID_PUBLIC_KEY;\n    const convertedVapidKey = urlBase64ToUint8Array(vapidPublicKey);\n    return registration.pushManager.subscribe({\n      userVisibleOnly: true,\n      applicationServerKey: convertedVapidKey\n    });\n  } catch (err) {\n    console.log(err); // eslint-disable-line\n    return null;\n  }\n}\n\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = '='.repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding).replace(/-/g, '+').replace(/_/g, '/');\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n","import * as types from 'core/actionTypes';\nimport * as errorActions from 'modules/ui/error.actions';\nimport { api, storage } from 'app/utils';\nimport { initPushNotifications } from 'app/utils/notifications';\nimport { updateNotificationSettings } from 'modules/auth/auth.actions';\nimport {\n  SHOW_DESKTOP_PROMPT_AFTER_DAYS,\n  SHOW_MOBILE_PROMPT_AFTER_DAYS,\n  SHOW_BET_PROMPT_AFTER_DAYS\n} from './notificationTimes';\n\nlet PushNotification;\nif (process.env.WEB !== 'true') {\n  PushNotification = require('react-native-push-notification');\n}\n\nconst apiServer = `${process.env.API_SERVER}/api/notification`;\n\nconst reqOptions = tk => ({\n  credentials: 'include',\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    Authorization: `Bearer ${tk}`\n  }\n});\n\nexport function setActivity(data, type, index) {\n  return {\n    type: types.SET_ACTIVITY,\n    payload: {\n      data,\n      type,\n      index\n    }\n  };\n}\n\nexport function resetActivity(data) {\n  return {\n    type: 'RESET_ACTIVITY',\n    payload: data\n  };\n}\n\nexport function clearCount() {\n  return {\n    type: 'CLEAR_COUNT'\n  };\n}\n\nexport function setCount(data) {\n  return {\n    type: types.SET_COUNT,\n    payload: data\n  };\n}\n\nexport function getActivity(skip) {\n  return async dispatch => {\n    try {\n      const type = 'personal';\n      const res = await dispatch(\n        api.request({\n          method: 'GET',\n          endpoint: 'notification',\n          path: '/',\n          auth: true,\n          query: { skip }\n        })\n      );\n      dispatch(setActivity(res, type, skip));\n      dispatch(errorActions.setError('activity', false));\n    } catch (err) {\n      errorActions.setError('activity', true, err.message);\n    }\n  };\n}\n\nexport function markRead() {\n  return dispatch =>\n    storage\n      .getToken()\n      .then(tk =>\n        fetch(`${apiServer}/markread`, {\n          ...reqOptions(tk),\n          method: 'PUT'\n        })\n      )\n      .then(() => {\n        dispatch(clearCount());\n      })\n      .catch(null);\n}\n\nexport function createNotification(obj) {\n  return () =>\n    storage\n      .getToken()\n      .then(tk =>\n        fetch(`${apiServer}`, {\n          ...reqOptions(tk),\n          method: 'POST',\n          body: JSON.stringify(obj)\n        })\n      )\n      .catch(null);\n}\n\nexport function getNotificationCount() {\n  return async dispatch => {\n    try {\n      const res = await dispatch(\n        api.request({\n          method: 'GET',\n          endpoint: 'notification',\n          path: '/unread',\n          auth: true\n        })\n      );\n      dispatch(setCount(res.unread));\n    } catch (err) {} // eslint-disable-line\n  };\n}\n\nexport function showBannerPrompt(promptType, promptProps) {\n  return {\n    type: types.SHOW_BANNER_PROMPT,\n    payload: {\n      promptType,\n      promptProps\n    }\n  };\n}\n\nexport function hideBannerPrompt(notification) {\n  return {\n    type: types.HIDE_BANNER_PROMPT,\n    payload: notification\n  };\n}\n\nexport function enableDesktopNotifications() {\n  return async dispatch => {\n    try {\n      const subscription = await initPushNotifications();\n      dispatch(\n        updateNotificationSettings({ desktop: { all: true } }, subscription.toJSON())\n      );\n      dispatch(hideBannerPrompt());\n    } catch (err) {\n      console.log(err); // eslint-disable-line\n    }\n  };\n}\n\nexport const showBetPrompt = async dispatch => {\n  const isDismissed = await storage.isDismissed(\n    'betDismissed',\n    SHOW_BET_PROMPT_AFTER_DAYS\n  );\n  if (!isDismissed) return dispatch(showBannerPrompt('bet'));\n  return false;\n};\n\nexport const showPushNotificationPrompt = (promptProps = {}) => async dispatch => {\n  if (process.env.BROWSER === true) {\n    return handleDesktopPrompt({ dispatch, promptProps });\n  }\n  return handleMobilePrompt({ dispatch, promptProps });\n};\n\nasync function handleDesktopPrompt({ dispatch, promptProps }) {\n  if (\n    Notification &&\n    (Notification.permission === 'granted' || Notification.permission === 'denied')\n  ) {\n    return false;\n  }\n  const isDismissed = await storage.isDismissed(\n    'pushDismissed',\n    SHOW_DESKTOP_PROMPT_AFTER_DAYS\n  );\n  if (isDismissed) return false;\n\n  return dispatch(showBannerPrompt('push', promptProps));\n}\n\nasync function handleMobilePrompt({ dispatch, promptProps }) {\n  if (!PushNotification) return false;\n\n  const permissions = await new Promise((resolve, reject) => {\n    PushNotification.checkPermissions(resp => {\n      if (!resp) return reject();\n      return resolve(resp);\n    });\n  });\n\n  if (permissions.alert) return false;\n\n  const isDismissed = await storage.isDismissed(\n    'pushDismissed',\n    SHOW_MOBILE_PROMPT_AFTER_DAYS\n  );\n  if (isDismissed) return false;\n\n  return dispatch(showBannerPrompt('push', { ...promptProps, isMobile: true }));\n}\n","export const SHOW_BET_PROMPT_AFTER_DAYS = 14;\nexport const SHOW_DESKTOP_PROMPT_AFTER_DAYS = 30;\nexport const SHOW_MOBILE_PROMPT_AFTER_DAYS = 21;\n","import { useSelector } from 'react-redux';\n\nexport const useCommunity = () =>\n  useSelector(state => state.community.communities[state.community.active]);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { colors } from 'styles';\nimport Svg, { Circle, Text as SVGText } from 'react-native-svg';\n\nPieChart.propTypes = {\n  percent: PropTypes.number,\n  color: PropTypes.string,\n  text: PropTypes.string,\n  strokeWidth: PropTypes.number,\n  w: PropTypes.string,\n  h: PropTypes.string\n};\n\nexport function PieChart({ percent, color, text, strokeWidth, w, h }) {\n  const r = 15.91549430918954;\n  const d = 2 * r + strokeWidth;\n  // const deg = 3.6 * percent;\n  return (\n    <Svg height={h || '100%'} width={w || '100%'} viewBox={`0 0 ${d} ${d}`}>\n      {/*      <Line\n        x1=\"50%\"\n        y1=\"50%\"\n        x2=\"50%\"\n        y2=\"0\"\n        style={{ transform: `rotate(${deg}deg)`, transformOrigin: '50% 50%' }}\n        stroke={colors.grey}\n      /> */}\n      <Circle\n        cx={'50%'}\n        cy={'50%'}\n        r={r}\n        fill=\"none\"\n        strokeWidth={strokeWidth}\n        stroke={colors.lightBorder}\n      />\n      <Circle\n        cx={'50%'}\n        cy={'50%'}\n        r={r}\n        fill=\"none\"\n        strokeWidth={strokeWidth}\n        stroke={color}\n        strokeDasharray={`${100 - percent}, ${percent}`}\n        strokeDashoffset={25 + 100 - percent}\n      />\n      {text && (\n        <SVGText\n          fontSize={'10px'}\n          x={'50%'}\n          y={'60%'}\n          fill={colors.black}\n          textAnchor=\"middle\"\n          fontFamily=\"HelveticaNeue-CondensedBold\"\n        >\n          {text}\n        </SVGText>\n      )}\n    </Svg>\n  );\n}\n","export const Circle = 'circle';\nexport const ClipPath = 'clipPath';\nexport const Defs = 'defs';\nexport const Ellipse = 'ellipse';\nexport const G = 'g';\nexport const Image = 'image';\nexport const Line = 'line';\nexport const LinearGradient = 'linearGradient';\nexport const Path = 'path';\nexport const Polygon = 'polygon';\nexport const Polyline = 'polyline';\nexport const RadialGradient = 'radialGradient';\nexport const Rect = 'rect';\nexport const Stop = 'stop';\nexport const Svg = 'svg';\nexport const Symbol = 'symbol';\nexport const Text = 'text';\nexport const TextPath = 'textPath';\nexport const TSpan = 'tspan';\nexport const Use = 'use';\n\nexport default Svg;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CoinStat from 'modules/stats/coinStat.component';\nimport { colors } from 'styles';\n\nSmallCoinStat.propTypes = {\n  amount: PropTypes.number\n};\n\nexport default function SmallCoinStat({ amount, ...rest }) {\n  return (\n    <CoinStat\n      size={1.5}\n      fs={1.5}\n      secondary\n      c={colors.black}\n      inline={1}\n      amount={amount}\n      {...rest}\n    />\n  );\n}\n","import React, { Fragment, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { SmallText, Text, View } from 'modules/styled/uni';\nimport { computeShares } from 'app/utils/post';\nimport { computePostPayout } from 'app/utils/rewards';\nimport { useCommunity } from 'modules/community/community.selectors';\nimport { PieChart } from 'modules/stats/piechart';\nimport { getPostInvestments } from 'modules/post/invest.actions';\nimport { colors } from 'styles';\nimport { abbreviateNumber as toFixed } from 'utils/numbers';\nimport SmallCoinStat from './smallcoinstat';\n\nBetStats.propTypes = {\n  post: PropTypes.object,\n  earning: PropTypes.object,\n  amount: PropTypes.number,\n  maxBet: PropTypes.number\n};\n\nexport default function BetStats({ post, amount, earning, maxBet }) {\n  const community = useCommunity();\n\n  const investments = useSelector(state =>\n    (state.investments.posts[post._id] || [])\n      .map(_id => state.investments.investments[_id])\n      .filter(inv => inv.stakedTokens > 0 && inv.investor !== state.auth.user._id)\n  );\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getPostInvestments(post._id));\n  }, [dispatch, post._id]);\n\n  const existingShares = earning ? earning.shares : 0;\n  const existingStake = earning ? earning.stakedTokens : 0;\n  const bets = investments.length;\n  const users = bets > 1 ? 'users' : 'user';\n  const invText = bets\n    ? `${bets} ${users} bet a total of ${toFixed(\n        post.data.totalShares - existingStake\n      )} coins on this post`\n    : '';\n  // : 'You are the first to bet on this post!';\n\n  const shares = computeShares({ post, stakedTokens: amount });\n  const postRewards = computePostPayout(post.data, community);\n  const shareOfRewards = !bets\n    ? (existingStake + amount) / (maxBet + existingStake)\n    : (shares + existingShares) / (post.data.shares + shares);\n\n  const shareOfRewardsPercent = shareOfRewards * 100;\n  const potentialRewards = postRewards * shareOfRewards;\n  // const showPie = shareOfRewards !== 1;\n\n  const shareEl = (\n    <SmallText inline={1}>\n      {'  '}\n      <Text style={{ top: 2 }} inline={1} mb={-0.5}>\n        <PieChart\n          w={'12px'}\n          h={'12px'}\n          percent={100 - shareOfRewardsPercent}\n          strokeWidth={30}\n          color={colors.blue}\n        />\n      </Text>{' '}\n      {toFixed(shareOfRewardsPercent)}%\n    </SmallText>\n  );\n\n  return (\n    <Fragment>\n      <SmallText>{invText}</SmallText>\n      {potentialRewards > 0 && (\n        <View mt={0.25} fdirection={'row'}>\n          <SmallText inline={1}>\n            Your estimated rewards: <SmallCoinStat amount={potentialRewards} />\n          </SmallText>\n          <SmallText inline={1}>{shareEl} of total</SmallText>\n        </View>\n      )}\n    </Fragment>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { colors } from 'styles';\nimport { LinkFont, HoverButton } from 'modules/styled/uni';\n\nCircleButton.propTypes = {\n  children: PropTypes.node,\n  onPress: PropTypes.func\n};\n\nexport default function CircleButton({ children, onPress }) {\n  return (\n    <HoverButton\n      border={1}\n      w={8}\n      h={8}\n      minwidth={'auto'}\n      bradius={4}\n      bg={colors.white}\n      onPress={onPress}\n    >\n      <LinkFont c={colors.blue} fs={2.5} lh={2.5}>\n        {children}\n      </LinkFont>\n    </HoverButton>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  View,\n  HoverButton,\n  SecondaryText,\n  SmallText,\n  Header\n  // Divider\n} from 'modules/styled/uni';\nimport { timeLeftTick, abbreviateNumber as toFixed } from 'utils/numbers';\nimport { colors } from 'styles';\nimport { VOTE_COST_RATIO } from '@r3l/common';\nimport CoinStat from 'modules/stats/coinStat.component';\nimport { bet } from 'modules/post/invest.actions';\nimport { goToUrl } from 'modules/navigation/navigation.actions';\nimport Tooltip from 'modules/tooltip/tooltip.component';\nimport { exchangeLink, tokenEnabled } from 'modules/wallet/price.context';\nimport ULink from 'modules/navigation/ULink.component';\n// import { NotificationToggle } from 'modules/profile/settings/settings.toggle';\nimport BetStats from './betstats';\nimport CircleButton from './circlebutton';\nimport SmallCoinStat from './smallcoinstat';\n\nexport function BetContainer({ ...props }) {\n  const user = useSelector(state => state.auth.user) || {};\n  const post = useSelector(state => state.posts.posts[state.navigation.modalData.postId]);\n  if (!user || !post) return null;\n  return <Bet user={user} post={post} {...props} />;\n}\n\nBet.propTypes = {\n  user: PropTypes.object,\n  post: PropTypes.object,\n  close: PropTypes.func\n};\n\nfunction Bet({ user, post, close }) {\n  const dispatch = useDispatch();\n  const earning = useSelector(state =>\n    state.earnings.pending\n      .map(e => state.earnings.entities[e])\n      .find(ee => ee.post === post._id)\n  );\n  const [processingBet, setProcessingBet] = useState(false);\n\n  const title = earning ? 'Increase Your Bet' : 'Bet on the Relevance of this Post';\n\n  const totalBalance = user.balance + user.tokenBalance;\n  const maxBet = totalBalance - user.lockedTokens;\n  const defaultAmount = Math.max(maxBet * VOTE_COST_RATIO, 0);\n  const [amount, setAmount] = useState(defaultAmount);\n\n  // const time = getTimestamp(post.data.payoutTime).toLowerCase();\n  const [time, setTimer] = useState(timeLeftTick(post.data.payoutTime));\n\n  useEffect(() => {\n    const id = setInterval(() => setTimer(timeLeftTick(post.data.payoutTime)), 1000);\n    return () => clearInterval(id);\n  }, [post.data.payoutTime, time]);\n\n  if (!user || !post) return null;\n\n  const plusAmount = () =>\n    setAmount(a => {\n      const largeStep = (maxBet - defaultAmount) / 5;\n      const smallStep = defaultAmount / 5;\n      const err = defaultAmount / 100;\n      return a + smallStep <= defaultAmount + err\n        ? a + smallStep\n        : Math.min(a + largeStep, maxBet);\n    });\n\n  const minusAmount = () =>\n    setAmount(a => {\n      const largeStep = (totalBalance - user.lockedTokens - defaultAmount) / 5;\n      const smallStep = defaultAmount / 5;\n      const err = defaultAmount / 100;\n      if (a - smallStep <= 0 + err) return a;\n      return a - largeStep >= defaultAmount - err\n        ? a - largeStep\n        : Math.max(0, a - smallStep);\n    });\n\n  const placeBet = async () => {\n    try {\n      setProcessingBet(true);\n      await dispatch(bet({ postId: post._id, stakedTokens: amount }));\n      setProcessingBet(false);\n      close();\n    } catch (err) {\n      setProcessingBet(false);\n      // console.log(err);\n    }\n  };\n\n  const exchageUrl = exchangeLink();\n\n  const power = (100 * amount) / maxBet;\n\n  const tooltipData = {\n    text:\n      'Posts that get upvoted by lots of users with high Reputation get payouts.\\n\\nBet more coins and bet early in order to win the biggest portion of the payout.'\n  };\n\n  // const renderNoCoin = () => (\n  //   <Overlay flex={1} align={'center'} justify={'center'} bc={'hsla(0,0%, 100%, .9)'}>\n  //     <BodyText>You don't have any Relevant Coins</BodyText>\n  //     <BodyText mt={2}>\n  //       You can get some{' '}\n  //       <ULink to={exchangeLink()} external target=\"_blank\">\n  //         here\n  //       </ULink>\n  //     </BodyText>\n  //   </Overlay>\n  // );\n\n  return (\n    <View>\n      <Header inline={1} mr={2}>\n        {title} <Tooltip inline={1} name={'betInfo'} data={tooltipData} info />\n      </Header>\n\n      <View fdirection={'row'} align={'baseline'}>\n        <SmallText mt={1} mr={1}>\n          Time until payout: {time}\n        </SmallText>\n      </View>\n\n      <View mt={4} fdirection=\"row\" justify=\"space-between\" align={'center'}>\n        <CircleButton onPress={minusAmount}>â€“</CircleButton>\n        <View pr={1}>\n          <CoinStat\n            align={'center'}\n            fs={4.5}\n            lh={4.5}\n            spaceBetween={1}\n            c={colors.black}\n            amount={amount}\n          />\n        </View>\n        <CircleButton onPress={plusAmount}>+</CircleButton>\n      </View>\n      <View mt={2}>\n        <View h={0.5} fdirection={'row'}>\n          <View w={`${power}%`} bg={colors.blue} />\n          <View w={`${100 - power}%`} bg={colors.lightBorder} />\n        </View>\n        <View fdirection=\"row\" justify=\"space-between\">\n          <SecondaryText mt={0.5}>\n            Available Coins: <SmallCoinStat amount={maxBet - amount} />\n          </SecondaryText>\n          {tokenEnabled() && (\n            <ULink inline={1} to={exchageUrl} external target=\"_blank\">\n              <SecondaryText\n                mt={0.5}\n                c={colors.blue}\n                onPress={() => {\n                  dispatch(goToUrl(exchageUrl));\n                }}\n              >\n                Get more coins\n              </SecondaryText>\n            </ULink>\n          )}\n        </View>\n      </View>\n\n      <View mt={3}>\n        <BetStats maxBet={maxBet} post={post} amount={amount} earning={earning} />\n      </View>\n\n      <HoverButton mt={3} onPress={placeBet} disabled={processingBet || !amount}>\n        Bet {toFixed(amount)} Coins\n      </HoverButton>\n\n      {/*      <Divider mt={2} />\n       */}\n\n      <SmallText mt={2}>\n        *You always get your coins back once the betting round ends.\n      </SmallText>\n\n      {/*      <NotificationToggle\n        notification={user.notificationSettings.bet.manual}\n        parent={'bet'}\n        label={'manual'}\n        togglePosition={'right'}\n        DescriptionComponent={SmallText}\n        text={{\n          description: \"Don't like betting? Disable manual bet mode.\"\n        }}\n      /> */}\n    </View>\n  );\n}\n\nexport default BetContainer;\n","import { normalize, schema } from 'normalizr';\nimport {\n  UPDATE_POST_INVESTMENTS,\n  UNDO_POST_INVESTMENT,\n  SET_POST_INVESTMENTS,\n  SET_INVESTMENTS,\n  LOADING_INVESTMENTS,\n  SET_USERS,\n  LOADING_POST_INVESTMENTS\n} from 'core/actionTypes';\nimport { api, alert } from 'app/utils';\nimport { setPostsSimple } from 'modules/post/post.actions';\nimport {\n  showPushNotificationPrompt,\n  showBetPrompt\n} from 'modules/activity/activity.actions';\n\nconst Alert = alert.Alert();\n\nconst linkSchema = new schema.Entity('links', {}, { idAttribute: '_id' });\n\nconst postSchema = new schema.Entity(\n  'posts',\n  { metaPost: linkSchema },\n  { idAttribute: '_id' }\n);\n\nconst userSchema = new schema.Entity('users', {}, { idAttribute: '_id' });\n\nconst investmentSchema = new schema.Entity(\n  'investments',\n  {\n    post: postSchema,\n    investor: userSchema\n  },\n  { idAttribute: '_id' }\n);\n\nexport function updatePostVote(voteObj) {\n  return {\n    type: UPDATE_POST_INVESTMENTS,\n    payload: voteObj\n  };\n}\n\nexport function undoPostVote(post) {\n  return {\n    type: UNDO_POST_INVESTMENT,\n    payload: post\n  };\n}\n\nexport function setInvestments(investments, userId, index) {\n  return {\n    type: SET_INVESTMENTS,\n    payload: {\n      investments,\n      userId,\n      index\n    }\n  };\n}\n\nexport function loadingInvestments() {\n  return {\n    type: LOADING_INVESTMENTS\n  };\n}\n\nexport function setPostInvestments(data, postId, skip) {\n  return {\n    type: SET_POST_INVESTMENTS,\n    payload: {\n      postId,\n      data,\n      index: skip || 0\n    }\n  };\n}\n\nexport function setUsers(users) {\n  return {\n    type: SET_USERS,\n    payload: users\n  };\n}\n\n// optimistic ui\nexport function vote({ amount, post, user, vote: undo, displayBetPrompt }) {\n  return async dispatch => {\n    try {\n      if (undo) dispatch(undoPostVote(post._id));\n      else dispatch(updatePostVote({ post: post._id, amount }));\n      const res = await dispatch(\n        api.request({\n          method: 'POST',\n          endpoint: 'invest',\n          path: '/',\n          body: JSON.stringify({\n            investor: user._id,\n            amount,\n            post\n          })\n        })\n      );\n      if (res.undoInvest) dispatch(undoPostVote(post._id));\n      else dispatch(updatePostVote(res.investment));\n      const isComment = !!post.parentPost;\n      if (amount > 0 && !undo) {\n        const showingPushBanner = await dispatch(\n          showPushNotificationPrompt({\n            type: isComment ? 'upvoteComment' : 'upvotePost'\n          })\n        );\n        if (!showingPushBanner && displayBetPrompt) dispatch(showBetPrompt);\n      }\n      return res;\n    } catch (error) {\n      if (undo) dispatch(updatePostVote({ post: post._id, amount }));\n      else dispatch(undoPostVote(post._id));\n      return Alert.alert(error.message);\n    }\n  };\n}\n\nexport function getInvestments(userId, skip, limit) {\n  return async dispatch => {\n    try {\n      dispatch(loadingInvestments());\n      const res = await dispatch(\n        api.request({\n          method: 'GET',\n          endpoint: 'invest',\n          path: '/' + userId,\n          query: { skip, limit }\n        })\n      );\n      const data = normalize({ investments: res }, { investments: [investmentSchema] });\n      dispatch(setPostsSimple(data));\n      dispatch(setInvestments(data, userId, skip));\n    } catch (err) {\n      // console.log(err);\n    }\n  };\n}\n\nexport function loadingPostInvestments(postId) {\n  return {\n    type: LOADING_POST_INVESTMENTS,\n    payload: postId\n  };\n}\n\nexport function getPostInvestments(postId, limit, skip) {\n  return async dispatch => {\n    try {\n      dispatch(loadingPostInvestments(postId));\n      const res = await dispatch(\n        api.request({\n          method: 'GET',\n          endpoint: 'invest',\n          query: { skip, limit },\n          path: `/post/${postId}`\n        })\n      );\n      const data = normalize({ investments: res }, { investments: [investmentSchema] });\n      dispatch(setUsers(data.entities.users));\n      dispatch(setPostInvestments(data, postId, skip));\n    } catch (err) {\n      // console.warn(err);\n    }\n  };\n}\n\nexport function bet({ postId, stakedTokens }) {\n  return async dispatch => {\n    try {\n      const res = await dispatch(\n        api.request({\n          method: 'POST',\n          endpoint: 'invest',\n          path: '/bet',\n          body: JSON.stringify({\n            postId,\n            stakedTokens\n          })\n        })\n      );\n      return dispatch(updatePostVote(res));\n    } catch (err) {\n      Alert.alert(err.message);\n      throw err;\n    }\n  };\n}\n","import React from 'react';\n// Make sure the shape of the default value passed to\n// createContext matches the shape that the consumers expect!\nexport default React.createContext({\n  wallet: null\n  // toggleTheme: () => {},\n});\n","import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\nimport Eth from 'modules/web_ethTools/eth.context';\nimport { abbreviateNumber } from 'app/utils/numbers';\nimport { userProps } from 'app/utils/propValidation';\nimport { sizing } from 'app/styles';\nimport {\n  Image,\n  ImageWrapper,\n  NumericalValue,\n  SecondaryText,\n  Text\n} from 'modules/styled/uni';\nimport { usePrice } from 'modules/wallet/price.context';\n\nconst coinImage = require('public/img/relevantcoin.png');\n\nfunction CoinStat(props) {\n  const {\n    user,\n    isOwner,\n    wallet,\n    size,\n    amount,\n    mr,\n    align,\n    noNumber,\n    secondary,\n    fs,\n    lh,\n    inline,\n    c,\n    spaceBetween,\n    showPrice,\n    ...rest\n  } = props;\n\n  let tokens;\n  if (typeof amount === 'number') tokens = amount;\n  else if (user) {\n    tokens = user.balance;\n    if (user.tokenBalance) tokens += user.tokenBalance;\n  }\n\n  const usdValue = usePrice(tokens);\n\n  if (isOwner && user.ethAddress && user.ethAddress[0] && wallet.connectedBalance) {\n    tokens = wallet.connectedBalance + user.balance;\n  }\n  const iconSize = typeof size === 'number' ? size : 3;\n  const NumberStyle = secondary ? SecondaryText : NumericalValue;\n  const imageMargin = align === 'center' ? 0 : sizing(-1, 'px');\n  const Wrapper = inline ? Text : ImageWrapper;\n\n  let spacer = 0;\n  if (!inline && iconSize) {\n    spacer = iconSize / 4;\n  }\n  if (!inline && spaceBetween) {\n    spacer = spaceBetween;\n  }\n\n  return (\n    <Wrapper\n      {...rest}\n      inline={inline ? 1 : 0}\n      mr={typeof mr === 'number' ? mr : inline ? 0 : 1.5}\n      align={align}\n    >\n      <Image\n        inline={inline ? 1 : 0}\n        source={coinImage}\n        h={iconSize * 1}\n        w={iconSize * 1.05}\n        style={{ bottom: imageMargin }}\n        resizeMode=\"contain\"\n      />\n\n      {noNumber ? null : (\n        <NumberStyle ml={spacer} fs={fs} lh={lh} inline={inline ? 1 : 0} c={c}>\n          {inline ? ' ' : ''}\n          {abbreviateNumber(tokens)}\n          {showPrice ? usdValue : ''}\n        </NumberStyle>\n      )}\n    </Wrapper>\n  );\n}\n\nCoinStat.propTypes = {\n  lh: PropTypes.number,\n  inline: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n  secondary: PropTypes.bool,\n  mr: PropTypes.number,\n  fs: PropTypes.number,\n  amount: PropTypes.number,\n  size: PropTypes.number,\n  user: userProps,\n  isOwner: PropTypes.bool,\n  wallet: PropTypes.object,\n  align: PropTypes.string,\n  lineheight: PropTypes.string,\n  c: PropTypes.string,\n  noNumber: PropTypes.bool,\n  spaceBetween: PropTypes.number,\n  showPrice: PropTypes.bool\n};\n\nexport default memo(props => (\n  <Eth.Consumer>{wallet => <CoinStat wallet={wallet} {...props} />}</Eth.Consumer>\n));\n","import { Dimensions } from 'react-native';\nimport { setTooltipData, showTooltip } from 'modules/tooltip/tooltip.actions';\n\nconst defaultData = {\n  vertical: 'top',\n  horizontal: 'right',\n  horizontalOffset: 0,\n  verticalOffset: 10\n};\n\nexport function setupMobileTooltips({ tooltips, dispatch }) {\n  // this is used to programatically trigger toolitps\n  // needs name refactor\n  const initTooltips = () => {\n    tooltips.forEach(tooltip => {\n      if (tooltip.data.desktopOnly) return null;\n      return dispatch(\n        setTooltipData({\n          name: tooltip.name,\n          toggle: () => toggleTooltip(tooltip.name)\n        })\n      );\n    });\n  };\n\n  const toggleTooltip = name => {\n    tooltips.forEach(tooltip => {\n      if (tooltip.data.desktopOnly) return;\n      if (!tooltip.el.current) return;\n      tooltip.el.current.measureInWindow((x, y, w, h) => {\n        const parent = { x, y, w, h };\n        if (x + y + w + h === 0) return;\n        const fullHeight = Dimensions.get('window').height;\n        if (y > fullHeight - 50) return;\n        dispatch(\n          setTooltipData({\n            name: tooltip.name,\n            parent,\n            ...defaultData,\n            data: tooltip.data\n          })\n        );\n        dispatch(showTooltip(name));\n      });\n    });\n  };\n\n  return { initTooltips, toggleTooltip };\n}\n","import React, { useRef, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { View, Image, Text } from 'modules/styled/uni';\nimport styled from 'styled-components/primitives';\nimport { setupMobileTooltips } from 'modules/tooltip/mobile/setupTooltips';\nimport ReactTooltip from 'react-tooltip';\n\nconst InfoImage = require('public/img/info.png');\n\nconst isNative = process.env.WEB !== 'true';\n\nconst AbsoluteWrapper = styled.Text`\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n  z-index: 1;\n`;\n\nTooltipContainer.propTypes = {\n  name: PropTypes.string,\n  data: PropTypes.object,\n  children: PropTypes.object,\n  info: PropTypes.bool,\n  inline: PropTypes.oneOfType([PropTypes.bool, PropTypes.number])\n};\n\nexport default function TooltipContainer({\n  children,\n  name,\n  data,\n  info,\n  inline,\n  ...rest\n}) {\n  useEffect(() => {\n    if (ReactTooltip.rebuild) ReactTooltip.rebuild();\n  }, [data, name, children]);\n\n  useEffect(() => data.shouldRegister && initTooltip(), [\n    data.shouldRegister,\n    initTooltip\n  ]);\n\n  const dispatch = useDispatch();\n  const el = useRef();\n  const { toggleTooltip, initTooltip } = setupMobileTooltips({\n    tooltips: [{ name, el, data }],\n    dispatch\n  });\n\n  const Wrapper = (children && View) || AbsoluteWrapper;\n\n  return info ? (\n    <Text\n      ref={el}\n      // onLongPress={() => toggleTooltip(name)}\n      onPress={data.desktopOnly || !isNative ? null : () => toggleTooltip(name)}\n      inline={inline}\n    >\n      <Image\n        data-event-off=\"click\"\n        data-place={data.position}\n        data-for=\"mainTooltip\"\n        data-tip={JSON.stringify({\n          type: 'TEXT',\n          props: data\n        })}\n        {...rest}\n        source={InfoImage}\n        resizeMode={'contain'}\n        h={1.7}\n        w={1.7}\n        inline={inline}\n        {...rest}\n      />\n    </Text>\n  ) : (\n    <Wrapper\n      ref={el}\n      data-event-off=\"click\"\n      data-place={data.position}\n      data-for=\"mainTooltip\"\n      data-tip={JSON.stringify({\n        type: 'TEXT',\n        props: data\n      })}\n      onLongPress={() => toggleTooltip(name)}\n      onPress={data.desktopOnly || !isNative ? null : () => toggleTooltip(name)}\n    >\n      {children}\n    </Wrapper>\n  );\n}\n","import React, { useReducer, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { getTokenReserves } from '@uniswap/sdk';\nimport { abbreviateNumber } from 'utils/numbers';\n\nif (process.env.WEB !== 'true') {\n  require('../../publicenv');\n}\n\nconst { TOKEN_ADDRESS, DISABLE_PRICE } = process.env;\nconst UPDATE_INTERVAL = 1 * 60 * 1000;\n\nexport const PriceContext = React.createContext(0);\n\nexport function exchangeLink() {\n  return `https://uniswap.exchange/swap?theme=dark&outputCurrency=${TOKEN_ADDRESS}`;\n}\n\nexport function tokenEnabled() {\n  return !!TOKEN_ADDRESS;\n}\n\nexport function usePrice(amount, type) {\n  const { price } = useContext(PriceContext);\n  if (!price) return '';\n  if (type === 'number') return abbreviateNumber(price * amount);\n  return ` ($${abbreviateNumber(price * amount, 2)})`;\n}\n\nPriceProvider.propTypes = {\n  children: PropTypes.node\n};\n\nexport default function PriceProvider({ children }) {\n  const [state, dispatch] = useReducer(priceReducer, {\n    loading: false,\n    error: false,\n    data: null,\n    refresh: 0\n  });\n\n  useEffect(() => {\n    let didCancel = false;\n    const fetchData = async () => {\n      dispatch({ type: 'FETCH_PRICE_INIT' });\n      if (!TOKEN_ADDRESS || DISABLE_PRICE) return;\n      try {\n        const tokenPrice = await getTokenReserves(TOKEN_ADDRESS);\n        const res = await fetch('https://api.infura.io/v1/ticker/ethusd');\n        const ethPrice = await res.json();\n\n        if (!didCancel) {\n          dispatch({\n            type: 'FETCH_PRICE_SUCCESS',\n            payload: { ...tokenPrice, ethPrice: ethPrice.bid }\n          });\n        }\n      } catch (err) {\n        if (!didCancel) {\n          dispatch({ type: 'FETCH_PRICE_ERROR', payload: err });\n        }\n      }\n    };\n    fetchData();\n\n    setTimeout(() => {\n      dispatch({ type: 'REFRESH_PRICE' });\n    }, UPDATE_INTERVAL);\n\n    return () => {\n      didCancel = true;\n    };\n  }, [state.refresh]);\n\n  const price = computePrice(state.data);\n  const priceString = `($${abbreviateNumber(price, 2)})`;\n\n  return (\n    <PriceContext.Provider value={{ price, priceString }}>\n      {children}\n    </PriceContext.Provider>\n  );\n}\n\nconst priceReducer = (state, action) => {\n  switch (action.type) {\n    case 'REFRESH_PRICE':\n      return {\n        ...state,\n        refresh: state.refresh + 1\n      };\n    case 'FETCH_PRICE_INIT':\n      return {\n        ...state,\n        loading: true,\n        error: false\n      };\n    case 'FETCH_PRICE_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        error: false,\n        data: action.payload\n      };\n    case 'FETCH_PRICE_ERROR':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload\n      };\n    default:\n      throw new Error();\n  }\n};\n\nfunction computePrice(data) {\n  if (!data) return null;\n  const { ethReserve, tokenReserve, ethPrice } = data;\n  if (!ethReserve || !tokenReserve) return null;\n  const priceInEth = ethReserve.amount.div(tokenReserve.amount);\n  const usdPrice = priceInEth.times(ethPrice);\n  return parseFloat(usdPrice.toString());\n}\n","import PropTypes from 'prop-types';\nimport { isValidElementType } from 'react-is';\n\nexport const userProps = PropTypes.shape({\n  handle: PropTypes.string,\n  balance: PropTypes.number,\n  image: PropTypes.string,\n  name: PropTypes.string\n  // relevance: // TODO shape or null\n});\n\nexport const postProps = PropTypes.shape({\n  _id: PropTypes.string.isRequired, // TODO\n  user: PropTypes.string.isRequired,\n  title: PropTypes.string,\n  embeddedUser: PropTypes.object, // userProp?\n  tags: PropTypes.array,\n  body: PropTypes.string,\n  postDate: PropTypes.instanceOf(Date),\n  data: PropTypes.object, // TODO shape or null\n  link: PropTypes.object, // TODO shape or null\n  parentPost: PropTypes.number,\n  type: PropTypes.string\n});\n\nexport const authProps = PropTypes.shape({\n  isAuthenticated: PropTypes.bool,\n  user: userProps,\n  community: PropTypes.string\n});\n\n// eslint-disable-next-line consistent-return\nexport function elementTypePropTypeChecker(props, propName, componentName) {\n  if (props[propName] && !isValidElementType(props[propName])) {\n    return new Error(\n      `Invalid prop '${propName}' supplied to '${componentName}': the prop is not a valid React component`\n    );\n  }\n}\n","import { TOKEN_DECIMALS } from '@r3l/common';\n\nexport function computePostPayout(postData, community) {\n  if (!community || !postData || postData.parentPost) return null;\n  if (postData.pagerank < community.currentShares / (community.postCount || 1)) {\n    return 0;\n  }\n  postData.payoutShare =\n    postData.pagerank / (community.topPostShares + postData.pagerank || 1);\n  postData.payout = community.rewardFund * postData.payoutShare;\n  return postData.payout / TOKEN_DECIMALS;\n}\n\nexport function computeUserPayout(earning) {\n  if (earning.status === 'pending') {\n    if (earning.totalPostShares === 0) return 0;\n    let estimatedPayout = earning.estimatedPostPayout;\n    if (estimatedPayout > 1e8) estimatedPayout /= TOKEN_DECIMALS;\n    const payout = (estimatedPayout * earning.shares) / earning.totalPostShares;\n    return payout;\n  }\n  if (earning.earned || earning.status === 'paidout') return earning.earned;\n  return 0;\n}\n"],"sourceRoot":""}