{"version":3,"sources":["webpack:///./public/img/icons/upvoteActive.png","webpack:///./src/modules/animation/vote.component.js","webpack:///./src/modules/animation/upvoteNumber.component.js","webpack:///./src/modules/animation/upvoteAnimation.component.js"],"names":["ICONS","upvote","size","icon","require","bet","Vote","props","context","state","position","Animated","Value","this","parent","x","y","ENDX","Math","random","interpolate","inputRange","outputRange","opacity","extrapolate","rotateAnimation","scale","i","specialKey","r","timing","toValue","delay","duration","useNativeDriver","start","destroy","horizontal","type","img","Image","resizeMode","style","width","height","source","View","key","animatedElement","left","w","transform","translateX","translateY","rotate","Component","PropTypes","bool","object","number","func","string","VoteNumber","amount","element","c","colors","green","HANDLE_ANIMATIONS","Container","styled","isNative","UpvoteAnimation","useSelector","animation","currentType","includes","index","useState","voteEls","setVoteEls","numEls","setNumEls","useEffect","Array","keys","coinKey","els","slice","pointerEvents","map"],"mappings":"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","file":"animation-upvoteAnimation-component.bundle.js","sourcesContent":["export default __webpack_public_path__ + \"public/img/icons/upvoteActive.png\";","import React, { Component } from 'react';\nimport { Animated, Image } from 'react-native';\nimport PropTypes from 'prop-types';\nimport { animatedElement } from 'app/styles/layout';\n\nconst ENDY = 300;\n\nconst ICONS = {\n  upvote: { size: 28, icon: require('public/img/icons/upvoteActive.png') },\n  bet: { size: 18, icon: require('public/img/relevantcoin.png') }\n};\n\nclass Vote extends Component {\n  static propTypes = {\n    horizontal: PropTypes.bool,\n    parent: PropTypes.object,\n    specialKey: PropTypes.number,\n    destroy: PropTypes.func,\n    type: PropTypes.string\n  };\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      position: new Animated.Value(0)\n    };\n  }\n\n  componentWillMount() {\n    const { x, y } = this.props.parent;\n    const ENDX = Math.random() * 50;\n\n    this.y = this.state.position.interpolate({\n      inputRange: [0, 1],\n      outputRange: [y, y - ENDY]\n      // easing: Easing.in(Easing.ease)\n    });\n\n    this.x = this.state.position.interpolate({\n      inputRange: [0, 0.5 * Math.random(), 1],\n      outputRange: [x, x + ENDX / 2, x + ENDX]\n      // easing: Easing.out(Easing.ease)\n    });\n\n    this.opacity = this.state.position.interpolate({\n      inputRange: [0.7, 1],\n      outputRange: [1, 0],\n      extrapolate: 'clamp'\n    });\n\n    this.rotateAnimation = this.state.position.interpolate({\n      inputRange: [0, 1 / 4, 1 / 3, 1 / 2, 1],\n      outputRange: ['0deg', '-2deg', '0deg', '2deg', '0deg']\n    });\n\n    this.scale = this.state.position.interpolate({\n      inputRange: [0, 0.2, 0.3, 1],\n      outputRange: [0, 1.2, 1, 1.5],\n      extrapolate: 'clamp'\n    });\n  }\n\n  componentDidMount() {\n    const i = this.props.specialKey;\n    const r = Math.random();\n\n    Animated.timing(this.state.position, {\n      toValue: 1,\n      delay: i * (75 + r * 50),\n      duration: 1000,\n      useNativeDriver: true\n    }).start(() => this.props.destroy(i));\n  }\n\n  render() {\n    const { specialKey, horizontal, parent, type } = this.props;\n    const { icon, size } = ICONS[type];\n    const img = (\n      <Image resizeMode={'contain'} style={{ width: size, height: size }} source={icon} />\n    );\n\n    return (\n      <Animated.View\n        key={specialKey}\n        style={[\n          { ...animatedElement },\n          {\n            left: horizontal ? 0 : parent.w / 2,\n            transform: [\n              { translateX: this.x },\n              { translateY: this.y },\n              { scale: this.scale },\n              { rotate: this.rotateAnimation }\n            ],\n            opacity: this.opacity\n          }\n        ]}\n      >\n        {img}\n      </Animated.View>\n    );\n  }\n}\n\nexport default Vote;\n","import React, { Component } from 'react';\nimport { Animated } from 'react-native';\nimport PropTypes from 'prop-types';\nimport { animatedElement } from 'app/styles/layout';\nimport { colors } from 'app/styles';\nimport { Title } from 'modules/styled/uni';\n\nconst ENDY = 100;\n\nclass VoteNumber extends Component {\n  static propTypes = {\n    parent: PropTypes.object,\n    specialKey: PropTypes.number,\n    amount: PropTypes.number,\n    destroy: PropTypes.func,\n    horizontal: PropTypes.bool\n  };\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      position: new Animated.Value(0)\n    };\n  }\n\n  componentWillMount() {\n    const { x, y } = this.props.parent;\n    const ENDX = (Math.random() - 0.5) * 20;\n\n    this.y = this.state.position.interpolate({\n      inputRange: [0, 1],\n      outputRange: [y + 10, y - ENDY]\n    });\n\n    this.x = this.state.position.interpolate({\n      inputRange: [0, 0.05, 0.5, 1],\n      outputRange: [x - 15, x, x + ENDX / 2, x + ENDX]\n    });\n\n    this.opacity = this.state.position.interpolate({\n      inputRange: [0.7, 1],\n      outputRange: [1, 0],\n      extrapolate: 'clamp'\n    });\n\n    this.rotateAnimation = this.state.position.interpolate({\n      inputRange: [0, 1 / 4, 1 / 3, 1 / 2, 1],\n      outputRange: ['0deg', '-2deg', '0deg', '2deg', '0deg']\n    });\n\n    this.scale = this.state.position.interpolate({\n      inputRange: [0, 0.05, 0.1, 0.9, 0.95, 1],\n      outputRange: [0, 1.4, 1, 1, 1.2, 0]\n    });\n  }\n\n  componentDidMount() {\n    const { amount } = this.props;\n    const i = this.props.specialKey;\n    const r = Math.random();\n\n    Animated.timing(this.state.position, {\n      toValue: 1,\n      delay: r * 30 + (i * 100 * 10) / amount,\n      duration: 2000,\n      useNativeDriver: true\n    }).start(() => this.props.destroy(null, i));\n  }\n\n  render() {\n    const { amount, parent, horizontal } = this.props;\n    const { w } = parent;\n    const { specialKey } = this.props;\n    const element = <Title c={colors.green}>+{amount}</Title>;\n\n    return (\n      <Animated.View\n        key={specialKey}\n        style={[\n          { ...animatedElement },\n          {\n            left: horizontal ? 20 : (w * 2) / 3,\n            transform: [\n              { translateX: this.x },\n              { translateY: this.y },\n              { scale: this.scale }\n            ],\n            opacity: this.opacity\n          }\n        ]}\n      >\n        {element}\n      </Animated.View>\n    );\n  }\n}\n\nexport default VoteNumber;\n","import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport styled from 'styled-components/primitives';\nimport { isNative } from 'styles';\nimport Vote from './vote.component';\nimport VoteNumber from './upvoteNumber.component';\n\nconst HANDLE_ANIMATIONS = ['upvote', 'bet'];\n\nconst Container = styled.View`\n  position: ${isNative ? 'absolute' : 'fixed'};\n  z-index: 10000;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n`;\n\nexport default function UpvoteAnimation() {\n  const type = useSelector(state => state.animation.currentType);\n  const { index, parent, horizontal, amount } = useSelector(state =>\n    HANDLE_ANIMATIONS.includes(type) ? state.animation[type] : {}\n  );\n\n  const [voteEls, setVoteEls] = useState([]);\n  const [numEls, setNumEls] = useState([]);\n\n  useEffect(() => {\n    function initAnimation() {\n      if (!parent) return;\n      setVoteEls([...Array(10).keys()]);\n      if (!amount) return;\n      setNumEls([...Array(1).keys()]);\n    }\n    initAnimation();\n\n    return () => {\n      setVoteEls([]);\n      setNumEls([]);\n    };\n  }, [index, parent, amount]);\n\n  if (!HANDLE_ANIMATIONS.includes(type)) return null;\n\n  function destroy(key, coinKey) {\n    if (typeof key === 'number') {\n      setVoteEls(els => [...els.slice(0, key), ...els.slice(key + 1)]);\n    }\n    if (typeof coinKey === 'number') {\n      setNumEls(els => [...els.slice(0, coinKey), ...els.slice(coinKey + 1)]);\n    }\n  }\n\n  return (\n    <Container pointerEvents={'none'}>\n      {voteEls.map(i => (\n        <Vote\n          type={type}\n          horizontal={horizontal}\n          destroy={destroy}\n          parent={parent}\n          key={i}\n          specialKey={i}\n        />\n      ))}\n      {numEls.map(i => (\n        <VoteNumber\n          destroy={destroy}\n          parent={parent}\n          amount={amount}\n          key={i}\n          specialKey={i}\n          horizontal={horizontal}\n        />\n      ))}\n    </Container>\n  );\n}\n"],"sourceRoot":""}