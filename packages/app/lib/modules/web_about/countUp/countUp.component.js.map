{"version":3,"sources":["../../../../src/modules/web_about/countUp/countUp.component.js"],"names":["BOX_HEIGHT","animationParams","good","relevant","active","firingRate","parallax","speed","thumb","bad","off","marqueeOffTime","marqueeAdvanceTime","CountUp","mode","headline","score","highIndex","lowIndex","marquee","thumbTiming","delay","duration","width","global","window","innerWidth","clearTimeout","timeout","removeEventListener","advance","addEventListener","props","high","low","type","state","length","currentScore","setState","setTimeout","pause","tween","reset","color","handleMeasurement","bind","handleFinished","Component","PropTypes","array","highScore","lowScore","string"],"mappings":"y/BAAA,qDACA,6DACA,qCAEA,yCAEA,+DACA,sEACA,0C,4mDAEA,GAAMA,CAAAA,UAAU,CAAG,EAAnB,CAEA,GAAMC,CAAAA,eAAe,CAAG,CACtBC,IAAI,CAAE,CACJC,QAAQ,CAAE,CACRC,MAAM,CAAE,IADA,CAERC,UAAU,CAAE,GAFJ,CAGRC,QAAQ,CAAE,GAHF,CAIRC,KAAK,CAAE,CAJC,CADN,CAOJC,KAAK,CAAE,CACLJ,MAAM,CAAE,IADH,CAELC,UAAU,CAAE,GAFP,CAGLC,QAAQ,CAAE,GAHL,CAILC,KAAK,CAAE,IAJF,CAPH,CADgB,CAetBE,GAAG,CAAE,CACHN,QAAQ,CAAE,CACRC,MAAM,CAAE,IADA,CAERC,UAAU,CAAE,GAFJ,CAGRC,QAAQ,CAAE,GAHF,CAIRC,KAAK,CAAE,CAJC,CADP,CAOHC,KAAK,CAAE,CACLJ,MAAM,CAAE,IADH,CAELC,UAAU,CAAE,EAFP,CAGLC,QAAQ,CAAE,GAHL,CAILC,KAAK,CAAE,GAJF,CAPJ,CAfiB,CA6BtBG,GAAG,CAAE,CACHN,MAAM,CAAE,KADL,CAEHC,UAAU,CAAE,CAFT,CAGHC,QAAQ,CAAE,CAHP,CAIHC,KAAK,CAAE,CAJJ,CA7BiB,CAAxB,CAqCA,GAAMI,CAAAA,cAAc,CAAG,IAAvB,CACA,GAAMC,CAAAA,kBAAkB,CAAG,IAA3B,C,GAEqBC,CAAAA,O,sZAUX,CACNC,IAAI,CAAE,KADA,CAENC,QAAQ,CAAE,EAFJ,CAGNC,KAAK,CAAE,CAHD,CAINC,SAAS,CAAE,CAAC,CAJN,CAKNC,QAAQ,CAAE,CAAC,CALL,CAMNC,OAAO,CAAElB,eAAe,CAACS,GANnB,CAONU,WAAW,CAAE,CAAEC,KAAK,CAAE,CAAT,CAAYC,QAAQ,CAAE,IAAtB,CAPP,CAQNC,KAAK,CAAEC,MAAM,CAACC,MAAP,CAAgBA,MAAM,CAACC,UAAP,CAAoB,CAApC,CAAwC,CARzC,C,kFAeA,UAAM,CACZC,YAAY,CAAC,MAAKC,OAAN,CAAZ,CACAH,MAAM,CAACI,mBAAP,CAA2B,OAA3B,CAAoC,MAAKC,OAAzC,EACAL,MAAM,CAACM,gBAAP,CAAwB,OAAxB,CAAiC,MAAKD,OAAtC,EACD,C,oFAES,UAAM,iBACc,MAAKE,KADnB,CACNC,IADM,aACNA,IADM,CACAC,GADA,aACAA,GADA,CACKC,IADL,aACKA,IADL,iBAEsB,MAAKC,KAF3B,CAERtB,IAFQ,aAERA,IAFQ,CAEFG,SAFE,aAEFA,SAFE,CAESC,QAFT,aAESA,QAFT,CAGd,GAAIH,CAAAA,QAAJ,CACA,GAAII,CAAAA,OAAJ,CACA,GAAIH,CAAAA,KAAJ,CACAF,IAAI,CAAG,CAACA,IAAR,CACA,GAAIA,IAAJ,CAAU,CACRG,SAAS,EAAI,CAAb,CACAF,QAAQ,CAAGkB,IAAI,CAAChB,SAAS,CAAGgB,IAAI,CAACI,MAAlB,CAAf,CACArB,KAAK,CAAG,GAAR,CACAG,OAAO,kBAAQlB,eAAe,CAACQ,GAAhB,CAAoB0B,IAApB,CAAR,CAAP,CACD,CALD,IAKO,CACLjB,QAAQ,EAAI,CAAZ,CACAH,QAAQ,CAAGmB,GAAG,CAAChB,QAAQ,CAAGgB,GAAG,CAACG,MAAhB,CAAd,CACArB,KAAK,CAAG,CAAC,GAAT,CACAG,OAAO,kBAAQlB,eAAe,CAACC,IAAhB,CAAqBiC,IAArB,CAAR,CAAP,CACD,CAED,GAAMG,CAAAA,YAAY,CAAG,CAArB,CAEA,MAAKC,QAAL,CAAc,CACZzB,IAAI,CAAJA,IADY,CAEZC,QAAQ,CAARA,QAFY,CAGZC,KAAK,CAALA,KAHY,CAIZsB,YAAY,CAAZA,YAJY,CAKZrB,SAAS,CAATA,SALY,CAMZC,QAAQ,CAARA,QANY,CAOZC,OAAO,CAAPA,OAPY,CAQZC,WAAW,CAAE,CACXC,KAAK,CAAEF,OAAO,CAACZ,KAAR,CAAgB,MAAK6B,KAAL,CAAWb,KADvB,CAEXD,QAAQ,CAAE,IAFC,CARD,CAAd,EAcA,MAAKM,OAAL,CAAeY,UAAU,CAAC,UAAM,CAC9BrB,OAAO,CAACf,MAAR,CAAiB,KAAjB,CACA,MAAKmC,QAAL,CAAc,CAAEpB,OAAO,CAAElB,eAAe,CAACS,GAA3B,CAAd,EACA,MAAKkB,OAAL,CAAeY,UAAU,CAAC,UAAM,CAC9B,MAAKV,OAAL,GACD,CAFwB,CAEtBlB,kBAFsB,CAAzB,CAGD,CANwB,CAMtBD,cANsB,CAAzB,CAOD,C,8GApDmB,CAClBc,MAAM,CAACM,gBAAP,CAAwB,MAAxB,CAAgC,KAAKU,KAArC,EACD,C,4DAoDiBlB,K,CAAO,iBACvB,KAAKgB,QAAL,CAAc,CAAEhB,KAAK,CAALA,KAAF,CAAd,CAAyB,iBAAM,CAAA,MAAI,CAACO,OAAL,EAAN,EAAzB,EACD,C,sDAEcd,K,CAAO,CACpB,KAAKuB,QAAL,CAAc,CAAED,YAAY,CAAE,KAAKF,KAAL,CAAWE,YAAX,CAA0BtB,KAA1C,CAAd,EACD,C,mEAEsB,CACrB0B,aAAMC,KAAN,GACAhB,YAAY,CAAC,KAAKC,OAAN,CAAZ,CACAH,MAAM,CAACI,mBAAP,CAA2B,MAA3B,CAAmC,KAAKY,KAAxC,EACAhB,MAAM,CAACI,mBAAP,CAA2B,OAA3B,CAAoC,KAAKC,OAAzC,EACD,C,uCAEQ,kBACiB,KAAKE,KADtB,CACCY,KADD,cACCA,KADD,CACQT,IADR,cACQA,IADR,kBAEwD,KAAKC,KAF7D,CAECrB,QAFD,cAECA,QAFD,CAEWD,IAFX,cAEWA,IAFX,CAEiBwB,YAFjB,cAEiBA,YAFjB,CAE+BnB,OAF/B,cAE+BA,OAF/B,CAEwCC,WAFxC,cAEwCA,WAFxC,CAGP,MACE,8BAAC,yBAAD,kEACE,6BAAC,iBAAD,wBACE,MAAM,CAAEpB,UADV,CAEE,IAAI,CAAEmC,IAFR,CAGE,IAAI,CAAErB,IAHR,CAIE,SAAS,CAAE,KAAK+B,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAJb,CAKE,UAAU,CAAE,KAAKC,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CALd,EAMM3B,OANN,mEADF,CASE,6BAAC,iBAAD,EACE,MAAM,CAAEnB,UADV,CAEE,IAAI,CAAEmC,IAFR,CAGE,KAAK,CAAES,KAHT,CAIE,KAAK,CAAEN,YAJT,CAKE,QAAQ,CAAEvB,QALZ,CAME,WAAW,CAAEK,WANf,iEAQGe,IAAI,GAAK,OAAT,CACC,6BAAC,kBAAD,wBAAU,KAAK,CAAEG,YAAjB,EAAmClB,WAAnC,oEADD,CAGC,6BAAC,gBAAD,wBAAQ,KAAK,CAAEkB,YAAf,EAAiClB,WAAjC,oEAXJ,CATF,CAuBE,6BAAC,sBAAD,EAAe,IAAI,CAAE,CAAC,CAAD,CAAI,IAAJ,CAArB,CAAgC,CAAC,CAAE,CAAC,MAAD,CAAS,CAAT,CAAnC,iEAvBF,CADF,CA2BD,C,qBAxHkC4B,gB,uDAAhBnC,O,aACA,CACjBoB,IAAI,CAAEgB,mBAAUC,KADC,CAEjBC,SAAS,CAAEF,mBAAUC,KAFJ,CAGjBhB,GAAG,CAAEe,mBAAUC,KAHE,CAIjBE,QAAQ,CAAEH,mBAAUC,KAJH,CAKjBN,KAAK,CAAEK,mBAAUI,MALA,CAMjBlB,IAAI,CAAEc,mBAAUI,MANC,C","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { tween } from 'app/utils';\n\nimport { CountUpContainer, CountUpSpacer } from './countUp.styles';\n\nimport CountUpBox from './countUp.box';\nimport AnimatedEl from './countUp.animatedEl';\nimport { BigThumb, Arrows } from './countUp.images';\n\nconst BOX_HEIGHT = 26;\n\nconst animationParams = {\n  good: {\n    relevant: {\n      active: true,\n      firingRate: 100,\n      parallax: 1.3,\n      speed: 5\n    },\n    thumb: {\n      active: true,\n      firingRate: 340,\n      parallax: 1.1,\n      speed: 3.69\n    }\n  },\n  bad: {\n    relevant: {\n      active: true,\n      firingRate: 300,\n      parallax: 1.3,\n      speed: 5\n    },\n    thumb: {\n      active: true,\n      firingRate: 20,\n      parallax: 1.3,\n      speed: 0.8\n    }\n  },\n  off: {\n    active: false,\n    firingRate: 0,\n    parallax: 0,\n    speed: 0\n  }\n};\n\nconst marqueeOffTime = 2000;\nconst marqueeAdvanceTime = 2000;\n\nexport default class CountUp extends Component {\n  static propTypes = {\n    high: PropTypes.array,\n    highScore: PropTypes.array,\n    low: PropTypes.array,\n    lowScore: PropTypes.array,\n    color: PropTypes.string,\n    type: PropTypes.string\n  };\n\n  state = {\n    mode: false,\n    headline: '',\n    score: 0,\n    highIndex: -1,\n    lowIndex: -1,\n    marquee: animationParams.off,\n    thumbTiming: { delay: 0, duration: 2800 },\n    width: global.window ? window.innerWidth / 3 : 0\n  };\n\n  componentDidMount() {\n    window.addEventListener('blur', this.pause);\n  }\n\n  pause = () => {\n    clearTimeout(this.timeout);\n    window.removeEventListener('focus', this.advance);\n    window.addEventListener('focus', this.advance);\n  };\n\n  advance = () => {\n    const { high, low, type } = this.props;\n    let { mode, highIndex, lowIndex } = this.state;\n    let headline;\n    let marquee;\n    let score;\n    mode = !mode;\n    if (mode) {\n      highIndex += 1;\n      headline = high[highIndex % high.length];\n      score = 100;\n      marquee = { ...animationParams.bad[type] };\n    } else {\n      lowIndex += 1;\n      headline = low[lowIndex % low.length];\n      score = -100;\n      marquee = { ...animationParams.good[type] };\n    }\n\n    const currentScore = 0;\n\n    this.setState({\n      mode,\n      headline,\n      score,\n      currentScore,\n      highIndex,\n      lowIndex,\n      marquee,\n      thumbTiming: {\n        delay: marquee.speed * this.state.width,\n        duration: 1950\n      }\n    });\n\n    this.timeout = setTimeout(() => {\n      marquee.active = false;\n      this.setState({ marquee: animationParams.off });\n      this.timeout = setTimeout(() => {\n        this.advance();\n      }, marqueeAdvanceTime);\n    }, marqueeOffTime);\n  };\n\n  handleMeasurement(width) {\n    this.setState({ width }, () => this.advance());\n  }\n\n  handleFinished(score) {\n    this.setState({ currentScore: this.state.currentScore + score });\n  }\n\n  componentWillUnmount() {\n    tween.reset();\n    clearTimeout(this.timeout);\n    window.removeEventListener('blur', this.pause);\n    window.removeEventListener('focus', this.advance);\n  }\n\n  render() {\n    const { color, type } = this.props;\n    const { headline, mode, currentScore, marquee, thumbTiming } = this.state;\n    return (\n      <CountUpContainer>\n        <AnimatedEl\n          height={BOX_HEIGHT}\n          type={type}\n          mode={mode}\n          onMeasure={this.handleMeasurement.bind(this)}\n          onFinished={this.handleFinished.bind(this)}\n          {...marquee}\n        />\n        <CountUpBox\n          height={BOX_HEIGHT}\n          type={type}\n          color={color}\n          score={currentScore}\n          headline={headline}\n          thumbTiming={thumbTiming}\n        >\n          {type === 'thumb' ? (\n            <BigThumb score={currentScore} {...thumbTiming} />\n          ) : (\n            <Arrows score={currentScore} {...thumbTiming} />\n          )}\n        </CountUpBox>\n        <CountUpSpacer flex={[1, null]} w={['auto', 2]} />\n      </CountUpContainer>\n    );\n  }\n}\n"],"file":"countUp.component.js"}