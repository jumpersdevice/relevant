{"version":3,"sources":["../../../../src/modules/admin/web/flagged.component.js"],"names":["Flagged","props","actions","getFlaggedPosts","flagged","posts","auth","postsEl","map","p","post","parentPost","link","links","metaPost","authorizedToDelete","user","_id","role","deletePost","Component","PropTypes","object","array","metaPosts","state","all","dispatch","postActions"],"mappings":"64BAAA,qDACA,6DACA,4BACA,uCACA,4EACA,4EACA,qC,8zBAEMA,CAAAA,O,mSASgB,CAClB,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,eAAnB,GACD,C,uCAEQ,gCACmC,KAAKF,KADxC,CACCG,OADD,aACCA,OADD,CACUC,KADV,aACUA,KADV,CACiBC,IADjB,aACiBA,IADjB,CACuBJ,OADvB,aACuBA,OADvB,CAGP,GAAMK,CAAAA,OAAO,CAAGH,OAAO,CAACI,GAAR,CAAY,SAAAC,CAAC,CAAI,CAC/B,GAAMC,CAAAA,IAAI,CAAGL,KAAK,CAACA,KAAN,CAAYI,CAAZ,CAAb,CACA,GAAME,CAAAA,UAAU,CAAGD,IAAI,CAACC,UAAL,CAAkBN,KAAK,CAACA,KAAN,CAAYK,IAAI,CAACC,UAAjB,CAAlB,CAAiD,IAApE,CACA,GAAMC,CAAAA,IAAI,CAAGP,KAAK,CAACQ,KAAN,CAAYH,IAAI,CAACI,QAAjB,CAAb,CACA,GAAMC,CAAAA,kBAAkB,CACtBL,IAAI,CAACM,IAAL,GAAcV,IAAI,CAACU,IAAL,CAAUC,GAAxB,EAA+BX,IAAI,CAACU,IAAL,CAAUE,IAAV,GAAmB,OADpD,CAGA,MACE,8BAAC,SAAD,iEACE,6BAAC,cAAD,wBACE,GAAG,CAAER,IAAI,CAACO,GADZ,EAEM,KAAI,CAAChB,KAFX,EAGE,OAAO,CAAES,IAAI,CAACN,OAHhB,CAIE,IAAI,CAAEO,UAAU,EAAID,IAJtB,CAKE,OAAO,CAAEC,UAAU,CAAGD,IAAH,CAAU,IAL/B,CAME,IAAI,CAAEE,IANR,kEAQGG,kBAAkB,EACjB,6BAAC,SAAD,kEACE,6BAAC,WAAD,EAAQ,EAAE,CAAC,KAAX,CAAiB,CAAC,CAAE,EAApB,CAAwB,CAAC,CAAE,CAA3B,CAA8B,OAAO,CAAE,yBAAMb,CAAAA,OAAO,CAACiB,UAAR,CAAmBT,IAAnB,CAAN,EAAvC,0EADF,CATJ,CADF,CADF,CAoBD,CA3Be,CAAhB,CA6BA,MACE,8BAAC,SAAD,EAAM,UAAU,CAAE,QAAlB,gEACE,6BAAC,UAAD,EAAO,CAAC,CAAE,KAAV,gFADF,CAEGH,OAFH,CADF,CAMD,C,qBAnDmBa,gB,+BAAhBpB,O,aACe,CACjBE,OAAO,CAAEmB,mBAAUC,MADF,CAEjBhB,IAAI,CAAEe,mBAAUC,MAFC,CAGjBlB,OAAO,CAAEiB,mBAAUE,KAHF,CAIjBC,SAAS,CAAEH,mBAAUC,MAJJ,CAKjBjB,KAAK,CAAEgB,mBAAUC,MALA,C,eAqDN,wBACb,SAAAG,KAAK,QAAK,CACRnB,IAAI,CAAEmB,KAAK,CAACnB,IADJ,CAERF,OAAO,CAAEqB,KAAK,CAACpB,KAAN,CAAYD,OAFb,CAGRC,KAAK,CAAEoB,KAAK,CAACpB,KAHL,CAIRqB,GAAG,CAAED,KAAK,CAACpB,KAJH,CAAL,EADQ,CAOb,SAAAsB,QAAQ,QAAK,CACXzB,OAAO,CAAE,8BAAmB0B,WAAnB,CAAgCD,QAAhC,CADE,CAAL,EAPK,EAUb3B,OAVa,C","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport * as postActions from 'modules/post/post.actions';\nimport PostComponent from 'modules/post/web/post.component';\nimport { Button, View, Title } from 'modules/styled/web';\n\nclass Flagged extends Component {\n  static propTypes = {\n    actions: PropTypes.object,\n    auth: PropTypes.object,\n    flagged: PropTypes.array,\n    metaPosts: PropTypes.object,\n    posts: PropTypes.object\n  };\n\n  componentDidMount() {\n    this.props.actions.getFlaggedPosts();\n  }\n\n  render() {\n    const { flagged, posts, auth, actions } = this.props;\n\n    const postsEl = flagged.map(p => {\n      const post = posts.posts[p];\n      const parentPost = post.parentPost ? posts.posts[post.parentPost] : null;\n      const link = posts.links[post.metaPost];\n      const authorizedToDelete =\n        post.user === auth.user._id || auth.user.role === 'admin';\n\n      return (\n        <View>\n          <PostComponent\n            key={post._id}\n            {...this.props}\n            flagged={post.flagged}\n            post={parentPost || post}\n            comment={parentPost ? post : null}\n            link={link}\n          >\n            {authorizedToDelete && (\n              <View>\n                <Button bg=\"red\" w={12} m={4} onClick={() => actions.deletePost(post)}>\n                  Delete\n                </Button>\n              </View>\n            )}\n          </PostComponent>\n        </View>\n      );\n    });\n\n    return (\n      <View fdirection={'column'}>\n        <Title m={'0 4'}>Flagged Posts</Title>\n        {postsEl}\n      </View>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    auth: state.auth,\n    flagged: state.posts.flagged,\n    posts: state.posts,\n    all: state.posts\n  }),\n  dispatch => ({\n    actions: bindActionCreators(postActions, dispatch)\n  })\n)(Flagged);\n"],"file":"flagged.component.js"}