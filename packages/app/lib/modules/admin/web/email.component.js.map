{"version":3,"sources":["../../../../src/modules/admin/web/email.component.js"],"names":["pell","process","env","BROWSER","require","Email","props","state","html","email","subject","campaign","handleChange","bind","submit","saveEmail","loadEmail","editor","init","element","document","getElementById","onChange","setState","styleWithCSS","actions","icon","title","result","exec","name","then","content","innerHTML","sendEmail","event","target","value","display","flexDirection","alignSelf","marginLeft","flex","width","margin","justifyContent","marginBottom","Component","PropTypes","object","auth","admin","dispatch","adminActions"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport * as adminActions from 'modules/admin/admin.actions';\nimport ShadowButton from 'modules/ui/web/ShadowButton';\n\nlet pell;\nif (process.env.BROWSER === true) {\n  pell = require('pell');\n  require('pell/dist/pell.min.css');\n  require('./admin.css');\n}\n\n// const customEntityTransform = (entity, text) => {\n//   switch (entity.type) {\n//     case 'IMAGE':\n//       return `<img src=\"${entity.data.src}\" style=\"margin:auto;display:block;float:${entity.data\n//        .alignment || 'none'};height: ${entity.data.height};width: ${entity.data.width}\"/>`;\n//     default:\n//       break;\n//   }\n// };\n\nclass Email extends Component {\n  static propTypes = {\n    actions: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      html: '',\n      email: '',\n      subject: '',\n      campaign: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.submit = this.submit.bind(this);\n    this.saveEmail = this.saveEmail.bind(this);\n    this.loadEmail = this.loadEmail.bind(this);\n  }\n\n  componentDidMount() {\n    this.loadEmail();\n\n    this.editor = pell.init({\n      element: document.getElementById('email-editor'),\n      onChange: html => {\n        this.setState({ html });\n      },\n      styleWithCSS: true,\n      actions: [\n        'bold',\n        'underline',\n        'italic',\n        {\n          icon: '<b>Sml</b>',\n          title: 'small',\n          // result: () => pell.exec('decreaseFontSize')\n          result: () => pell.exec('fontSize', 2)\n        },\n        {\n          icon: '<b>reg</b>',\n          title: 'small',\n          // result: () => pell.exec('decreaseFontSize')\n          result: () => pell.exec('fontSize', 3)\n        },\n        'paragraph',\n        'heading1',\n        'heading2',\n        {\n          icon: '<b>H<sub>3</sub></b>',\n          title: 'H3',\n          result: () => pell.exec('formatBlock', '<H3>')\n        },\n        {\n          icon: '<b>H<sub>4</sub></b>',\n          title: 'H4',\n          result: () => pell.exec('formatBlock', '<H4>')\n        },\n        {\n          icon: '<b>Center</b>',\n          title: 'center',\n          result: () => pell.exec('justifyCenter')\n        },\n        {\n          icon: '<b>Left</b>',\n          title: 'left',\n          result: () => pell.exec('justifyLeft')\n        },\n        'image',\n        'link',\n        {\n          name: 'resize',\n          icon: '<b>Resize</b>',\n          result: () => pell.exec('enableObjectResizing')\n        },\n        {\n          icon: '<b><u><i>Clear</i></u></b>',\n          name: 'clear',\n          result: () => pell.exec('removeFormat')\n        }\n      ]\n      // classes: {\n      //   actionbar: 'pell-actionbar-custom-name',\n      //   button: 'pell-button-custom-name',\n      //   content: 'pell-content-custom-name'\n      // }\n    });\n  }\n\n  saveEmail() {\n    const { email, subject, campaign, html } = this.state;\n    this.props.actions.saveEmail({\n      email,\n      subject,\n      campaign,\n      html\n    });\n  }\n\n  loadEmail() {\n    this.props.actions.loadEmail().then(email => {\n      this.setState(email);\n      this.editor.content.innerHTML = email.html;\n    });\n  }\n\n  submit() {\n    const { email, subject, campaign, html } = this.state;\n    this.props.actions.sendEmail({ email, subject, campaign, html });\n    this.saveEmail();\n  }\n\n  handleChange(event) {\n    this.setState({ [event.target.name]: event.target.value });\n    if (event.target.name === 'html') {\n      this.editor.content.innerHTML = event.target.value;\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"adminContainer\">\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n            alignSelf: 'flex-start',\n            marginLeft: 20\n          }}\n        >\n          <input\n            className={'blueInput'}\n            type={'email'}\n            name={'email'}\n            placeholder={'user email'}\n            value={this.state.email}\n            onChange={this.handleChange}\n          />\n          <input\n            className={'blueInput'}\n            type={'subject'}\n            name={'subject'}\n            placeholder={'subject'}\n            value={this.state.subject}\n            onChange={this.handleChange}\n          />\n          <input\n            className={'blueInput'}\n            type={'campaign'}\n            name={'campaign'}\n            placeholder={'campaign'}\n            value={this.state.campaign}\n            onChange={this.handleChange}\n          />\n        </div>\n        <div style={{ display: 'flex', flex: 1, flexDirection: 'row', width: '100%' }}>\n          <div style={{ flex: 1, margin: 20 }}>\n            <div id=\"email-editor\" />\n          </div>\n          <textarea\n            style={{ flex: 1, margin: 20 }}\n            value={this.state.html}\n            name={'html'}\n            onChange={this.handleChange}\n          />\n        </div>\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'flex-end',\n            alignSelf: 'flex-start',\n            margin: 20,\n            marginBottom: 60\n          }}\n        >\n          <ShadowButton backgroundColor={'white'} color={'#3E3EFF'} onClick={this.submit}>\n            Send email\n          </ShadowButton>\n          <ShadowButton\n            backgroundColor={'white'}\n            color={'#3E3EFF'}\n            onClick={this.saveEmail}\n          >\n            Save draft\n          </ShadowButton>\n          <ShadowButton\n            backgroundColor={'white'}\n            color={'#3E3EFF'}\n            onClick={this.loadEmail}\n          >\n            Load\n          </ShadowButton>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    auth: state.auth,\n    admin: state.admin\n  }),\n  dispatch => ({\n    actions: bindActionCreators(adminActions, dispatch)\n  })\n)(Email);\n"],"file":"email.component.js"}