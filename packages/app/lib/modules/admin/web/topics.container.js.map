{"version":3,"sources":["../../../../src/modules/admin/web/topics.container.js"],"names":["styles","TopicsAdmin","props","state","topic","emoji","handleChange","bind","updateTag","actions","getParentTags","event","setState","target","name","value","e","tag","updateParentTag","active","main","split","filter","t","children","_id","categoryName","category","createTag","tags","parentTags","topicsContainerStyle","newTag","map","newId","join","textDecoration","count","archiveTag","saveTag","Component","PropTypes","object","array","display","flexDirection","alignItems","auth","dispatch","tagActions"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport * as tagActions from 'modules/tag/tag.actions';\n\n// import styled from 'styled-components';\n\nlet styles;\n\nclass TopicsAdmin extends Component {\n  static propTypes = {\n    actions: PropTypes.object,\n    tags: PropTypes.array\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      topic: '',\n      emoji: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.updateTag = this.updateTag.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.actions.getParentTags();\n  }\n\n  handleChange(event) {\n    this.setState({ [event.target.name]: event.target.value });\n  }\n\n  updateTag(e, tag) {\n    tag[e.target.name] = e.target.value;\n    this.props.actions.updateParentTag(tag);\n  }\n\n  archiveTag(tag) {\n    tag.active = !tag.active;\n    this.props.actions.updateTag(tag);\n  }\n\n  saveTag(tag) {\n    tag.main = tag.main.split(', ').filter(t => t !== '');\n    tag.children = tag.children.split(', ').filter(t => t !== '');\n    this.props.actions.updateTag(tag);\n  }\n\n  newTag() {\n    const tag = {\n      _id: this.state.topic + '_category_tag',\n      categoryName: this.state.topic,\n      category: true,\n      emoji: this.state.emoji\n    };\n    this.props.actions.createTag(tag);\n  }\n\n  render() {\n    let tags = this.props.tags.parentTags || [];\n    tags = [...tags.filter(tag => tag.active), ...tags.filter(tag => !tag.active)];\n\n    return (\n      <div style={styles.topicsContainerStyle}>\n        <input\n          type={'text'}\n          name={'topic'}\n          placeholder={'topic'}\n          value={this.state.topic}\n          onChange={this.handleChange}\n        />\n        <input\n          type={'text'}\n          name={'emoji'}\n          placeholder={'emoji'}\n          value={this.state.emoji}\n          onChange={this.handleChange}\n        />\n        <button onClick={() => this.newTag()}>Add new category</button>\n        {tags.map(tag => {\n          if (!tag.newId) tag.newId = tag._id;\n          if (tag.main && typeof tag.main !== 'string') {\n            tag.main = tag.main.join(', ');\n          }\n          if (tag.children && typeof tag.children !== 'string') {\n            tag.children = tag.children.join(', ');\n          }\n          return (\n            <div\n              style={tag.active ? null : { textDecoration: 'line-through' }}\n              key={tag._id}\n            >\n              {tag.emoji}\n              &nbsp;\n              <input\n                type={'text'}\n                name={'categoryName'}\n                placeholder={'topic'}\n                value={tag.categoryName}\n                onChange={e => this.updateTag(e, tag)}\n              />\n              <input\n                type={'text'}\n                name={'newId'}\n                placeholder={'_id'}\n                value={tag.newId}\n                onChange={e => this.updateTag(e, tag)}\n              />\n              <input\n                type={'text'}\n                name={'main'}\n                placeholder={'main'}\n                value={tag.main}\n                onChange={e => this.updateTag(e, tag)}\n              />\n              <input\n                type={'text'}\n                name={'children'}\n                placeholder={'children'}\n                value={tag.children}\n                onChange={e => this.updateTag(e, tag)}\n              />\n              &nbsp;\n              {tag.count}\n              &nbsp;\n              <button onClick={() => this.archiveTag(tag)}>remove</button>\n              <button onClick={() => this.saveTag(tag)}>save</button>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\n// const TopicsContainer = styled.div`\n//   display: flex;\n//   flex-direction: column;\n//   alignItems: center;\n// `;\n\nstyles = {\n  topicsContainerStyle: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  }\n};\n\nexport default connect(\n  state => ({\n    auth: state.auth,\n    tags: state.tags\n  }),\n  dispatch => ({\n    actions: bindActionCreators(tagActions, dispatch)\n  })\n)(TopicsAdmin);\n"],"file":"topics.container.js"}