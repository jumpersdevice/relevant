{"version":3,"sources":["../../../src/modules/profile/navProfile.component.js"],"names":["WalletInfo","styled","View","NavProfile","ReactTooltip","rebuild","lastProps","props","auth","actions","user","community","relevance","getUser","cacheCommunity","earnings","pendingPayouts","pending","forEach","id","earning","entities","hideGetTokens","twitterId","confirmed","SIDE_NAV_PADDING","name","goToTab","colors","blue","push","JSON","stringify","type","text","grey","black","e","preventDefault","showModal","Component","PropTypes","object","mapStateToProps","state","mapDispatchToProps","dispatch","navigationActions"],"mappings":"g1BAAA,qDACA,6DACA,4BACA,uCACA,0EACA,6EACA,uEACA,4EACA,2FACA,0CACA,mEAEA,oCACA,gFACA,kCACA,4CACA,2C,qmDAEA,GAAMA,CAAAA,UAAU,CAAGC,oBAAOC,IAAV,+JAGE,mBAAO,CAAP,CAHF,CAAhB,C,GAOaC,CAAAA,U,kTAQS,CAClB,GAAIC,sBAAaC,OAAjB,CAA0BD,sBAAaC,OAAb,GAC3B,C,8DAEkBC,S,CAAW,iBACI,KAAKC,KADT,CACpBC,IADoB,aACpBA,IADoB,CACdC,OADc,aACdA,OADc,CACLC,IADK,aACLA,IADK,CAE5B,GACEF,IAAI,CAACG,SAAL,GAAmBL,SAAS,CAACE,IAAV,CAAeG,SAAlC,EACAD,IADA,GAEC,CAACA,IAAI,CAACE,SAAN,EAAmBF,IAAI,CAACE,SAAL,CAAeD,SAAf,GAA6BH,IAAI,CAACG,SAFtD,CADF,CAIE,CACAF,OAAO,CAACI,OAAR,GACD,CAED,GAAIH,IAAI,EAAIF,IAAI,CAACG,SAAL,GAAmBL,SAAS,CAACE,IAAV,CAAeG,SAA9C,CAAyD,CACvDF,OAAO,CAACK,cAAR,CAAuBN,IAAI,CAACG,SAA5B,EACD,CACF,C,uCAEQ,kBACmC,KAAKJ,KADxC,CACCG,IADD,cACCA,IADD,CACOK,QADP,cACOA,QADP,CACiBN,OADjB,cACiBA,OADjB,CAC0BD,IAD1B,cAC0BA,IAD1B,IAECG,CAAAA,SAFD,CAEeH,IAFf,CAECG,SAFD,CAGP,GAAI,CAACD,IAAL,CAAW,MAAO,KAAP,CAGX,GAAIM,CAAAA,cAAc,CAAG,CAArB,CACAD,QAAQ,CAACE,OAAT,CAAiBC,OAAjB,CAAyB,SAAAC,EAAE,CAAI,CAC7B,GAAMC,CAAAA,OAAO,CAAGL,QAAQ,CAACM,QAAT,CAAkBF,EAAlB,CAAhB,CACAH,cAAc,EAAI,+BAAkBI,OAAlB,CAAlB,CACD,CAHD,EAKA,GAAME,CAAAA,aAAa,CAAIZ,IAAI,CAACa,SAAL,EAAkBb,IAAI,CAACc,SAAxB,EAAsC,CAACb,SAA7D,CAEA,MACE,8BAAC,SAAD,EAAM,EAAE,KAAR,CAAS,IAAI,CAAE,CAAf,gEACE,6BAAC,SAAD,EAAM,CAAC,CAAE,CAACc,wBAAD,CAAmB,CAAnB,CAAT,CAAgC,EAAE,CAAE,CAAC,CAAD,CAAI,CAAJ,CAApC,gEACE,6BAAC,SAAD,EAAM,UAAU,CAAE,KAAlB,CAAyB,OAAO,CAAC,eAAjC,CAAiD,KAAK,CAAC,QAAvD,iEACE,6BAAC,WAAD,kEAASf,IAAI,CAACgB,IAAd,CADF,CAEE,6BAAC,cAAD,EACE,MAAM,CAAE,CADV,CAEE,EAAE,KAFJ,CAGE,EAAE,CAAC,cAHL,CAIE,OAAO,CAAE,yBAAMjB,CAAAA,OAAO,CAACkB,OAAR,CAAgB,QAAhB,CAAN,EAJX,iEAME,6BAAC,YAAD,EAAS,CAAC,CAAEC,eAAOC,IAAnB,6EANF,CAFF,CADF,CAaE,6BAAC,SAAD,EAAM,UAAU,CAAE,KAAlB,CAAyB,KAAK,CAAE,QAAhC,CAA0C,EAAE,CAAE,CAAC,CAAD,CAAI,CAAJ,CAA9C,iEACE,6BAAC,gBAAD,EACE,IAAI,CAAEnB,IADR,CAEE,IAAI,CAAE,CAFR,CAGE,MAAM,KAHR,CAIE,WAAW,CAAE,6BAAMD,CAAAA,OAAO,CAACkB,OAAR,CAAgB,WAAhB,CAAN,EAJf,iEADF,CAOE,6BAAC,UAAD,kEACE,6BAAC,SAAD,EAAM,UAAU,CAAE,KAAlB,iEACE,6BAAC,cAAD,EACE,EAAE,CAAC,cADL,CAEE,MAAM,CAAE,CAFV,CAGE,OAAO,CAAE,yBAAMlB,CAAAA,OAAO,CAACqB,IAAR,CAAa,WAAb,CAAN,EAHX,iEAKE,6BAAC,cAAD,EACE,IAAI,CAAEpB,IADR,CAEE,KAAK,CAAC,QAFR,CAGE,WAAS,aAHX,CAIE,WAAUqB,IAAI,CAACC,SAAL,CAAe,CACvBC,IAAI,CAAE,MADiB,CAEvB1B,KAAK,CAAE,CACL2B,IAAI,CACF,+FAFG,CAFgB,CAAf,CAJZ,iEALF,CADF,CAmBE,6BAAC,cAAD,EACE,EAAE,CAAC,cADL,CAEE,MAAM,CAAE,CAFV,CAGE,OAAO,CAAE,yBAAMzB,CAAAA,OAAO,CAACkB,OAAR,CAAgB,QAAhB,CAAN,EAHX,kEAKE,6BAAC,iBAAD,EACE,IAAI,CAAEjB,IADR,CAEE,OAAO,CAAE,IAFX,CAIE,KAAK,CAAC,QAJR,CAKE,WAAS,aALX,CAME,WAAUqB,IAAI,CAACC,SAAL,CAAe,CACvBC,IAAI,CAAE,MADiB,CAEvB1B,KAAK,CAAE,CACL2B,IAAI,CACF,2FAFG,CAFgB,CAAf,CANZ,kEALF,CAnBF,CADF,CAyCE,6BAAC,SAAD,EAAM,UAAU,CAAE,KAAlB,CAAyB,KAAK,CAAE,QAAhC,CAA0C,KAAK,CAAEN,eAAOO,IAAxD,CAA8D,EAAE,CAAE,CAAlE,kEACE,6BAAC,kBAAD,EAAe,EAAE,CAAE,GAAnB,sFADF,CAEE,6BAAC,iBAAD,EACE,IAAI,CAAE,GADR,CAEE,EAAE,CAAE,GAFN,CAGE,EAAE,CAAE,GAHN,CAIE,SAAS,KAJX,CAKE,CAAC,CAAEP,eAAOQ,KALZ,CAME,MAAM,CAAEpB,cANV,CAOE,KAAK,CAAE,UAPT,CAQE,WAAS,aARX,CASE,WAAUe,IAAI,CAACC,SAAL,CAAe,CACvBC,IAAI,CAAE,MADiB,CAEvB1B,KAAK,CAAE,CACL2B,IAAI,CACF,oHAFG,CAFgB,CAAf,CATZ,kEAFF,CAzCF,CAPF,CAbF,CAoFE,6BAAC,SAAD,EAAM,UAAU,CAAE,KAAlB,CAAyB,KAAK,CAAE,UAAhC,CAA4C,EAAE,CAAE,CAAhD,kEACGZ,aAAa,CAAG,IAAH,CACZ,6BAAC,cAAD,EACE,EAAE,CAAC,cADL,CAEE,CAAC,CAAEM,eAAOC,IAFZ,CAGE,EAAE,KAHJ,CAIE,OAAO,CAAE,kBAAM,CACbpB,OAAO,CAACqB,IAAR,CAAa,WAAb,EACD,CANH,CAOE,OAAO,CAAE,iBAAAO,CAAC,CAAI,CACZA,CAAC,CAACC,cAAF,GACA7B,OAAO,CAAC8B,SAAR,CAAkB,WAAlB,EACD,CAVH,kEAYE,6BAAC,YAAD,EAAS,CAAC,CAAEX,eAAOC,IAAnB,+EAZF,CAFJ,CAiBGP,aAAa,CAAG,IAAH,CAAU,6BAAC,SAAD,gFAjB1B,CAkBGX,SAAS,EACR,6BAAC,cAAD,EACE,EAAE,CAAC,cADL,CAEE,EAAE,CAAE,CAFN,CAGE,CAAC,CAAEiB,eAAOC,IAHZ,CAIE,EAAE,KAJJ,CAKE,OAAO,CAAE,kBAAM,CACbpB,OAAO,CAACqB,IAAR,CAAa,SAAb,EACD,CAPH,CAQE,OAAO,CAAE,iBAAAO,CAAC,CAAI,CACZA,CAAC,CAACC,cAAF,GACA7B,OAAO,CAAC8B,SAAR,CAAkB,QAAlB,EACD,CAXH,kEAaE,6BAAC,YAAD,EAAS,CAAC,CAAEX,eAAOC,IAAnB,mFAbF,CAnBJ,CApFF,CADF,CADF,CA6HD,C,wBAtK6BW,gB,6DAAnBrC,U,aACQ,CACjBO,IAAI,CAAE+B,mBAAUC,MADC,CAEjB3B,QAAQ,CAAE0B,mBAAUC,MAFH,CAGjBjC,OAAO,CAAEgC,mBAAUC,MAHF,CAIjBlC,IAAI,CAAEiC,mBAAUC,MAJC,C,EAwKrB,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,KAAK,wBAAK,CAChCpC,IAAI,CAAEoC,KAAK,CAACpC,IADoB,CAEhCE,IAAI,CAAEkC,KAAF,SAAEA,KAAF,8BAAEA,KAAK,CAAEpC,IAAT,sCAAE,YAAaE,IAFa,CAGhCK,QAAQ,CAAE6B,KAAK,CAAC7B,QAHgB,CAAL,EAA7B,CAMA,GAAM8B,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,QAAK,CACtCrC,OAAO,CAAE,6DAEFsC,iBAFE,MAGLjC,cAAc,CAAdA,oBAHK,CAILD,OAAO,CAAPA,aAJK,GAMPiC,QANO,CAD6B,CAAL,EAAnC,C,aAWe,wBAAQH,eAAR,CAAyBE,kBAAzB,EAA6C1C,UAA7C,C","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport UAvatar from 'modules/user/UAvatar.component';\nimport CoinStat from 'modules/stats/coinStat.component';\nimport RStat from 'modules/stats/rStat.component';\nimport ULink from 'modules/navigation/ULink.component';\nimport * as navigationActions from 'modules/navigation/navigation.actions';\nimport { getUser, cacheCommunity } from 'modules/auth/auth.actions';\nimport ReactTooltip from 'react-tooltip';\n\nimport { sizing, colors } from 'app/styles';\nimport styled from 'styled-components/primitives';\nimport { Header, View, SecondaryText, CTALink, Text } from 'modules/styled/uni';\nimport { computeUserPayout } from 'app/utils/rewards';\nimport { SIDE_NAV_PADDING } from 'styles/layout';\n\nconst WalletInfo = styled.View`\n  display: flex;\n  flex-direction: column;\n  padding-left: ${sizing(2)};\n  flex-shrink: 1;\n`;\n\nexport class NavProfile extends Component {\n  static propTypes = {\n    user: PropTypes.object,\n    earnings: PropTypes.object,\n    actions: PropTypes.object,\n    auth: PropTypes.object\n  };\n\n  componentDidMount() {\n    if (ReactTooltip.rebuild) ReactTooltip.rebuild();\n  }\n\n  componentDidUpdate(lastProps) {\n    const { auth, actions, user } = this.props;\n    if (\n      auth.community !== lastProps.auth.community &&\n      user &&\n      (!user.relevance || user.relevance.community !== auth.community)\n    ) {\n      actions.getUser();\n    }\n\n    if (user && auth.community !== lastProps.auth.community) {\n      actions.cacheCommunity(auth.community);\n    }\n  }\n\n  render() {\n    const { user, earnings, actions, auth } = this.props;\n    const { community } = auth;\n    if (!user) return null;\n\n    // TODO optimize this so its not on every render?\n    let pendingPayouts = 0;\n    earnings.pending.forEach(id => {\n      const earning = earnings.entities[id];\n      pendingPayouts += computeUserPayout(earning);\n    });\n\n    const hideGetTokens = (user.twitterId && user.confirmed) || !community;\n\n    return (\n      <View bb flex={1}>\n        <View p={[SIDE_NAV_PADDING, 2]} pb={[4, 3]}>\n          <View fdirection={'row'} justify=\"space-between\" align=\"center\">\n            <Header>{user.name}</Header>\n            <ULink\n              inline={1}\n              hu\n              to=\"/user/wallet\"\n              onPress={() => actions.goToTab('wallet')}\n            >\n              <CTALink c={colors.blue}>My Wallet</CTALink>\n            </ULink>\n          </View>\n\n          <View fdirection={'row'} align={'center'} mt={[3, 2]}>\n            <UAvatar\n              user={user}\n              size={8}\n              noName\n              goToProfile={() => actions.goToTab('myProfile')}\n            />\n            <WalletInfo>\n              <View fdirection={'row'}>\n                <ULink\n                  to=\"/user/wallet\"\n                  inline={1}\n                  onPress={() => actions.push('statsView')}\n                >\n                  <RStat\n                    user={user}\n                    align=\"center\"\n                    data-for=\"mainTooltip\"\n                    data-tip={JSON.stringify({\n                      type: 'TEXT',\n                      props: {\n                        text:\n                          'Earn Reputation by posting comments.\\nThe higher your score, the more weight your votes have.'\n                      }\n                    })}\n                  />\n                </ULink>\n                <ULink\n                  to=\"/user/wallet\"\n                  inline={1}\n                  onPress={() => actions.goToTab('wallet')}\n                >\n                  <CoinStat\n                    user={user}\n                    isOwner={true}\n                    // showPrice\n                    align=\"center\"\n                    data-for=\"mainTooltip\"\n                    data-tip={JSON.stringify({\n                      type: 'TEXT',\n                      props: {\n                        text:\n                          'Get coins by upvoting quality links.\\nThe higher your Reputation the more coins you earn.'\n                      }\n                    })}\n                  />\n                </ULink>\n              </View>\n              <View fdirection={'row'} align={'center'} color={colors.grey} mt={2}>\n                <SecondaryText fs={1.5}>Pending Rewards: </SecondaryText>\n                <CoinStat\n                  size={1.5}\n                  mr={1.5}\n                  fs={1.5}\n                  secondary\n                  c={colors.black}\n                  amount={pendingPayouts}\n                  align={'baseline'}\n                  data-for=\"mainTooltip\"\n                  data-tip={JSON.stringify({\n                    type: 'TEXT',\n                    props: {\n                      text:\n                        'These are your projected earnings for upvoting quality posts.\\nRewards are paid out 3 days after a link is posted.'\n                    }\n                  })}\n                />\n              </View>\n            </WalletInfo>\n          </View>\n\n          <View fdirection={'row'} align={'baseline'} mt={3}>\n            {hideGetTokens ? null : (\n              <ULink\n                to=\"/user/wallet\"\n                c={colors.blue}\n                hu\n                onPress={() => {\n                  actions.push('getTokens');\n                }}\n                onClick={e => {\n                  e.preventDefault();\n                  actions.showModal('getTokens');\n                }}\n              >\n                <CTALink c={colors.blue}>Get Tokens</CTALink>\n              </ULink>\n            )}\n            {hideGetTokens ? null : <Text> &nbsp;&nbsp; </Text>}\n            {community && (\n              <ULink\n                to=\"/user/wallet\"\n                ml={1}\n                c={colors.blue}\n                hu\n                onPress={() => {\n                  actions.push('invites');\n                }}\n                onClick={e => {\n                  e.preventDefault();\n                  actions.showModal('invite');\n                }}\n              >\n                <CTALink c={colors.blue}>Invite Friends</CTALink>\n              </ULink>\n            )}\n          </View>\n        </View>\n      </View>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  user: state?.auth?.user,\n  earnings: state.earnings\n});\n\nconst mapDispatchToProps = dispatch => ({\n  actions: bindActionCreators(\n    {\n      ...navigationActions,\n      cacheCommunity,\n      getUser\n    },\n    dispatch\n  )\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NavProfile);\n"],"file":"navProfile.component.js"}