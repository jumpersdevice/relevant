{"version":3,"sources":["../../../src/modules/navigation/navigation.actions.js"],"names":["dismissKeyboard","safariView","Orientation","NavigationActions","StackActions","DrawerActions","Linking","native","isNative","process","env","WEB","require","default","showAuth","dispatch","navigate","routeName","showModal","lockDrawer","lock","type","LOCK_DRAWER","payload","modal","data","SHOW_MODAL","hideModal","HIDE_MODAL","scrolling","scroll","SCROLL","registerGesture","gesture","REGISTER_GESTURE","closeDrawer","push","route","key","params","community","requestAnimationFrame","pop","back","replace","toggleTopics","showTopics","TOGGLE_TOPICS","goToTab","tab","resetTabs","resetAction","reset","index","actions","goToTopic","topic","title","categoryName","id","_id","gestureResponseDistance","setScrollTab","view","SET_SCROLL_TAB","setWidth","width","screenSize","SET_WIDTH","refreshTab","REFRESH_ROUTE","reloadTab","RELOAD_ROUTE","reloadAllTabs","RELOAD_ALL_TABS","openWebSideNav","OPEN_WEB_SIDE_NAV","closeWebSideNav","CLOSE_WEB_SIDE_NAV","goToPeople","component","toLowerCase","goToUrl","url","match","openURL","isAvailable","unlockAllOrientations","show","readerMode","uri","goToComments","post","animation","goToPost","openComment","comment","commentCount","goToProfile","user","handle","name","viewBlocked","viewInvites","goToInviteList"],"mappings":"0qCAAA,mDAeA,mDACA,oCACA,0CAEA,GAAIA,CAAAA,eAAJ,CACA,GAAIC,CAAAA,UAAJ,CACA,GAAIC,CAAAA,WAAJ,CACA,GAAIC,CAAAA,iBAAJ,CACA,GAAIC,CAAAA,YAAJ,CACA,GAAIC,CAAAA,aAAJ,CACA,GAAIC,CAAAA,OAAJ,CACA,GAAIC,CAAAA,MAAJ,CAEA,GAAMC,CAAAA,QAAQ,CAAGC,OAAO,CAACC,GAAR,CAAYC,GAAZ,GAAoB,MAArC,CAEA,GAAIF,OAAO,CAACC,GAAR,CAAYC,GAAZ,GAAoB,MAAxB,CAAgC,CAC9BT,WAAW,CAAGU,OAAO,CAAC,0BAAD,CAArB,CACAZ,eAAe,CAAGY,OAAO,CAAC,+BAAD,CAAzB,CACAX,UAAU,CAAGW,OAAO,CAAC,0BAAD,CAAP,CAAoCC,OAAjD,CACAV,iBAAiB,CAAGS,OAAO,CAAC,kBAAD,CAAP,CAA4BT,iBAAhD,CACAC,YAAY,CAAGQ,OAAO,CAAC,kBAAD,CAAP,CAA4BR,YAA3C,CACAC,aAAa,CAAGO,OAAO,CAAC,yBAAD,CAAP,CAAmCP,aAAnD,CACAC,OAAO,CAAGM,OAAO,oBAAP,CAAwBN,OAAlC,CACAC,MAAM,CAAG,IAAT,CACD,CAEM,QAASO,CAAAA,QAAT,EAAoB,CACzB,MAAO,UAAAC,QAAQ,QACbP,CAAAA,QAAQ,CACJ,iCAAwBL,iBAAiB,CAACa,QAAlB,CAA2B,CAAEC,SAAS,CAAE,MAAb,CAA3B,CAAxB,CADI,CAEJF,QAAQ,CAACG,SAAS,CAAC,OAAD,CAAV,CAHC,EAAf,CAID,CAEM,QAASC,CAAAA,UAAT,CAAoBC,IAApB,CAA0B,CAC/B,MAAO,CACLC,IAAI,CAAEC,wBADD,CAELC,OAAO,CAAEH,IAFJ,CAAP,CAID,CAEM,QAASF,CAAAA,SAAT,CAAmBM,KAAnB,CAA0BC,IAA1B,CAAgC,CACrC,MAAO,CACLJ,IAAI,CAAEK,uBADD,CAELH,OAAO,CAAE,CACPC,KAAK,CAALA,KADO,CAEPC,IAAI,CAAJA,IAFO,CAFJ,CAAP,CAOD,CAEM,QAASE,CAAAA,SAAT,CAAmBH,KAAnB,CAA0B,CAC/B,MAAO,CACLH,IAAI,CAAEO,uBADD,CAELL,OAAO,CAAEC,KAFJ,CAAP,CAID,CAEM,QAASK,CAAAA,SAAT,CAAmBC,MAAnB,CAA2B,CAChC,MAAO,CACLT,IAAI,CAAEU,mBADD,CAELR,OAAO,CAAEO,MAFJ,CAAP,CAID,CAEM,QAASE,CAAAA,eAAT,CAAyBC,OAAzB,CAAkC,CACvC,MAAO,CACLZ,IAAI,CAAEa,6BADD,CAELX,OAAO,CAAEU,OAFJ,CAAP,CAID,CAEM,QAASE,CAAAA,WAAT,EAAuB,CAC5B,MAAO,kBAAO5B,CAAAA,MAAM,CAAG,iCAAwBF,aAAa,CAAC8B,WAAd,EAAxB,CAAH,CAA0D,IAAvE,EAAP,CACD,CAEM,QAASC,CAAAA,IAAT,CAAcC,KAAd,CAAqB,CAC1B,MAAO,UAAAtB,QAAQ,CAAI,CACjB,GAAIf,eAAJ,CAAqBA,eAAe,GACpC,GAAIO,MAAJ,CAAY,CACV,iCAAwBF,aAAa,CAAC8B,WAAd,EAAxB,EACA,iCACEhC,iBAAiB,CAACa,QAAlB,CAA2B,CAAEC,SAAS,CAAEoB,KAAK,CAACC,GAAN,EAAaD,KAA1B,CAAiCE,MAAM,CAAEF,KAAzC,CAA3B,CADF,EAGD,CAGD,GAAIA,KAAK,CAACG,SAAN,EAAmBH,KAAK,CAACG,SAAN,GAAoB,EAA3C,CAA+C,CAC7CC,qBAAqB,CAAC,iBAAM1B,CAAAA,QAAQ,CAAC,uBAAasB,KAAK,CAACG,SAAnB,CAAD,CAAd,EAAD,CAArB,CACD,CACF,CAbD,CAcD,CAEM,QAASE,CAAAA,GAAT,EAAe,CACpB,MAAO,WAAM,CACX,iCAAwBvC,iBAAiB,CAACwC,IAAlB,EAAxB,EACD,CAFD,CAGD,CAEM,QAASC,CAAAA,OAAT,CAAiBN,GAAjB,CAAsB,CAC3B,MAAO,WAAM,CACX,iCAAwBlC,YAAY,CAACwC,OAAb,CAAqB,CAAE3B,SAAS,CAAEqB,GAAb,CAArB,CAAxB,EACD,CAFD,CAGD,CAEM,QAASO,CAAAA,YAAT,CAAsBC,UAAtB,CAAkC,CACvC,MAAO,CACLzB,IAAI,CAAE0B,0BADD,CAELxB,OAAO,CAAEuB,UAFJ,CAAP,CAID,CAEM,QAASE,CAAAA,OAAT,CAAiBC,GAAjB,CAAsB,CAC3B,MAAO,WAAM,CACX,GAAI,CAAC1C,MAAL,CAAa,OACb,iCAAwBF,aAAa,CAAC8B,WAAd,EAAxB,EACA,iCACEhC,iBAAiB,CAACa,QAAlB,CAA2B,CACzBC,SAAS,CAAEgC,GADc,CAA3B,CADF,EAKD,CARD,CASD,CAEM,QAASC,CAAAA,SAAT,EAAqB,CAC1B,MAAO,WAAM,CACX,GAAI,CAAC3C,MAAL,CAAa,OACb,GAAM4C,CAAAA,WAAW,CAAG/C,YAAY,CAACgD,KAAb,CAAmB,CACrCC,KAAK,CAAE,CAD8B,CAErCC,OAAO,CAAE,CAACnD,iBAAiB,CAACa,QAAlB,CAA2B,CAAEC,SAAS,CAAE,MAAb,CAA3B,CAAD,CAF4B,CAAnB,CAApB,CAIA,iCAAwBkC,WAAxB,EACD,CAPD,CAQD,CAEM,QAASI,CAAAA,SAAT,CAAmBC,KAAnB,CAA0B,CAC/B,MAAO,UAAAzC,QAAQ,CAAI,CACjB,iCACEZ,iBAAiB,CAACa,QAAlB,CAA2B,CACzBC,SAAS,CAAE,UADc,CAA3B,CADF,EAMAF,QAAQ,CACNqB,IAAI,CAAC,CACHE,GAAG,CAAE,aADF,CAEHmB,KAAK,CAAED,KAAK,CAACE,YAAN,EAAsBF,KAF1B,CAGHb,IAAI,CAAE,IAHH,CAIHgB,EAAE,CAAEH,KAAK,CAACI,GAAN,EAAaJ,KAAK,CAACA,KAAnB,EAA4BA,KAJ7B,CAKHA,KAAK,CAALA,KALG,CAMHK,uBAAuB,CAAE,GANtB,CAAD,CADE,CAAR,CAUA9C,QAAQ,CAAC8B,YAAY,CAAC,KAAD,CAAb,CAAR,CACD,CAlBD,CAmBD,CAEM,QAASiB,CAAAA,YAAT,CAAsBzC,IAAtB,CAA4B0C,IAA5B,CAAkC,CACvC,MAAO,CACL1C,IAAI,CAAE2C,2BADD,CAELzC,OAAO,CAAE,CACPF,IAAI,CAAJA,IADO,CAEP0C,IAAI,CAAJA,IAFO,CAFJ,CAAP,CAOD,CAEM,QAASE,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,CAC9B,GAAMC,CAAAA,UAAU,CAAG,uBAAcD,KAAd,CAAnB,CACA,MAAO,CACL7C,IAAI,CAAE+C,sBADD,CAEL7C,OAAO,CAAE,CACP2C,KAAK,CAALA,KADO,CAEPC,UAAU,CAAVA,UAFO,CAFJ,CAAP,CAOD,CAEM,QAASE,CAAAA,UAAT,CAAoB/B,GAApB,CAAyB,CAC9B,MAAO,CACLjB,IAAI,CAAEiD,0BADD,CAELhC,GAAG,CAAHA,GAFK,CAAP,CAID,CAEM,QAASiC,CAAAA,SAAT,CAAmBjC,GAAnB,CAAwB,CAC7B,MAAO,CACLjB,IAAI,CAAEmD,yBADD,CAELlC,GAAG,CAAHA,GAFK,CAAP,CAID,CAEM,QAASmC,CAAAA,aAAT,EAAyB,CAC9B,MAAO,CACLpD,IAAI,CAAEqD,4BADD,CAAP,CAGD,CAEM,QAASC,CAAAA,cAAT,EAA0B,CAC/B,MAAO,CACLtD,IAAI,CAAEuD,8BADD,CAAP,CAGD,CAEM,QAASC,CAAAA,eAAT,EAA2B,CAChC,MAAO,CACLxD,IAAI,CAAEyD,+BADD,CAAP,CAGD,CAEM,QAASC,CAAAA,UAAT,CAAoBvB,KAApB,CAA2B,CAChC,MAAOpB,CAAAA,IAAI,CAAC,CACVE,GAAG,CAAE,YADK,CAEV0C,SAAS,CAAE,YAFD,CAGVvB,KAAK,CAAED,KAAK,CAAG,IAAMA,KAAT,CAAiB,QAHnB,CAIVb,IAAI,CAAE,IAJI,CAKVgB,EAAE,CAAEH,KAAK,CAAG,SALF,CAMVA,KAAK,CAAEA,KAAK,CAAG,CAAEI,GAAG,CAAEJ,KAAK,CAACyB,WAAN,EAAP,CAAH,CAAkC,IANpC,CAAD,CAAX,CAQD,CAEM,QAASC,CAAAA,OAAT,CAAiBC,GAAjB,CAAsBxB,EAAtB,CAA0B,CAC/B,oFAAO,iBAAM5C,QAAN,uIAECoE,GAAG,CAACC,KAAJ,CAAU,SAAV,CAFD,yDAE8B9E,OAAO,CAAC+E,OAAR,CAAgBF,GAAhB,CAF9B,SAGHpE,QAAQ,CAAC,8BAAiB,QAAjB,CAA2B4C,EAA3B,CAAD,CAAR,CAHG,GAIE1D,UAJF,yDAIqB,IAJrB,+BAKGA,CAAAA,UAAU,CAACqF,WAAX,EALH,QAMHpF,WAAW,CAACqF,qBAAZ,GANG,gCAOItF,UAAU,CAACuF,IAAX,CAAgB,CACrBL,GAAG,CAAHA,GADqB,CAErBM,UAAU,CAAE,IAFS,CAAhB,CAPJ,4FAYI1E,QAAQ,CACbqB,IAAI,CACF,CACEE,GAAG,CAAE,aADP,CAEE0C,SAAS,CAAE,aAFb,CAGErC,IAAI,CAAE,IAHR,CAIE+C,GAAG,CAAEP,GAJP,CAKExB,EAAE,CAAEwB,GALN,CAMEtB,uBAAuB,CAAE,GAN3B,CADE,CASF,MATE,CADS,CAZZ,uEAAP,+DA2BD,CAEM,QAAS8B,CAAAA,YAAT,CAAsBC,IAAtB,CAA4BtD,GAA5B,CAAiCuD,SAAjC,CAA4C,CACjD,MAAOzD,CAAAA,IAAI,CACT,CACEE,GAAG,CAAE,SADP,CAEEmB,KAAK,CAAE,UAFT,CAGEjB,SAAS,CAAEoD,IAAI,CAACnE,IAAL,CAAYmE,IAAI,CAACnE,IAAL,CAAUe,SAAtB,CAAkCoD,IAAI,CAACpD,SAHpD,CAIEG,IAAI,CAAE,IAJR,CAKEgB,EAAE,CAAEiC,IAAI,CAAChC,GALX,CADS,CAQTtB,GARS,CASTuD,SATS,CAAX,CAWD,CAEM,QAASC,CAAAA,QAAT,CAAkBF,IAAlB,CAAwBG,WAAxB,CAAqC,CAC1C,MAAO3D,CAAAA,IAAI,CAAC,CACVE,GAAG,CAAE,YADK,CAEVmB,KAAK,CAAEmC,IAAI,CAACnC,KAAL,CAAamC,IAAI,CAACnC,KAAlB,CAA0B,EAFvB,CAGVd,IAAI,CAAE,IAHI,CAIVH,SAAS,CAAEoD,IAAI,CAACnE,IAAL,CAAYmE,IAAI,CAACnE,IAAL,CAAUe,SAAtB,CAAkCoD,IAAI,CAACpD,SAJxC,CAKVmB,EAAE,CAAEiC,IAAI,CAAChC,GALC,CAMVoC,OAAO,CAAEJ,IAAI,CAACI,OANJ,CAOVC,YAAY,CAAEL,IAAI,CAACK,YAPT,CAQVF,WAAW,CAAXA,WARU,CAAD,CAAX,CAUD,CAEM,QAASG,CAAAA,WAAT,CAAqBC,IAArB,CAA2B7D,GAA3B,CAAgC,CACrC,GAAM8D,CAAAA,MAAM,CAAGD,IAAI,CAACC,MAAL,EAAeD,IAAI,CAACvD,OAAL,CAAa,GAAb,CAAkB,EAAlB,CAA9B,CACA,MAAOR,CAAAA,IAAI,CACT,CACEE,GAAG,CAAE,SADP,CAEEmB,KAAK,CAAE0C,IAAI,CAACE,IAFd,CAGE1D,IAAI,CAAE,IAHR,CAIEgB,EAAE,CAAEyC,MAJN,CADS,CAOT9D,GAPS,CAAX,CASD,CAEM,QAASgE,CAAAA,WAAT,EAAuB,CAC5B,MAAOlE,CAAAA,IAAI,CAAC,CACVE,GAAG,CAAE,SADK,CAEVmB,KAAK,CAAE,eAFG,CAGVE,EAAE,CAAE,SAHM,CAIVhB,IAAI,CAAE,IAJI,CAAD,CAAX,CAMD,CAEM,QAAS4D,CAAAA,WAAT,EAAuB,CAC5B,MAAOnE,CAAAA,IAAI,CAAC,CACVE,GAAG,CAAE,SADK,CAEVmB,KAAK,CAAE,gBAFG,CAGVE,EAAE,CAAE,SAHM,CAIVhB,IAAI,CAAE,IAJI,CAAD,CAAX,CAMD,CAEM,QAAS6D,CAAAA,cAAT,EAA0B,CAC/B,MAAOpE,CAAAA,IAAI,CAAC,CACVE,GAAG,CAAE,YADK,CAEVmB,KAAK,CAAE,aAFG,CAGVE,EAAE,CAAE,YAHM,CAIVhB,IAAI,CAAE,IAJI,CAAD,CAAX,CAMD","sourcesContent":["import {\n  REFRESH_ROUTE,\n  RELOAD_ROUTE,\n  RELOAD_ALL_TABS,\n  SET_SCROLL_TAB,\n  TOGGLE_TOPICS,\n  SCROLL,\n  SHOW_MODAL,\n  HIDE_MODAL,\n  OPEN_WEB_SIDE_NAV,\n  CLOSE_WEB_SIDE_NAV,\n  SET_WIDTH,\n  REGISTER_GESTURE,\n  LOCK_DRAWER\n} from 'core/actionTypes';\nimport { setButtonTooltip } from 'modules/tooltip/tooltip.actions';\nimport { dispatchNavigatorAction, getScreenSize } from 'app/utils/nav';\nimport { setCommunity } from 'modules/auth/auth.actions'; // eslint-disable-line\n\nlet dismissKeyboard;\nlet safariView;\nlet Orientation;\nlet NavigationActions;\nlet StackActions;\nlet DrawerActions;\nlet Linking;\nlet native;\n\nconst isNative = process.env.WEB !== 'true';\n\nif (process.env.WEB !== 'true') {\n  Orientation = require('react-native-orientation');\n  dismissKeyboard = require('react-native-dismiss-keyboard');\n  safariView = require('react-native-safari-view').default;\n  NavigationActions = require('react-navigation').NavigationActions;\n  StackActions = require('react-navigation').StackActions;\n  DrawerActions = require('react-navigation-drawer').DrawerActions;\n  Linking = require('react-native').Linking;\n  native = true;\n}\n\nexport function showAuth() {\n  return dispatch =>\n    isNative\n      ? dispatchNavigatorAction(NavigationActions.navigate({ routeName: 'auth' }))\n      : dispatch(showModal('login'));\n}\n\nexport function lockDrawer(lock) {\n  return {\n    type: LOCK_DRAWER,\n    payload: lock\n  };\n}\n\nexport function showModal(modal, data) {\n  return {\n    type: SHOW_MODAL,\n    payload: {\n      modal,\n      data\n    }\n  };\n}\n\nexport function hideModal(modal) {\n  return {\n    type: HIDE_MODAL,\n    payload: modal\n  };\n}\n\nexport function scrolling(scroll) {\n  return {\n    type: SCROLL,\n    payload: scroll\n  };\n}\n\nexport function registerGesture(gesture) {\n  return {\n    type: REGISTER_GESTURE,\n    payload: gesture\n  };\n}\n\nexport function closeDrawer() {\n  return () => (native ? dispatchNavigatorAction(DrawerActions.closeDrawer()) : null);\n}\n\nexport function push(route) {\n  return dispatch => {\n    if (dismissKeyboard) dismissKeyboard();\n    if (native) {\n      dispatchNavigatorAction(DrawerActions.closeDrawer());\n      dispatchNavigatorAction(\n        NavigationActions.navigate({ routeName: route.key || route, params: route })\n      );\n    }\n    // check if we need this\n    // console.log('c', route.community, route.community !== 'undefined');\n    if (route.community && route.community !== '') {\n      requestAnimationFrame(() => dispatch(setCommunity(route.community)));\n    }\n  };\n}\n\nexport function pop() {\n  return () => {\n    dispatchNavigatorAction(NavigationActions.back());\n  };\n}\n\nexport function replace(key) {\n  return () => {\n    dispatchNavigatorAction(StackActions.replace({ routeName: key }));\n  };\n}\n\nexport function toggleTopics(showTopics) {\n  return {\n    type: TOGGLE_TOPICS,\n    payload: showTopics\n  };\n}\n\nexport function goToTab(tab) {\n  return () => {\n    if (!native) return;\n    dispatchNavigatorAction(DrawerActions.closeDrawer());\n    dispatchNavigatorAction(\n      NavigationActions.navigate({\n        routeName: tab\n      })\n    );\n  };\n}\n\nexport function resetTabs() {\n  return () => {\n    if (!native) return;\n    const resetAction = StackActions.reset({\n      index: 0,\n      actions: [NavigationActions.navigate({ routeName: 'main' })]\n    });\n    dispatchNavigatorAction(resetAction);\n  };\n}\n\nexport function goToTopic(topic) {\n  return dispatch => {\n    dispatchNavigatorAction(\n      NavigationActions.navigate({\n        routeName: 'discover'\n      })\n    );\n\n    dispatch(\n      push({\n        key: 'discoverTag',\n        title: topic.categoryName || topic,\n        back: true,\n        id: topic._id || topic.topic || topic,\n        topic,\n        gestureResponseDistance: 150\n      })\n    );\n    dispatch(toggleTopics(false));\n  };\n}\n\nexport function setScrollTab(type, view) {\n  return {\n    type: SET_SCROLL_TAB,\n    payload: {\n      type,\n      view\n    }\n  };\n}\n\nexport function setWidth(width) {\n  const screenSize = getScreenSize(width);\n  return {\n    type: SET_WIDTH,\n    payload: {\n      width,\n      screenSize\n    }\n  };\n}\n\nexport function refreshTab(key) {\n  return {\n    type: REFRESH_ROUTE,\n    key\n  };\n}\n\nexport function reloadTab(key) {\n  return {\n    type: RELOAD_ROUTE,\n    key\n  };\n}\n\nexport function reloadAllTabs() {\n  return {\n    type: RELOAD_ALL_TABS\n  };\n}\n\nexport function openWebSideNav() {\n  return {\n    type: OPEN_WEB_SIDE_NAV\n  };\n}\n\nexport function closeWebSideNav() {\n  return {\n    type: CLOSE_WEB_SIDE_NAV\n  };\n}\n\nexport function goToPeople(topic) {\n  return push({\n    key: 'peopleView',\n    component: 'peopleView',\n    title: topic ? '#' + topic : 'People',\n    back: true,\n    id: topic + '_people',\n    topic: topic ? { _id: topic.toLowerCase() } : null\n  });\n}\n\nexport function goToUrl(url, id) {\n  return async dispatch => {\n    try {\n      if (url.match('mailto:')) return Linking.openURL(url);\n      dispatch(setButtonTooltip('upvote', id));\n      if (!safariView) return null;\n      await safariView.isAvailable();\n      Orientation.unlockAllOrientations();\n      return safariView.show({\n        url,\n        readerMode: true\n      });\n    } catch (err) {\n      return dispatch(\n        push(\n          {\n            key: 'articleView',\n            component: 'articleView',\n            back: true,\n            uri: url,\n            id: url,\n            gestureResponseDistance: 120\n          },\n          'home'\n        )\n      );\n    }\n  };\n}\n\nexport function goToComments(post, key, animation) {\n  return push(\n    {\n      key: 'comment',\n      title: 'Comments',\n      community: post.data ? post.data.community : post.community,\n      back: true,\n      id: post._id\n    },\n    key,\n    animation\n  );\n}\n\nexport function goToPost(post, openComment) {\n  return push({\n    key: 'singlePost',\n    title: post.title ? post.title : '',\n    back: true,\n    community: post.data ? post.data.community : post.community,\n    id: post._id,\n    comment: post.comment,\n    commentCount: post.commentCount,\n    openComment\n  });\n}\n\nexport function goToProfile(user, key) {\n  const handle = user.handle || user.replace('@', '');\n  return push(\n    {\n      key: 'profile',\n      title: user.name,\n      back: true,\n      id: handle\n    },\n    key\n  );\n}\n\nexport function viewBlocked() {\n  return push({\n    key: 'blocked',\n    title: 'Blocked Users',\n    id: 'blocked',\n    back: true\n  });\n}\n\nexport function viewInvites() {\n  return push({\n    key: 'invites',\n    title: 'Invite Friends',\n    id: 'invites',\n    back: true\n  });\n}\n\nexport function goToInviteList() {\n  return push({\n    key: 'inviteList',\n    title: 'Invite List',\n    id: 'inviteList',\n    back: true\n  });\n}\n"],"file":"navigation.actions.js"}