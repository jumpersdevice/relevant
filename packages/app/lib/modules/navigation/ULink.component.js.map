{"version":3,"sources":["../../../src/modules/navigation/ULink.component.js"],"names":["styled","StyledLink","StyledNavLink","StyledA","DisabledLink","DisabledLinkText","DisabledLinkView","environment","linkStyles","css","p","styles","colors","blue","mixins","link","margin","padding","color","hc","hu","process","env","WEB","require","default","Touchable","Text","View","Link","cursor","NavLink","a","span","disabled","secondaryText","ULinkComponent","e","callback","props","auth","authrequired","err","isAuthenticated","preventDefault","alert","onClick","onPress","to","children","navLink","external","target","noLink","type","inline","actions","rest","checkAuth","pressHandler","goToUrl","flex","requestAnimationFrame","PureComponent","propTypes","PropTypes","oneOfType","bool","number","string","node","func","array","object","state","dispatch","showModal"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link, NavLink } from 'react-router-dom';\nimport { colors, mixins } from 'app/styles';\nimport { css } from 'styled-components';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { showModal, goToUrl } from 'modules/navigation/navigation.actions';\nimport { Alert } from 'app/utils/alert';\nimport { TouchableOpacity } from 'react-native';\n\nlet styled;\nlet StyledLink;\nlet StyledNavLink;\nlet StyledA;\nlet DisabledLink;\nlet DisabledLinkText;\nlet DisabledLinkView;\nlet environment = 'web';\n\nconst linkStyles = css`\n  ${p => p.styles}\n  color: ${colors.blue};\n  ${mixins.link}\n  ${mixins.margin}\n  ${mixins.padding}\n  ${mixins.color}\n  :hover * {\n    ${p => (p.hc ? `color: ${p.hc}` : '')}\n    ${p => (p.hu ? 'text-decoration: underline' : '')}\n  }\n`;\n\nif (process.env.WEB !== 'true') {\n  environment = 'native';\n  styled = require('styled-components/primitives').default;\n  StyledLink = styled.Touchable``;\n  DisabledLinkText = styled.Text``;\n  DisabledLinkView = styled.View``;\n} else {\n  styled = require('styled-components').default;\n  StyledLink = styled(Link)`\n    ${linkStyles}\n    ${mixins.cursor}\n  `;\n  StyledNavLink = styled(NavLink)`\n    ${linkStyles}\n    ${mixins.cursor}\n  `;\n  StyledA = styled.a`\n    ${linkStyles}\n  `;\n  DisabledLink = styled.span`\n    ${p => (p.disabled ? `color: ${colors.secondaryText};` : '')}\n    ${linkStyles}\n    ${mixins.cursor}\n  `;\n}\n\nexport class ULinkComponent extends PureComponent {\n  checkAuth = (e, callback) => {\n    const {\n      auth,\n      // actions,\n      authrequired\n    } = this.props;\n    if (!authrequired) {\n      try {\n        callback(e);\n      } catch (err) {\n        // handle err\n      }\n    } else if (authrequired && !auth.isAuthenticated) {\n      e.preventDefault();\n      // TODO: use this in future\n      // actions.showModal('auth');\n      Alert().alert('You must be signed in to do this');\n    } else {\n      try {\n        callback(e);\n      } catch (err) {\n        // handle err\n      }\n    }\n  };\n\n  render() {\n    const {\n      onClick,\n      onPress,\n      to,\n      styles,\n      children,\n      navLink,\n      external,\n      target,\n      disabled,\n      noLink,\n      auth,\n      authrequired,\n      type,\n      hu,\n      inline,\n      actions,\n      ...rest\n    } = this.props;\n\n    // ------ WEB -----------\n    if (environment === 'web') {\n      if (disabled || noLink) {\n        return (\n          <DisabledLink\n            {...rest}\n            hu={hu ? 1 : 0}\n            inline={inline ? 1 : 0}\n            styles={styles || ''}\n          >\n            {children}\n          </DisabledLink>\n        );\n      }\n      if (navLink) {\n        return (\n          <StyledNavLink\n            {...rest}\n            hu={hu ? 1 : 0}\n            inline={inline ? 1 : 0}\n            onClick={e => {\n              this.checkAuth(e, onClick);\n            }}\n            to={to || '#'}\n            styles={styles || ''}\n          >\n            {children}\n          </StyledNavLink>\n        );\n      }\n      if (external) {\n        return (\n          <StyledA\n            {...rest}\n            hu={hu ? 1 : 0}\n            inline={inline ? 1 : 0}\n            onClick={e => {\n              this.checkAuth(e, onClick);\n            }}\n            href={to || '#'}\n            target={target}\n            styles={styles || ''}\n          >\n            {children}\n          </StyledA>\n        );\n      }\n      return (\n        <StyledLink\n          {...rest}\n          hu={hu ? 1 : 0}\n          inline={inline ? 1 : 0}\n          onClick={e => {\n            this.checkAuth(e, onClick);\n          }}\n          to={to}\n          target={target}\n          styles={styles || ''}\n        >\n          {children}\n        </StyledLink>\n      );\n    }\n\n    // ------ NATIVE -----------\n    if (disabled || noLink) {\n      if (type === 'text') {\n        return <DisabledLinkText>{children}</DisabledLinkText>;\n      }\n\n      return <DisabledLinkView flex={1}>{children}</DisabledLinkView>;\n    }\n\n    const pressHandler =\n      external && !onPress ? () => actions.goToUrl(to) : () => onPress();\n\n    // return (\n    //   <StyledLink\n    //     // {...rest}\n    //     to={to || '#'}\n    //     onPress={() => requestAnimationFrame(() => pressHandler())}\n    //     // onPress={this.checkAuth(onPress)}\n    //     // styles={styles || ''}\n    //   >\n    //     {children}\n    //   </StyledLink>\n    // );\n\n    return (\n      <TouchableOpacity\n        // {...rest}\n        style={{ flex: inline ? 0 : 1 }}\n        to={to || '#'}\n        onPress={() => requestAnimationFrame(() => pressHandler())}\n        activeOpacity={0.8}\n        // onPress={this.checkAuth(onPress)}\n      >\n        {children}\n      </TouchableOpacity>\n    );\n  }\n}\n\nULinkComponent.propTypes = {\n  inline: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n  hu: PropTypes.bool,\n  type: PropTypes.string,\n  navLink: PropTypes.bool,\n  children: PropTypes.node,\n  to: PropTypes.string,\n  onPress: PropTypes.func,\n  onClick: PropTypes.func,\n  styles: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  external: PropTypes.bool,\n  target: PropTypes.string,\n  disabled: PropTypes.bool,\n  noLink: PropTypes.bool,\n  auth: PropTypes.object,\n  actions: PropTypes.object,\n  authrequired: PropTypes.bool\n};\n\nexport default connect(\n  state => ({\n    auth: state.auth\n  }),\n  dispatch => ({\n    actions: bindActionCreators(\n      {\n        showModal,\n        goToUrl\n      },\n      dispatch\n    )\n  })\n)(ULinkComponent);\n"],"file":"ULink.component.js"}