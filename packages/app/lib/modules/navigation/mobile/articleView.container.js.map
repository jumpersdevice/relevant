{"version":3,"sources":["../../../../src/modules/navigation/mobile/articleView.container.js"],"names":["styles","RWebView","ActionSheet","ActionSheetIOS","Platform","OS","WebView","RNBottomSheet","showActionSheetWithOptions","showBottomSheetWithOptions","ArticleView","props","context","options","cancelButtonIndex","button","Linking","openURL","url","onShare","Share","share","subject","Alert","alert","message","back","bind","state","backButtonEnabled","forwardButtonEnabled","initalUrl","status","loading","progress","onInteraction","InteractionManager","runAfterInteractions","setState","navigation","params","uri","Orientation","unlockAllOrientations","cancel","lockToPortrait","webview","goBack","actions","pop","paddingHorizontal","marginLeft","width","height","require","leftButton","showActionSheet","webMenu","renderBack","renderShare","activity","progressEl","position","bottom","top","left","right","webView","flex","fullWidth","backgroundColor","blue","ref","navState","canGoBack","err","marginTop","renderFooter","Component","PropTypes","object","localStyles","StyleSheet","create","flexDirection","alignItems","justifyContent","borderTopWidth","hairlineWidth","borderTopColor","zIndex","globalStyles","dispatch","navigationActions"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  StyleSheet,\n  View,\n  Image,\n  TouchableHighlight,\n  ActivityIndicator,\n  InteractionManager,\n  Platform,\n  Alert,\n  SafeAreaView,\n  Share,\n  ActionSheetIOS,\n  Linking\n} from 'react-native';\nimport WebView from 'react-native-webview';\nimport PropTypes from 'prop-types';\nimport RNBottomSheet from 'react-native-bottomsheet';\n\n// import Share from 'react-native-share';\nimport Orientation from 'react-native-orientation';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { globalStyles, fullWidth, blue } from 'app/styles/global';\nimport * as navigationActions from 'modules/navigation/navigation.actions';\n\nlet styles;\nlet RWebView;\nlet ActionSheet = ActionSheetIOS;\n\nif (Platform.OS === 'android') {\n  RWebView = WebView;\n  ActionSheet = RNBottomSheet;\n  ActionSheet.showActionSheetWithOptions = RNBottomSheet.showBottomSheetWithOptions;\n} else {\n  RWebView = WebView;\n}\n\nclass ArticleView extends Component {\n  static propTypes = {\n    navigation: PropTypes.object,\n    actions: PropTypes.object\n  };\n\n  constructor(props, context) {\n    super(props, context);\n    // this.showInvestors = this.showInvestors.bind(this);\n    this.back = this.back.bind(this);\n    this.onShare = this.onShare.bind(this);\n    this.state = {\n      backButtonEnabled: false,\n      forwardButtonEnabled: false,\n      url: null,\n      initalUrl: null,\n      status: '',\n      loading: true,\n      progress: 0\n    };\n  }\n\n  componentWillMount() {\n    this.onInteraction = InteractionManager.runAfterInteractions(() => {\n      this.setState({\n        initalUrl: this.props.navigation.state.params.uri,\n        url: this.props.navigation.state.params.uri\n      });\n    });\n    Orientation.unlockAllOrientations();\n  }\n\n  componentWillUnmount() {\n    if (this.onInteraction) this.onInteraction.cancel();\n    Orientation.lockToPortrait();\n  }\n\n  back() {\n    if (this.backButtonEnabled) {\n      return () => this.webview.goBack();\n    }\n    return () => this.props.actions.pop('home');\n  }\n\n  showActionSheet = () => {\n    ActionSheet.showActionSheetWithOptions(\n      {\n        options: ['Open in Browser', 'Share Via...', 'Cancel'],\n        cancelButtonIndex: 4\n      },\n      button => {\n        switch (button) {\n          case 0:\n            return Linking.openURL(this.url);\n          case 1:\n            return this.onShare();\n          default:\n            return null;\n        }\n      }\n    );\n  };\n\n  onShare = async () => {\n    try {\n      await Share.share({\n        url: this.url,\n        subject: 'Article From Relevant'\n      });\n    } catch (err) {\n      Alert.alert(err.message);\n    }\n  };\n\n  renderBack() {\n    const back = (\n      <View style={{ paddingHorizontal: 10, marginLeft: -10 }}>\n        <Image\n          resizeMode={'contain'}\n          style={{ width: 11, height: 19 }}\n          source={require('public/img/backarrow.png')}\n        />\n      </View>\n    );\n    return (\n      <TouchableHighlight\n        style={[styles.leftButton]}\n        underlayColor={'transparent'}\n        onPress={this.back()}\n      >\n        {back}\n      </TouchableHighlight>\n    );\n  }\n\n  renderShare() {\n    return (\n      <TouchableHighlight\n        style={[styles.leftButton]}\n        underlayColor={'transparent'}\n        onPress={() => this.showActionSheet()}\n      >\n        <View style={{ paddingHorizontal: 10, marginLeft: 0 }}>\n          <Image\n            resizeMode={'contain'}\n            style={{ width: 22, height: 22 }}\n            source={require('public/img/shareOut.png')}\n          />\n        </View>\n      </TouchableHighlight>\n    );\n  }\n\n  renderFooter() {\n    return (\n      <View style={styles.webMenu}>\n        {this.renderBack()}\n        {this.renderShare()}\n      </View>\n    );\n  }\n\n  render() {\n    let activity;\n    let progressEl;\n\n    if (this.state.loading) {\n      activity = (\n        <View\n          pointerEvents={'none'}\n          style={{ position: 'absolute', bottom: 0, top: 0, left: 0, right: 0 }}\n        >\n          <ActivityIndicator\n            style={{ position: 'absolute', bottom: 0, top: 0, left: 0, right: 0 }}\n            animating={this.state.loading}\n            size={'small'}\n          />\n        </View>\n      );\n    }\n\n    let webView = <View style={{ flex: 1 }} />;\n    if (this.state.progress > 0 && this.state.progress < 1) {\n      progressEl = (\n        <View\n          style={{\n            position: 'absolute',\n            height: 3,\n            width: fullWidth * this.state.progress,\n            backgroundColor: blue\n          }}\n        />\n      );\n      activity = null;\n    }\n\n    if (this.state.initalUrl) {\n      webView = (\n        <RWebView\n          ref={ref => {\n            this.webview = ref;\n          }}\n          scalesPageToFit\n          onNavigationStateChange={navState => {\n            this.url = navState.url;\n            this.backButtonEnabled = navState.canGoBack;\n          }}\n          onError={err => {\n            Alert.alert(err.message);\n          }}\n          onLoadStart={() => this.setState({ loading: true })}\n          onLoadEnd={() => this.setState({ loading: false })}\n          style={{ flex: 1, backgroundColor: 'transparent', marginTop: 0 }}\n          source={{ uri: this.state.initalUrl }}\n          onProgress={progress =>\n            progress ? this.setState({ progress }) : this.setState({ progress: 0 })\n          }\n        />\n      );\n    }\n\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: 'white' }}>\n        {progressEl}\n        {activity}\n        {webView}\n        {this.renderFooter()}\n      </SafeAreaView>\n    );\n  }\n}\n\nconst localStyles = StyleSheet.create({\n  webMenu: {\n    height: 40,\n    flexDirection: 'row',\n    alignItems: 'stretch',\n    justifyContent: 'space-between',\n    backgroundColor: 'white',\n    borderTopWidth: StyleSheet.hairlineWidth,\n    borderTopColor: 'black',\n    zIndex: 1\n  },\n  leftButton: {\n    flex: 0,\n    width: 50,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\n\nstyles = { ...globalStyles, ...localStyles };\n\nexport default connect(\n  () => ({}),\n  dispatch => ({\n    actions: bindActionCreators(navigationActions, dispatch)\n  })\n)(ArticleView);\n"],"file":"articleView.container.js"}