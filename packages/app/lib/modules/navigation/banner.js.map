{"version":3,"sources":["../../../src/modules/navigation/banner.js"],"names":["mobilePhone","Phone","View","p","screenSize","Wrapper","SplashText","InlineText","fonts","HELVETICA_NEUE_MEDIUM","colors","black","SubHeader","Text","GEORGIA","Splash","props","context","isDismissed","window","addEventListener","onScroll","storage","setState","now","Date","getTime","set","bind","prevProps","prevState","state","phone","style","transform","top","getBoundingClientRect","y","Math","max","hideCloseButton","location","history","overRideDismiss","img","learnMoreUrl","c","container","dismiss","require","width","Component","PropTypes","bool","object","number"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { InlineText, Text, View, Touchable, CloseX } from 'modules/styled/uni';\nimport styled from 'styled-components/primitives';\nimport { colors, fonts } from 'app/styles';\nimport ULink from 'modules/navigation/ULink.component';\nimport { withRouter } from 'react-router-dom';\nimport { storage } from 'utils';\nimport BannerButtons from './bannerButtons';\n\nconst mobilePhone = `\n  position: absolute;\n  bottom: 0;\n  width: 80vw;\n  right: -40px;\n  opacity: .3;\n`;\n\nconst Phone = styled(View)`\n  flex: 0.65;\n  align-self: flex-end;\n  transform-origin: bottom;\n  z-index: -1;\n  max-height: 400px;\n  ${p => (p.screenSize ? mobilePhone : '')}\n`;\n\nconst Wrapper = styled(View)`\n  position: relative;\n  overflow: hidden;\n  max-height: 550px;\n`;\n\nconst SplashText = styled(InlineText)`\n  font-family: ${fonts.HELVETICA_NEUE_MEDIUM};\n  color: ${colors.black};\n`;\n\nconst SubHeader = styled(Text)`\n  font-family: ${fonts.GEORGIA};\n  display: inline;\n`;\n\nclass Splash extends Component {\n  static propTypes = {\n    hideCloseButton: PropTypes.bool,\n    location: PropTypes.object,\n    history: PropTypes.object,\n    screenSize: PropTypes.number,\n    overRideDismiss: PropTypes.bool\n  };\n\n  constructor(props, context) {\n    super(props, context);\n    this.onScroll = this.onScroll.bind(this);\n  }\n\n  state = {\n    isDismissed: true\n  };\n\n  componentDidMount = async () => {\n    window.addEventListener('scroll', this.onScroll);\n    const isDismissed = await storage.isDismissed('splashDismissed', 5);\n    this.setState({\n      isDismissed\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.isDismissed !== this.state.isDismissed) {\n      this.onScroll();\n    }\n  }\n\n  onScroll() {\n    if (!this.phone) return;\n    this.phone.style.transform = '';\n    const top = this.phone.getBoundingClientRect().top - 100;\n    const y = Math.max(-top / 3, 0);\n    this.phone.style.transform = `translateX(0) translateY(${y}px)`;\n  }\n\n  dismiss = () => {\n    const now = new Date().getTime();\n    storage.set('splashDismissed', now);\n    this.setState({ isDismissed: true });\n  };\n\n  render() {\n    const {\n      hideCloseButton,\n      location,\n      history,\n      screenSize,\n      overRideDismiss\n    } = this.props;\n\n    if (this.state.isDismissed && !overRideDismiss) {\n      return null;\n    }\n\n    const img = '/img/hand-transparent.png';\n    const learnMoreUrl =\n      'https://blog.relevant.community/relevant-curated-by-communities-not-clicks-ba8d346c47da';\n\n    return (\n      <Wrapper\n        ref={c => (this.container = c)}\n        display=\"flex\"\n        justify=\"flex-start\"\n        align=\"center\"\n        fdirection=\"row\"\n        of=\"hidden\"\n        bb\n      >\n        {hideCloseButton ? null : (\n          <Touchable onPress={this.dismiss}>\n            <CloseX\n              w={3}\n              h={3}\n              top={[6, 4]}\n              right={[6, 3]}\n              resizeMode={'contain'}\n              source={require('public/img/x.png')}\n            />\n          </Touchable>\n        )}\n        <View\n          m={['6 0 6 12', '3 4 2 2']}\n          flex={1}\n          justify=\"center\"\n          align={['flex-start', 'stretch']}\n          fdirection=\"column\"\n        >\n          <View>\n            <SplashText fs={[6, 3]} lh={[9, 4.2]}>\n              <Text>Information curated by humans, not algorithms.</Text>\n            </SplashText>\n            <View mt={[5, 2]} mb={[6, 0]}>\n              <SubHeader fs={[2.5, 1.75]} lh={[4, 3]}>\n                Join a <ULink to=\"/communities\">community</ULink>, curate content and earn\n                rewards.{' '}\n                <ULink\n                  to={learnMoreUrl}\n                  external\n                  target=\"_blank\"\n                  display=\"inline\"\n                  td=\"underline\"\n                >\n                  Learn More\n                </ULink>\n              </SubHeader>\n            </View>\n          </View>\n          <BannerButtons location={location} history={history} />\n        </View>\n        <Phone screenSize={screenSize} flexshrink={[1, 0]}>\n          <img\n            style={{ width: '100%' }}\n            ref={c => (this.phone = c)}\n            onLoad={this.onScroll}\n            src={img}\n            alt=\"phone\"\n          />\n        </Phone>\n      </Wrapper>\n    );\n  }\n}\n\nexport default withRouter(Splash);\n"],"file":"banner.js"}