{"version":3,"sources":["../../../src/modules/animation/upvoteAnimation.component.js"],"names":["HANDLE_ANIMATIONS","Container","styled","View","isNative","UpvoteAnimation","type","state","animation","currentType","includes","index","parent","horizontal","amount","voteEls","setVoteEls","numEls","setNumEls","initAnimation","Array","keys","destroy","key","coinKey","els","slice","map","i"],"mappings":"8cAAA,qDACA,uCACA,gFACA,oCACA,8DACA,8E,gHAEA,GAAMA,CAAAA,iBAAiB,CAAG,CAAC,QAAD,CAAW,KAAX,CAA1B,CAEA,GAAMC,CAAAA,SAAS,CAAGC,oBAAOC,IAAV,sJACDC,iBAAW,UAAX,CAAwB,OADvB,CAAf,CASe,QAASC,CAAAA,eAAT,EAA2B,CACxC,GAAMC,CAAAA,IAAI,CAAG,4BAAY,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACC,SAAN,CAAgBC,WAApB,EAAjB,CAAb,CADwC,iBAEM,4BAAY,SAAAF,KAAK,QAC7DP,CAAAA,iBAAiB,CAACU,QAAlB,CAA2BJ,IAA3B,EAAmCC,KAAK,CAACC,SAAN,CAAgBF,IAAhB,CAAnC,CAA2D,EADE,EAAjB,CAFN,CAEhCK,KAFgC,cAEhCA,KAFgC,CAEzBC,MAFyB,cAEzBA,MAFyB,CAEjBC,UAFiB,cAEjBA,UAFiB,CAELC,MAFK,cAELA,MAFK,eAMV,oBAAS,EAAT,CANU,qDAMjCC,OANiC,eAMxBC,UANwB,8BAOZ,oBAAS,EAAT,CAPY,sDAOjCC,MAPiC,eAOzBC,SAPyB,eASxC,qBAAU,UAAM,CACd,QAASC,CAAAA,aAAT,EAAyB,CACvB,GAAI,CAACP,MAAL,CAAa,OACbI,UAAU,iCAAKI,KAAK,CAAC,EAAD,CAAL,CAAUC,IAAV,EAAL,EAAV,CACA,GAAI,CAACP,MAAL,CAAa,OACbI,SAAS,iCAAKE,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,EAAL,EAAT,CACD,CACDF,aAAa,GAEb,MAAO,WAAM,CACXH,UAAU,CAAC,EAAD,CAAV,CACAE,SAAS,CAAC,EAAD,CAAT,CACD,CAHD,CAID,CAbD,CAaG,CAACP,KAAD,CAAQC,MAAR,CAAgBE,MAAhB,CAbH,EAeA,GAAI,CAACd,iBAAiB,CAACU,QAAlB,CAA2BJ,IAA3B,CAAL,CAAuC,MAAO,KAAP,CAEvC,QAASgB,CAAAA,OAAT,CAAiBC,GAAjB,CAAsBC,OAAtB,CAA+B,CAC7B,GAAI,MAAOD,CAAAA,GAAP,GAAe,QAAnB,CAA6B,CAC3BP,UAAU,CAAC,SAAAS,GAAG,kDAAQA,GAAG,CAACC,KAAJ,CAAU,CAAV,CAAaH,GAAb,CAAR,kCAA8BE,GAAG,CAACC,KAAJ,CAAUH,GAAG,CAAG,CAAhB,CAA9B,IAAJ,CAAV,CACD,CACD,GAAI,MAAOC,CAAAA,OAAP,GAAmB,QAAvB,CAAiC,CAC/BN,SAAS,CAAC,SAAAO,GAAG,kDAAQA,GAAG,CAACC,KAAJ,CAAU,CAAV,CAAaF,OAAb,CAAR,kCAAkCC,GAAG,CAACC,KAAJ,CAAUF,OAAO,CAAG,CAApB,CAAlC,IAAJ,CAAT,CACD,CACF,CAED,MACE,8BAAC,SAAD,EAAW,aAAa,CAAE,MAA1B,gEACGT,OAAO,CAACY,GAAR,CAAY,SAAAC,CAAC,QACZ,8BAAC,aAAD,EACE,IAAI,CAAEtB,IADR,CAEE,UAAU,CAAEO,UAFd,CAGE,OAAO,CAAES,OAHX,CAIE,MAAM,CAAEV,MAJV,CAKE,GAAG,CAAEgB,CALP,CAME,UAAU,CAAEA,CANd,gEADY,EAAb,CADH,CAWGX,MAAM,CAACU,GAAP,CAAW,SAAAC,CAAC,QACX,8BAAC,qBAAD,EACE,OAAO,CAAEN,OADX,CAEE,MAAM,CAAEV,MAFV,CAGE,MAAM,CAAEE,MAHV,CAIE,GAAG,CAAEc,CAJP,CAKE,UAAU,CAAEA,CALd,CAME,UAAU,CAAEf,UANd,gEADW,EAAZ,CAXH,CADF,CAwBD","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport styled from 'styled-components/primitives';\nimport { isNative } from 'styles';\nimport Vote from './vote.component';\nimport VoteNumber from './upvoteNumber.component';\n\nconst HANDLE_ANIMATIONS = ['upvote', 'bet'];\n\nconst Container = styled.View`\n  position: ${isNative ? 'absolute' : 'fixed'};\n  z-index: 10000;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n`;\n\nexport default function UpvoteAnimation() {\n  const type = useSelector(state => state.animation.currentType);\n  const { index, parent, horizontal, amount } = useSelector(state =>\n    HANDLE_ANIMATIONS.includes(type) ? state.animation[type] : {}\n  );\n\n  const [voteEls, setVoteEls] = useState([]);\n  const [numEls, setNumEls] = useState([]);\n\n  useEffect(() => {\n    function initAnimation() {\n      if (!parent) return;\n      setVoteEls([...Array(10).keys()]);\n      if (!amount) return;\n      setNumEls([...Array(1).keys()]);\n    }\n    initAnimation();\n\n    return () => {\n      setVoteEls([]);\n      setNumEls([]);\n    };\n  }, [index, parent, amount]);\n\n  if (!HANDLE_ANIMATIONS.includes(type)) return null;\n\n  function destroy(key, coinKey) {\n    if (typeof key === 'number') {\n      setVoteEls(els => [...els.slice(0, key), ...els.slice(key + 1)]);\n    }\n    if (typeof coinKey === 'number') {\n      setNumEls(els => [...els.slice(0, coinKey), ...els.slice(coinKey + 1)]);\n    }\n  }\n\n  return (\n    <Container pointerEvents={'none'}>\n      {voteEls.map(i => (\n        <Vote\n          type={type}\n          horizontal={horizontal}\n          destroy={destroy}\n          parent={parent}\n          key={i}\n          specialKey={i}\n        />\n      ))}\n      {numEls.map(i => (\n        <VoteNumber\n          destroy={destroy}\n          parent={parent}\n          amount={amount}\n          key={i}\n          specialKey={i}\n          horizontal={horizontal}\n        />\n      ))}\n    </Container>\n  );\n}\n"],"file":"upvoteAnimation.component.js"}