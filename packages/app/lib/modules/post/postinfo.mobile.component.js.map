{"version":3,"sources":["../../../src/modules/post/postinfo.mobile.component.js"],"names":["GradientContainer","View","TitleContainer","IMAGE_HEIGHT","PREVIEW_HEIGHT","ImagePost","propTypes","noLink","PropTypes","bool","link","object","post","singlePost","preview","goToPost","func","props","dispatch","imageUrl","favIcon","domain","title","image","imgBg","uri","imageHeight","postContent","url","flex"],"mappings":"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","sourcesContent":["import React, { memo } from 'react';\nimport { useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport ULink from 'modules/navigation/ULink.component';\nimport Gradient from 'modules/post/gradient.component';\nimport styled from 'styled-components/primitives';\nimport { View, Image } from 'modules/styled/uni';\nimport { getFavIcon, getTitle } from 'app/utils/post';\nimport UrlPreview from 'modules/createPost/mobile/urlPreview.component';\nimport { goToUrl } from 'modules/navigation/navigation.actions';\nimport PostTitle from './postTitle.component';\n\nconst GradientContainer = styled(View)`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n`;\n\nconst TitleContainer = styled(View)`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nconst IMAGE_HEIGHT = 30;\nconst PREVIEW_HEIGHT = 16;\n\nImagePost.propTypes = {\n  noLink: PropTypes.bool,\n  link: PropTypes.object,\n  post: PropTypes.object,\n  singlePost: PropTypes.bool,\n  preview: PropTypes.bool,\n  goToPost: PropTypes.func\n};\n\nexport default memo(ImagePost);\n\nfunction ImagePost(props) {\n  const dispatch = useDispatch();\n  const { post, link, goToPost, preview, noLink } = props;\n\n  if (!post) return null;\n  const imageUrl = get(link, 'image');\n  const favIcon = get(link, 'domain', null) && getFavIcon(link.domain);\n  const title = getTitle({ post, link });\n  const image = imageUrl || favIcon;\n\n  const imgBg = image && (\n    <View flex={1}>\n      <Image resizeMode=\"cover\" flex={1} source={{ uri: image }} />\n      <GradientContainer>\n        <Gradient flex={1} title={title} image={true} preview={preview} />\n      </GradientContainer>\n    </View>\n  );\n\n  const imageHeight = preview ? PREVIEW_HEIGHT : IMAGE_HEIGHT;\n  const postContent = (\n    <View\n      // shouldRasterizeIOS\n      // renderToHardwareTextureAndroid\n      fdirection={'row'}\n    >\n      <ULink\n        onPress={goToPost || (() => dispatch(goToUrl(post.url)))}\n        external\n        to={post.url}\n        target=\"_blank\"\n        noLink={noLink}\n        style={{ flex: 1 }}\n      >\n        <View h={imageHeight}>{imgBg || <Gradient flex={1} title={title} />}</View>\n      </ULink>\n\n      <TitleContainer fdirection={'row'} p={'0 2 2 2'} pl={preview ? 2 : 0}>\n        <PostTitle ml={2} {...props} title={title} mobile />\n      </TitleContainer>\n    </View>\n  );\n\n  if (preview) {\n    return (\n      <UrlPreview\n        size=\"small\"\n        urlPreview={link || post}\n        title={title}\n        image={image}\n        noLink={noLink}\n      />\n    );\n  }\n\n  if (post.url) return <View>{postContent}</View>;\n  return postContent;\n}\n"],"file":"postinfo.mobile.component.js"}