{"version":3,"sources":["../../../src/modules/post/postinfo.component.js"],"names":["PostInfo","propTypes","noLink","PropTypes","bool","link","object","post","singlePost","preview","showImage","setShowImage","showFavIcon","setShowFavIcon","screenSize","state","navigation","loading","imageUrl","favIcon","domain","title","postImage","url","POST_IMAGE_W","POST_IMAGE_H","uri","postContent"],"mappings":"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","sourcesContent":["import React, { memo, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport ULink from 'modules/navigation/ULink.component';\nimport Gradient from 'modules/post/gradient.component';\nimport { ActivityIndicator } from 'react-native-web';\nimport { View, Image } from 'modules/styled/uni';\nimport { getTitle, getFavIcon } from 'app/utils/post';\nimport PostInfoMobile from 'modules/post/postinfo.mobile.component';\nimport { POST_IMAGE_W, POST_IMAGE_H } from 'styles/layout';\nimport PostTitle from './postTitle.component';\n\nPostInfo.propTypes = {\n  noLink: PropTypes.bool,\n  link: PropTypes.object,\n  post: PropTypes.object,\n  singlePost: PropTypes.bool,\n  preview: PropTypes.bool\n};\n\nexport default memo(PostInfo);\n\nfunction PostInfo({ post, link, noLink, singlePost, preview }) {\n  const [showImage, setShowImage] = useState(true);\n  const [showFavIcon, setShowFavIcon] = useState(true);\n  const screenSize = useSelector(state => state.navigation.screenSize);\n\n  if (screenSize)\n    return (\n      <PostInfoMobile\n        preview={preview}\n        post={post}\n        singlePost={singlePost}\n        noLink={noLink}\n        link={link}\n      />\n    );\n\n  if (post.loading) {\n    return (\n      <View>\n        <ActivityIndicator />\n      </View>\n    );\n  }\n  if (!post) return null;\n\n  const imageUrl = get(link, 'image') || null;\n  const favIcon = get(link, 'domain') && getFavIcon(link.domain);\n  const title = getTitle({ post, link });\n\n  const postImage = (\n    <ULink external to={post.url} target=\"_blank\" noLink={noLink}>\n      <View flex={1} w={POST_IMAGE_W} h={POST_IMAGE_H} mr={2}>\n        {showImage && imageUrl ? (\n          <Image\n            flex={1}\n            source={{ uri: imageUrl }}\n            onError={() => setShowImage(false)}\n          />\n        ) : showFavIcon && favIcon ? (\n          <Image\n            resizeMode=\"cover\"\n            flex={1}\n            source={{ uri: favIcon }}\n            onError={() => setShowFavIcon(false)}\n          />\n        ) : (\n          <Gradient flex={1} title={title} />\n        )}\n      </View>\n    </ULink>\n  );\n\n  const postContent = (\n    <View fdirection={['row', 'column']}>\n      {postImage}\n      <PostTitle\n        post={post}\n        link={link}\n        noLink={noLink}\n        title={title}\n        singlePost={singlePost}\n        preview={preview}\n      />\n    </View>\n  );\n\n  if (post.url) return <View>{postContent}</View>;\n  return postContent;\n}\n"],"file":"postinfo.component.js"}