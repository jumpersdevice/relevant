{"version":3,"sources":["../../../src/modules/post/invest.reducer.js"],"names":["initialState","userInvestments","investments","myInvestments","myEarnings","posts","loaded","loadedProfileInv","voteSuccess","state","action","type","types","UPDATE_POST_INVESTMENTS","payload","LOADING_POST_INVESTMENTS","SET_POST_INVESTMENTS","post","postId","slice","index","data","result","entities","UPDATE_EARNINGS","earnings","forEach","earning","id","userId","currentInvestments","LOGOUT_USER"],"mappings":"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","sourcesContent":["import * as types from 'core/actionTypes';\n\nconst initialState = {\n  userInvestments: {},\n  investments: {},\n  myInvestments: [],\n  myEarnings: {},\n  posts: {},\n  loaded: {},\n  loadedProfileInv: false,\n  voteSuccess: null\n};\n\nexport default function investments(state = initialState, action) {\n  switch (action.type) {\n    case types.UPDATE_POST_INVESTMENTS: {\n      return {\n        ...state,\n        voteSuccess: action.payload\n      };\n    }\n\n    case types.LOADING_POST_INVESTMENTS: {\n      return {\n        ...state,\n        loaded: {\n          ...state.loaded,\n          [action.payload]: false\n        }\n      };\n    }\n\n    case types.SET_POST_INVESTMENTS: {\n      const post = state.posts[action.payload.postId] || [];\n      return {\n        ...state,\n        posts: {\n          ...state.posts,\n          [action.payload.postId]: [\n            ...post.slice(0, action.payload.index),\n            ...action.payload.data.result.investments\n          ]\n        },\n        loaded: {\n          ...state.loaded,\n          [action.payload.postId]: true\n        },\n        investments: {\n          ...state.investments,\n          ...action.payload.data.entities.investments\n        }\n      };\n    }\n\n    case types.UPDATE_EARNINGS: {\n      const earnings = {};\n      action.payload.forEach(earning => {\n        earnings[earning.post] = earning;\n      });\n      return {\n        ...state,\n        myEarnings: {\n          ...state.myEarnings,\n          ...earnings\n        }\n      };\n    }\n\n    case 'SET_INVESTMENTS': {\n      const id = action.payload.userId;\n      const currentInvestments = state.userInvestments[id] || [];\n      return {\n        ...state,\n        userInvestments: {\n          ...state.userInvestments,\n          [id]: [\n            ...currentInvestments.slice(0, action.payload.index),\n            ...action.payload.investments.result.investments\n          ]\n        },\n        investments: {\n          ...state.investments,\n          ...action.payload.investments.entities.investments\n        },\n        loadedProfileInv: true\n      };\n    }\n\n    case 'LOADING_INVESTMENTS': {\n      return {\n        ...state,\n        loadedProfileInv: false\n      };\n    }\n\n    case types.LOGOUT_USER: {\n      return { ...initialState };\n    }\n\n    default:\n      return state;\n  }\n}\n"],"file":"invest.reducer.js"}