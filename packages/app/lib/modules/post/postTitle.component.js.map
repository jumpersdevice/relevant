{"version":3,"sources":["../../../src/modules/post/postTitle.component.js"],"names":["PostTitle","propTypes","mobile","PropTypes","bool","preview","singlePost","children","node","noLink","link","object","post","title","string","dispatch","currentCommunity","state","auth","community","postCommunity","data","c","colors","white","titleLines","parentPost","postUrl","titleEl","url","history","push","hasAuthor","articleAuthor","length","authorEl","join","domainEl","blue","domain","renderCommentLink","commentCount","tags","overflow","CommentEl","TagEl","map","tag"],"mappings":"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","sourcesContent":["import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Tag from 'modules/tag/tag.component';\nimport get from 'lodash/get';\nimport ULink from 'modules/navigation/ULink.component';\nimport { View, Title, SecondaryText } from 'modules/styled/uni';\nimport { colors } from 'app/styles';\nimport { getPostUrl } from 'app/utils/post';\nimport { goToUrl, goToPost } from 'modules/navigation/navigation.actions';\nimport history from 'modules/navigation/history';\n\nPostTitle.propTypes = {\n  mobile: PropTypes.bool,\n  preview: PropTypes.bool,\n  singlePost: PropTypes.bool,\n  children: PropTypes.node,\n  noLink: PropTypes.bool,\n  link: PropTypes.object,\n  post: PropTypes.object,\n  title: PropTypes.string\n};\n\nexport default memo(PostTitle);\n\nfunction PostTitle({ children, post, link, title, noLink, mobile, singlePost, preview }) {\n  const dispatch = useDispatch();\n\n  const currentCommunity = useSelector(state => state.auth.community);\n  const postCommunity = post && post.data && post.data.community;\n  const community = postCommunity || currentCommunity;\n\n  const c = mobile ? colors.white : null;\n\n  if (!post) return null;\n  const titleLines = preview && mobile ? 2 : 3;\n\n  const parentPost = post.parentPost || post;\n  const postUrl = getPostUrl(community, parentPost);\n\n  const titleEl = link ? (\n    <ULink\n      to={post.url}\n      external\n      target={'_blank'}\n      noLink={noLink}\n      onClick={() => history.push(postUrl)}\n      onPress={() => {\n        singlePost\n          ? dispatch(goToUrl(post.url))\n          : dispatch(goToUrl(post.url)) && dispatch(goToPost(post));\n      }}\n    >\n      <Title\n        inline={1}\n        lh={mobile ? 2.7 : null}\n        c={c}\n        flex={1}\n        numberOfLines={titleLines}\n      >\n        {title}\n      </Title>\n    </ULink>\n  ) : (\n    <Title inline={1} c={c} flex={1} numberOfLines={titleLines}>\n      {title}\n    </Title>\n  );\n\n  const hasAuthor = link && link.articleAuthor && link.articleAuthor.length;\n  const authorEl = hasAuthor ? (\n    <SecondaryText c={c} numberOfLines={1} mr={0.5}>\n      {link.articleAuthor.join(', ')} â€¢\n    </SecondaryText>\n  ) : null;\n\n  const domainEl = get(link, 'domain') && (\n    <View fdirection={'row'} numberOfLines={1} align={'flex-end'}>\n      {authorEl}\n      <ULink\n        type=\"text\"\n        external\n        to={post.url}\n        hc={colors.blue}\n        hu\n        target=\"_blank\"\n        disabled={!postUrl}\n        noLink={noLink}\n        onPress={() => dispatch(goToUrl(post.url))}\n      >\n        <SecondaryText c={c || null} inline={1}>\n          {link.domain && `${link.domain}\\u00A0\\u2197\\uFE0E`}\n        </SecondaryText>\n      </ULink>\n    </View>\n  );\n\n  const renderCommentLink = post.commentCount && postUrl;\n  const tags = get(post, 'tags', []);\n\n  return (\n    <View fdirection={'column'} flex={1} justify={mobile ? 'center' : 'flex-start'}>\n      <View>\n        {titleEl}\n        <View mt={mobile ? 1 : 0} c={c}>\n          {domainEl}\n        </View>\n      </View>\n      {renderCommentLink || tags.length ? (\n        <View\n          fdirection={'row'}\n          wrap={'wrap'}\n          align={'flex-end'}\n          h={2}\n          style={{ overflow: 'hidden' }}\n          c={c}\n          mt={mobile ? 1 : 0.5}\n          numberOfLines={mobile ? 1 : null}\n        >\n          <CommentEl post={post} c={c} postUrl={postUrl} noLink={noLink} />\n          <TagEl post={post} c={c} noLink={noLink} community={community} />\n        </View>\n      ) : null}\n      {children}\n    </View>\n  );\n}\n\nCommentEl.propTypes = {\n  post: PropTypes.object,\n  noLink: PropTypes.bool,\n  c: PropTypes.string\n};\n\nexport function CommentEl({ post, noLink, c }) {\n  const dispatch = useDispatch();\n  const parentPost = post.parentPost || post;\n\n  const currentCommunity = useSelector(state => state.auth.community);\n  const postCommunity = post && post.data && post.data.community;\n  const community = postCommunity || currentCommunity;\n  const postUrl = getPostUrl(community, parentPost);\n  if (!post.commentCount) return null;\n\n  return (\n    <ULink\n      type=\"text\"\n      to={postUrl}\n      hu\n      noLink={noLink}\n      onPress={() => dispatch(goToPost(post))}\n      inline={1}\n    >\n      <SecondaryText mr={1} c={c || colors.blue}>\n        {post.commentCount} Comment{post.commentCount > 1 ? 's' : ''}\n      </SecondaryText>\n    </ULink>\n  );\n}\n\nTagEl.propTypes = {\n  post: PropTypes.object,\n  noLink: PropTypes.bool,\n  c: PropTypes.string\n};\n\nexport function TagEl({ noLink, c, post }) {\n  const tags = get(post, 'tags', []);\n  const currentCommunity = useSelector(state => state.auth.community);\n  const postCommunity = post && post.data && post.data.community;\n  const community = postCommunity || currentCommunity;\n\n  if (!tags.length) return null;\n\n  return tags.map(tag => (\n    <Tag\n      name={tag}\n      community={community || (post.data && post.data.community)}\n      key={tag}\n      noLink={noLink}\n      c={c || colors.blue}\n    />\n  ));\n}\n"],"file":"postTitle.component.js"}