{"version":3,"sources":["../../../src/modules/tag/tag.actions.js"],"names":["Alert","alert","reqOptions","storage","getToken","tk","credentials","headers","Accept","Authorization","setDiscoverTags","data","type","types","SET_DISCOVER_TAGS","payload","selectTag","tag","deselectTag","updateParentTag","UPDATE_PARENT_TAG","setParentTags","SET_PARENT_TAGS","getDiscoverTags","dispatch","fetch","process","env","API_SERVER","method","then","api","handleErrors","response","json","responseJSON","catch","err","message","searchTags","error","createTag","body","JSON","stringify","status","updateTag","getParentTags"],"mappings":"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","sourcesContent":["import * as types from 'core/actionTypes';\nimport { storage, api, alert } from 'app/utils';\n\nconst Alert = alert.Alert();\n\nconst reqOptions = async () => {\n  const tk = await storage.getToken();\n  return {\n    credentials: 'include',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${tk}`\n    }\n  };\n};\n\nexport function setDiscoverTags(data) {\n  return {\n    type: types.SET_DISCOVER_TAGS,\n    payload: data\n  };\n}\n\nexport function selectTag(tag) {\n  return {\n    type: 'SELECT_TAG',\n    payload: tag\n  };\n}\n\nexport function deselectTag(tag) {\n  return {\n    type: 'DESELECT_TAG',\n    payload: tag\n  };\n}\n\nexport function updateParentTag(tag) {\n  return {\n    type: types.UPDATE_PARENT_TAG,\n    payload: tag\n  };\n}\n\nexport function setParentTags(data) {\n  return {\n    type: types.SET_PARENT_TAGS,\n    payload: data\n  };\n}\n\nexport function getDiscoverTags() {\n  return dispatch => {\n    fetch(process.env.API_SERVER + '/api/tag?sort=count', {\n      credentials: 'include',\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(api.handleErrors)\n      .then(response => response.json())\n      .then(responseJSON => {\n        dispatch(setDiscoverTags(responseJSON));\n      })\n      .catch(err => Alert('Error getting tags ' + err.message));\n  };\n}\n\nexport function searchTags(tag) {\n  return dispatch => {\n    if (!tag || tag === '') {\n      return dispatch(setDiscoverTags([]));\n    }\n    return fetch(process.env.API_SERVER + '/api/tag/search/' + tag, {\n      credentials: 'include',\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(response => response.json())\n      .then(responseJSON => {\n        dispatch(setDiscoverTags(responseJSON));\n      })\n      .catch(error => {\n        Alert('Search error ', error);\n      });\n  };\n}\n\nexport function createTag(tag) {\n  return async dispatch =>\n    fetch(process.env.API_SERVER + '/api/tag', {\n      ...(await reqOptions()),\n      method: 'POST',\n      body: JSON.stringify(tag)\n    })\n      .then(response => response.json())\n      .then(responseJSON => {\n        dispatch(setParentTags([responseJSON]));\n      })\n      .catch(error => {\n        Alert('error creating tag ' + error);\n        return { status: false, data: error };\n      });\n}\n\nexport function updateTag(tag) {\n  return async dispatch =>\n    fetch(process.env.API_SERVER + '/api/tag/categories', {\n      ...(await reqOptions()),\n      method: 'PUT',\n      body: JSON.stringify(tag)\n    })\n      .then(response => response.json())\n      .then(responseJSON => {\n        dispatch(updateParentTag(responseJSON));\n      });\n}\n\nexport function getParentTags() {\n  return async dispatch => {\n    fetch(process.env.API_SERVER + '/api/tag/categories?active', {\n      method: 'GET',\n      ...(await reqOptions())\n    })\n      .then(response => response.json())\n      .then(responseJSON => {\n        dispatch(setParentTags(responseJSON));\n      })\n      .catch(error => Alert('parents error', error));\n  };\n}\n"],"file":"tag.actions.js"}