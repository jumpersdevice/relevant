{"version":3,"sources":["../../../../src/modules/discover/mobile/discoverHeader.component.js"],"names":["DiscoverHeader","props","context","state","searchTerm","transY","Animated","Value","offsetY","headerHeight","lastOffset","onScroll","bind","currentOffset","event","nativeEvent","contentOffset","y","threshold","Platform","OS","contentSize","height","setValue","diff","top","Math","max","_value","min","clearTimeout","scrollEnd","setTimeout","onScrollEnd","showHeader","hideHeader","moveHeader","timing","toValue","duration","easing","Easing","quad","useNativeDriver","start","position","width","fullWidth","zIndex","backgroundColor","transform","translateY","overflow","c","header","layout","setPostTop","children","Component","PropTypes","func","node"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Animated, Easing, Platform } from 'react-native';\nimport PropTypes from 'prop-types';\nimport { fullWidth } from 'app/styles/global';\n\nexport default class DiscoverHeader extends Component {\n  static propTypes = {\n    setPostTop: PropTypes.func,\n    children: PropTypes.node\n  };\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      searchTerm: null,\n      transY: new Animated.Value(0),\n      offsetY: new Animated.Value(0)\n    };\n    this.headerHeight = 50;\n    this.lastOffset = -50;\n    this.onScroll = this.onScroll.bind(this);\n    this.currentOffset = -50;\n  }\n\n  onScroll(event) {\n    this.currentOffset = event.nativeEvent.contentOffset.y;\n    const threshold = Platform.OS === 'android' ? 0 : -this.headerHeight;\n    if (!event.nativeEvent.contentSize.height || this.currentOffset <= threshold) {\n      this.state.offsetY.setValue(0);\n      return;\n    }\n\n    const diff = this.lastOffset - this.currentOffset;\n\n    let top = Math.max(this.state.offsetY._value + diff, -this.headerHeight);\n    top = Math.min(top, 0);\n\n    this.state.offsetY.setValue(top);\n    this.lastOffset = this.currentOffset;\n\n    clearTimeout(this.scrollEnd);\n    this.scrollEnd = setTimeout(() => this.onScrollEnd(), 100);\n  }\n\n  onScrollEnd() {\n    if (this.state.offsetY._value >= -this.headerHeight / 2) {\n      this.showHeader();\n    } else this.hideHeader();\n  }\n\n  hideHeader() {\n    const moveHeader = this.headerHeight * -1;\n    Animated.timing(this.state.offsetY, {\n      toValue: moveHeader,\n      duration: 200,\n      easing: Easing.quad,\n      useNativeDriver: true\n    }).start();\n  }\n\n  showHeader() {\n    Animated.timing(this.state.offsetY, {\n      toValue: 0,\n      duration: 200,\n      easing: Easing.quad,\n      useNativeDriver: true\n    }).start();\n  }\n\n  render() {\n    return (\n      <Animated.View\n        style={{\n          position: 'absolute',\n          top: 0,\n          width: fullWidth,\n          zIndex: 1000,\n          backgroundColor: 'white',\n          transform: [{ translateY: this.state.offsetY }],\n          overflow: 'hidden'\n        }}\n        ref={c => {\n          this.header = c;\n        }}\n        onLayout={event => {\n          const { height } = event.nativeEvent.layout;\n          if (this.headerHeight === height) return;\n          this.headerHeight = height;\n          this.props.setPostTop(this.headerHeight);\n          this.layout = true;\n        }}\n      >\n        {this.props.children}\n      </Animated.View>\n    );\n  }\n}\n"],"file":"discoverHeader.component.js"}