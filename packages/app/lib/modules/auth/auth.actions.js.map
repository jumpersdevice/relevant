{"version":3,"sources":["../../../src/modules/auth/auth.actions.js"],"names":["Alert","alert","PushNotification","userDefaults","Analytics","ReactGA","TwitterCT","process","env","WEB","require","analytics","RNSKBucket","default","APP_GROUP_ID","reqOptions","storage","getToken","token","credentials","headers","Accept","Authorization","setCommunity","community","dispatch","type","types","SET_COMMUNITY","payload","setInviteCode","code","SET_INVITE_CODE","updateInvite","invite","UPDATE_INVITE","sendPong","updateAuthUser","user","UPDATE_AUTH_USER","setUser","SET_USER","setSelectedUserData","data","setUserIndex","userIndex","SET_USER_INDEX","setPreUser","preUser","setAuthStatusText","text","loginUserSuccess","LOGIN_USER_SUCCESS","loginUserFailure","LOGIN_USER_FAILURE","loginUserRequest","LOGIN_USER_REQUEST","logout","LOGOUT_USER","cacheCommunity","api","request","method","endpoint","path","body","JSON","stringify","console","log","logoutAction","removeToken","then","_id","setCurrentTooltip","step","SET_ONBOARDING_STEP","updateUser","preventLocalUpdate","res","message","updateNotificationSettings","notificationSettings","subscription","deviceTokens","setDeviceToken","removeDeviceToken","auth","index","indexOf","deviceToken","splice","enableMobileNotifications","checkIfEnbaled","mobile","all","configurePushNotifications","registerPushNotification","configure","onNotification","notification","userInteraction","postId","comment","navigationActions","goToPost","title","senderID","permissions","badge","sound","popInitialNotification","requestPermissions","onRegister","set","newUser","push","setupUser","errorActions","setError","tooltipActions","tooltipReady","getUser","callback","getState","state","checkIfEnabled","memberships","ok","setOnboardingStep","fetch","API_SERVER","response","json","responseJSON","catch","webOnboard","params","loginUser","setToken","userOnline","checkUser","string","omitSelf","error","createUser","invitecode","handleErrors","event","category","action","signUp","logEvent","errors","Object","keys","forEach","key","match","updateHandle","result","sendConfirmation","email","err","forgotPassword","query","resetPassword","password","confirmEmail","setStats","stats","SET_STATS","getChart","start","end","chart","getStats","getRelChart","relChart","setTwitter","profile","SET_TWITTER","setLoading","loading","SET_LOADING","twitterAuth","Error","role","userToSocket","redeemInvite","loginWithBox","address","signature","msg","updateUserTokenBalance"],"mappings":"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","sourcesContent":["import * as types from 'core/actionTypes';\nimport { storage, api, alert } from 'app/utils';\nimport * as errorActions from 'modules/ui/error.actions';\n// eslint-disable-next-line\nimport * as navigationActions from 'modules/navigation/navigation.actions';\nimport * as tooltipActions from 'modules/tooltip/tooltip.actions';\nimport { setUserMemberships } from 'modules/community/community.actions';\n\nconst Alert = alert.Alert();\n\nlet PushNotification;\nlet userDefaults;\n\nlet Analytics;\nlet ReactGA;\nlet TwitterCT;\n\nif (process.env.WEB !== 'true') {\n  Analytics = require('react-native-firebase').analytics();\n  userDefaults = require('react-native-swiss-knife').RNSKBucket;\n  PushNotification = require('react-native-push-notification');\n} else {\n  ReactGA = require('react-ga').default;\n  TwitterCT = require('app/utils/social').TwitterCT;\n}\n\nconst APP_GROUP_ID = 'group.com.4real.relevant';\n\nconst reqOptions = async () => {\n  const token = await storage.getToken();\n  return {\n    credentials: 'include',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`\n    }\n  };\n};\n\nexport function setCommunity(community) {\n  return dispatch => {\n    dispatch({\n      type: types.SET_COMMUNITY,\n      payload: community\n    });\n  };\n}\n\nexport function setInviteCode(code) {\n  return {\n    type: types.SET_INVITE_CODE,\n    payload: code\n  };\n}\n\nexport function updateInvite(invite) {\n  return {\n    type: types.UPDATE_INVITE,\n    payload: invite\n  };\n}\n\nexport function sendPong() {\n  return {\n    type: 'server/pong'\n  };\n}\n\nexport function updateAuthUser(user) {\n  return {\n    type: types.UPDATE_AUTH_USER,\n    payload: user\n  };\n}\n\nexport function setUser(user) {\n  return {\n    type: types.SET_USER,\n    payload: user\n  };\n}\n\nexport function setSelectedUserData(data) {\n  return {\n    type: 'SET_SELECTED_USER_DATA',\n    payload: data\n  };\n}\n\nexport function setUserIndex(userIndex) {\n  return {\n    type: types.SET_USER_INDEX,\n    payload: userIndex\n  };\n}\n\nexport function setPreUser(preUser) {\n  return {\n    type: 'SET_PRE_USER',\n    payload: preUser\n  };\n}\n\nexport function setAuthStatusText(text) {\n  return {\n    type: 'SET_AUTH_STATUS_TEXT',\n    payload: text || null\n  };\n}\n\nexport function loginUserSuccess(token) {\n  return {\n    type: types.LOGIN_USER_SUCCESS,\n    payload: {\n      token\n    }\n  };\n}\n\nexport function loginUserFailure() {\n  return {\n    type: types.LOGIN_USER_FAILURE\n  };\n}\n\nexport function loginUserRequest() {\n  return {\n    type: types.LOGIN_USER_REQUEST\n  };\n}\n\nexport function logout() {\n  return {\n    type: types.LOGOUT_USER\n  };\n}\n\nexport function cacheCommunity(community) {\n  return async dispatch => {\n    try {\n      await dispatch(\n        api.request({\n          method: 'PUT',\n          endpoint: 'user',\n          path: '/updateCommunity',\n          body: JSON.stringify({ community })\n        })\n      );\n    } catch (err) {\n      console.log(err); // eslint-disable-line\n    }\n  };\n}\n\nexport function logoutAction(user) {\n  return dispatch => {\n    storage.removeToken().then(() => {\n      // websocket message\n      if (user && user._id) {\n        dispatch({\n          type: 'server/logout',\n          payload: user._id\n        });\n      }\n      dispatch(logout());\n    });\n  };\n}\n\nexport function setCurrentTooltip(step) {\n  return {\n    type: types.SET_ONBOARDING_STEP,\n    payload: step\n  };\n}\n\nexport function updateUser(user, preventLocalUpdate) {\n  return async dispatch => {\n    try {\n      const res = await dispatch(\n        api.request({\n          method: 'PUT',\n          endpoint: 'user',\n          path: '/',\n          body: JSON.stringify(user)\n        })\n      );\n      if (!preventLocalUpdate) dispatch(updateAuthUser(res));\n      return true;\n    } catch (err) {\n      Alert.alert(err.message);\n      return false;\n    }\n  };\n}\n\nexport function updateNotificationSettings(\n  notificationSettings,\n  subscription,\n  deviceTokens\n) {\n  return async dispatch => {\n    try {\n      const res = await dispatch(\n        api.request({\n          method: 'PUT',\n          endpoint: 'user',\n          path: '/notifications',\n          body: JSON.stringify({ notificationSettings, subscription, deviceTokens })\n        })\n      );\n      dispatch(updateAuthUser(res));\n      return true;\n    } catch (err) {\n      Alert.alert(err.message);\n      return false;\n    }\n  };\n}\n\nexport function setDeviceToken(token) {\n  return {\n    type: 'SET_DEVICE_TOKEN',\n    payload: token\n  };\n}\n\nexport function removeDeviceToken(auth) {\n  if (!auth) return null;\n  return dispatch => {\n    const { user } = auth;\n    if (user.deviceTokens) {\n      const index = user.deviceTokens.indexOf(auth.deviceToken);\n      if (index > -1) {\n        user.deviceTokens.splice(index, 1);\n        dispatch(updateUser(user, true));\n      }\n    }\n  };\n}\n\nexport function enableMobileNotifications(user, checkIfEnbaled) {\n  return dispatch => {\n    if (!user.notificationSettings.mobile.all && checkIfEnbaled) return;\n    if (!PushNotification) return;\n    configurePushNotifications(dispatch);\n    registerPushNotification({ dispatch, user });\n  };\n}\n\nfunction configurePushNotifications(dispatch) {\n  PushNotification.configure({\n    onNotification: notification => {\n      // other params: foreground, message\n      const { userInteraction, data } = notification;\n      if (!userInteraction) return;\n      if (data && data.postId) {\n        const comment = data.comment ? { _id: data.comment } : null;\n        if (data.community) dispatch(setCommunity(data.community));\n        dispatch(\n          navigationActions.goToPost({\n            _id: data.postId,\n            title: data.title,\n            community: data.community,\n            comment\n          })\n        );\n      }\n    },\n    // ANDROID ONLY: GCM Sender ID\n    // need to receive remote push notifications)\n    senderID: '271994332492',\n    // IOS ONLY (optional): default: all - Permissions to register.\n    permissions: {\n      alert: true,\n      badge: true,\n      sound: true\n    },\n    popInitialNotification: true,\n    requestPermissions: true\n  });\n}\n\nfunction registerPushNotification({ dispatch, user }) {\n  PushNotification.onRegister = deviceToken => {\n    const { token } = deviceToken;\n    userDefaults.set('deviceToken', token, APP_GROUP_ID);\n    dispatch(setDeviceToken(token));\n    const newUser = { ...user };\n    if (user.deviceTokens && user.deviceTokens.indexOf(token) < 0) {\n      newUser.deviceTokens.push(token);\n    } else if (user.deviceTokens.indexOf(token) < 0) {\n      newUser.deviceTokens = [token];\n    }\n    const notificationSettings = {\n      ...newUser.notificationSettings\n    };\n    dispatch(\n      updateNotificationSettings(notificationSettings, null, newUser.deviceTokens)\n    );\n  };\n}\n\nfunction setupUser(user, dispatch) {\n  dispatch(setUser(user));\n  dispatch(setSelectedUserData(user));\n  dispatch(errorActions.setError('universal', false));\n  dispatch(tooltipActions.tooltipReady(true));\n  return user;\n}\n\nexport function getUser(callback) {\n  return async (dispatch, getState) => {\n    try {\n      const token = await storage.getToken();\n      if (!token) return null;\n      dispatch(loginUserSuccess(token));\n      const user = await dispatch(\n        api.request({\n          method: 'GET',\n          endpoint: 'user',\n          path: '/me'\n        })\n      );\n      setupUser(user, dispatch);\n      const state = getState();\n      const { community } = state.auth;\n      if (!community && user.community) {\n        dispatch(setCommunity(null));\n      }\n      const checkIfEnabled = true;\n      dispatch(enableMobileNotifications(user, checkIfEnabled));\n      if (user.memberships) {\n        dispatch(setUserMemberships(user.memberships));\n      }\n      if (callback) callback(user);\n      return user;\n    } catch (error) {\n      const message = error ? error.message : null;\n      dispatch(errorActions.setError('universal', true, message));\n      dispatch(loginUserFailure('Server error'));\n      if (callback) callback({ ok: false });\n      return null;\n    }\n  };\n}\n\nexport function setOnboardingStep(step) {\n  return async dispatch =>\n    fetch(process.env.API_SERVER + '/api/user/onboarding/' + step, {\n      credentials: 'include',\n      method: 'GET',\n      ...(await reqOptions())\n    })\n      .then(response => response.json())\n      .then(responseJSON => {\n        dispatch(updateAuthUser(responseJSON));\n        return true;\n      })\n      .catch(() => false);\n}\n\nexport function webOnboard(step) {\n  return async dispatch => {\n    try {\n      await dispatch(\n        api.request({\n          method: 'PUT',\n          endpoint: 'user',\n          path: '/webonboard',\n          params: { step }\n        })\n      );\n      return true;\n    } catch (err) {\n      Alert.alert(err.message);\n      return false;\n    }\n  };\n}\n\nexport function loginUser(user) {\n  return async dispatch => {\n    try {\n      const responseJSON = await dispatch(\n        api.request({\n          method: 'POST',\n          endpoint: '/auth',\n          path: '/local',\n          body: JSON.stringify(user)\n        })\n      );\n      if (responseJSON.token) {\n        await storage.setToken(responseJSON.token);\n        dispatch(loginUserSuccess(responseJSON.token));\n        dispatch(getUser());\n        return true;\n      }\n      dispatch(loginUserFailure(responseJSON.message));\n      Alert.alert(responseJSON.message);\n      return false;\n    } catch (err) {\n      Alert.alert(err.message);\n      return false;\n    }\n  };\n}\n\nexport function userOnline(user, token) {\n  return () =>\n    fetch(\n      process.env.API_SERVER +\n        '/notification/online/' +\n        user._id +\n        '?access_token=' +\n        token,\n      {\n        credentials: 'include',\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }\n    )\n      .then(response => response.json())\n      .catch(() => {\n        // Handle error?\n      });\n}\n\nexport function checkUser(string, type, omitSelf = false) {\n  return () =>\n    fetch(\n      `${process.env.API_SERVER}/api/user/check/user/?${type}=${string}&omitSelf=${omitSelf}`,\n      {\n        credentials: 'include',\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }\n    )\n      .then(response => response.json())\n      .then(responseJSON => responseJSON)\n      .catch(error => {\n        Alert.alert(error.message);\n      });\n}\n\nexport function createUser(user, invitecode) {\n  return dispatch =>\n    fetch(process.env.API_SERVER + '/api/user', {\n      credentials: 'include',\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ user, invitecode })\n    })\n      .then(api.handleErrors)\n      .then(response => response.json())\n      .then(responseJSON => {\n        if (responseJSON.token) {\n          return storage.setToken(responseJSON.token).then(() => {\n            ReactGA &&\n              ReactGA.event({\n                category: 'User',\n                action: 'Created an Account'\n              });\n            TwitterCT && TwitterCT.signUp();\n            Analytics && Analytics.logEvent('CreatedAccount');\n            dispatch(loginUserSuccess(responseJSON.token));\n            dispatch(getUser());\n            return true;\n          });\n        }\n        if (responseJSON.errors) {\n          const { errors } = responseJSON;\n          let message = '';\n          Object.keys(errors).forEach(key => {\n            if (errors[key].message) message += errors[key].message;\n          });\n          Alert.alert(message);\n          return false;\n        }\n        return false;\n      })\n      .catch(error => {\n        if (error.message.match('invitation code')) {\n          dispatch(updateInvite(null));\n        }\n        Alert.alert(error.message);\n        return false;\n      });\n}\n\nexport function updateHandle(user) {\n  return async dispatch => {\n    try {\n      const result = await dispatch(\n        api.request({\n          method: 'PUT',\n          endpoint: 'user',\n          path: '/updateHandle',\n          body: JSON.stringify({ user })\n        })\n      );\n      ReactGA &&\n        ReactGA.event({\n          category: 'User',\n          action: 'Created an Account'\n        });\n      Analytics && Analytics.logEvent('CreatedAccount');\n      setupUser(result, dispatch);\n      return true;\n    } catch (err) {\n      Alert.alert(err.message);\n      return false;\n    }\n  };\n}\n\nexport function sendConfirmation() {\n  return async () =>\n    fetch(process.env.API_SERVER + '/api/user/sendConfirmation', {\n      method: 'GET',\n      ...(await reqOptions())\n    })\n      .then(api.handleErrors)\n      .then(response => response.json())\n      .then(responseJSON => {\n        Alert.alert(\n          'A confirmation email has been sent to ' + responseJSON.email,\n          'success'\n        );\n        return true;\n      })\n      .catch(err => {\n        Alert.alert('Error sending email, please try again ', err.message);\n        return false;\n      });\n}\n\nexport function forgotPassword(user, query) {\n  return async () =>\n    fetch(process.env.API_SERVER + '/api/user/forgot' + (query || ''), {\n      method: 'PUT',\n      ...(await reqOptions()),\n      body: JSON.stringify({ user })\n    })\n      .then(api.handleErrors)\n      .then(response => response.json())\n      .then(responseJSON => responseJSON)\n      .catch(err => {\n        Alert.alert(err.message);\n        return false;\n      });\n}\n\nexport function resetPassword(password, token) {\n  return async () =>\n    fetch(process.env.API_SERVER + '/api/user/resetPassword', {\n      method: 'PUT',\n      ...(await reqOptions()),\n      body: JSON.stringify({ password, token })\n    })\n      .then(api.handleErrors)\n      .then(response => response.json())\n      .then(() => {\n        Alert.alert('Your password has been updated! Try loggin in.', 'success');\n        return true;\n      })\n      .catch(err => {\n        Alert.alert(err.message);\n        return false;\n      });\n}\n\nexport function confirmEmail(user, code) {\n  return async dispatch =>\n    fetch(process.env.API_SERVER + '/api/user/confirm', {\n      method: 'PUT',\n      ...(await reqOptions()),\n      body: JSON.stringify({ user, code })\n    })\n      .then(api.handleErrors)\n      .then(response => response.json())\n      .then(responseJSON => {\n        Alert.alert('Your email has been confirmed');\n        dispatch(updateAuthUser(responseJSON));\n        return true;\n      })\n      .catch(err => {\n        Alert.alert(err.message);\n        return false;\n      });\n}\n\nexport function setStats(stats) {\n  return {\n    type: types.SET_STATS,\n    payload: stats\n  };\n}\n\nexport function getChart(start, end) {\n  return async dispatch => {\n    try {\n      const chart = await dispatch(\n        api.request({\n          method: 'GET',\n          endpoint: 'relevanceStats',\n          path: '/user',\n          query: { start, end }\n        })\n      );\n      dispatch(setStats({ chart }));\n      dispatch(errorActions.setError('stats', false));\n      return true;\n    } catch (error) {\n      dispatch(errorActions.setError('stats', true, error.message));\n      return false;\n    }\n  };\n}\n\nexport function getStats(user) {\n  return async dispatch => {\n    try {\n      const stats = await dispatch(\n        api.request({\n          method: 'GET',\n          endpoint: 'relevance',\n          path: `/user/${user._id}/stats`\n        })\n      );\n      dispatch(setStats(stats));\n      dispatch(errorActions.setError('stats', false));\n      return true;\n    } catch (error) {\n      dispatch(errorActions.setError('stats', true, error.message));\n      return false;\n    }\n  };\n}\n\nexport function getRelChart(start, end) {\n  return async dispatch => {\n    try {\n      const relChart = await dispatch(\n        api.request({\n          method: 'GET',\n          endpoint: 'statistics',\n          path: '/user',\n          query: { start, end }\n        })\n      );\n      dispatch(setStats({ relChart }));\n      dispatch(errorActions.setError('stats', false));\n      return true;\n    } catch (error) {\n      dispatch(errorActions.setError('stats', true, error.message));\n      return false;\n    }\n  };\n}\n\nexport function setTwitter(profile) {\n  return {\n    type: types.SET_TWITTER,\n    payload: profile\n  };\n}\n\nexport function setLoading(loading) {\n  return {\n    type: types.SET_LOADING,\n    payload: loading\n  };\n}\n\nexport function twitterAuth(profile, invite) {\n  return async dispatch => {\n    try {\n      dispatch(setLoading(true));\n      const result = await dispatch(\n        api.request({\n          method: 'POST',\n          endpoint: '/auth/',\n          path: 'twitter/login',\n          body: JSON.stringify({ profile, invite })\n        })\n      );\n      if (!result) {\n        throw new Error('Twitter Auth failed');\n      }\n      dispatch(setLoading(false));\n      if (result.user && result.user.role === 'temp') {\n        await storage.setToken(result.token);\n        dispatch(loginUserSuccess(result.token));\n\n        dispatch(setPreUser(result.user));\n        dispatch(setTwitter({ ...profile, token: result.token }));\n        return false;\n      }\n      if (result.token && result.user) {\n        await storage.setToken(result.token);\n        dispatch(loginUserSuccess(result.token));\n        setupUser(result.user, dispatch);\n      }\n      return true;\n    } catch (error) {\n      dispatch(setTwitter(null));\n      dispatch(setLoading(false));\n      Alert.alert(error.message);\n      return false;\n    }\n  };\n}\n\nexport function userToSocket(user) {\n  return dispatch => {\n    if (!user) return;\n    dispatch({ type: 'server/storeUser', payload: user });\n  };\n}\n\nexport function redeemInvite(invitecode) {\n  return async dispatch => {\n    try {\n      const user = await dispatch(\n        api.request({\n          method: 'PUT',\n          endpoint: 'invites',\n          path: '/',\n          body: JSON.stringify({ invitecode })\n        })\n      );\n      dispatch(setInviteCode(null));\n      dispatch(updateAuthUser(user));\n      Alert.alert('You are now a trusted admin of the community!', 'success');\n    } catch (err) {\n      dispatch(setInviteCode(null));\n      // Alert.alert(err.message);\n    }\n  };\n}\n\nexport function loginWithBox({ address, signature, msg }) {\n  return async dispatch => {\n    try {\n      const res = await dispatch(\n        api.request({\n          method: 'POST',\n          endpoint: '/auth',\n          path: '/web3',\n          body: JSON.stringify({ address, signature, msg })\n        })\n      );\n      if (res.token) {\n        await storage.setToken(res.token);\n        dispatch(loginUserSuccess(res.token));\n        dispatch(getUser());\n        return true;\n      }\n      dispatch(loginUserFailure(res.message));\n      Alert.alert(res.message);\n      return false;\n    } catch (err) {\n      Alert.alert(err.message);\n      return false;\n    }\n  };\n}\n\nexport function updateUserTokenBalance() {\n  return async dispatch => {\n    try {\n      const res = await dispatch(\n        api.request({\n          method: 'PUT',\n          endpoint: 'user',\n          path: '/updateUserTokenBalance'\n        })\n      );\n      dispatch(updateAuthUser(res));\n    } catch (err) {\n      Alert.alert(err.message);\n    }\n  };\n}\n"],"file":"auth.actions.js"}