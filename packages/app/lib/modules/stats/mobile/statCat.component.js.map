{"version":3,"sources":["../../../../src/modules/stats/mobile/statCat.component.js"],"names":["styles","StatCategory","props","context","state","loaded","setState","topic","actions","goToPeople","stats","title","button","titleAction","titleStyle","progressEl","level","tag","charAt","toUpperCase","slice","active","_id","replace","trim","categoryName","goToTopic","color","blue","untilNext","Math","round","floor","relGoal","relevance","relMore","marginHorizontal","marginBottom","borderWidth","fullWidth","position","top","zIndex","width","height","require","rIcon","smallR","marginRight","statEls","el","statNumber","statRowNumber","label","flexDirection","justifyContent","fontSize","lineHeight","rank","container","statSection","alignItems","rowTitle","textRow","smallInfo","innerContainer","Component","PropTypes","object","localStyles","StyleSheet","create","marginVertical","flex","vBorder","borderRightWidth","hairlineWidth","borderColor","row","marginTop","statRow","backgroundColor","globalStyles"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { StyleSheet, Text, View, Image } from 'react-native';\nimport PropTypes from 'prop-types';\nimport * as Progress from 'react-native-progress';\nimport { globalStyles, blue, fullWidth } from 'app/styles/global';\nimport StatRow from 'modules/stats/mobile/statRow.component';\n\nlet styles;\n\nexport default class StatCategory extends Component {\n  static propTypes = {\n    actions: PropTypes.object,\n    stats: PropTypes.object\n  };\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      loaded: false\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ loaded: true });\n  }\n\n  goToPeople(topic) {\n    this.props.actions.goToPeople(topic);\n  }\n\n  render() {\n    const { stats } = this.props;\n    let title;\n    let button;\n    let titleAction = () => null;\n    let titleStyle;\n    let progressEl;\n\n    if (typeof stats.level !== 'number') return null;\n\n    if (stats.tag) {\n      title = '#' + stats.tag.charAt(0).toUpperCase() + stats.tag.slice(1);\n      button = (\n        <Text\n          onPress={() => this.goToPeople(stats.tag)}\n          style={[styles.button, styles.active]}\n        >\n          See top users.\n        </Text>\n      );\n\n      const topic = {\n        _id: stats.tag.replace('#', '').trim(),\n        categoryName: stats.tag\n      };\n      titleAction = () => this.props.actions.goToTopic(topic);\n      titleStyle = { color: blue };\n    } else {\n      title = 'Level Progress';\n      button = (\n        <Text\n          onPress={() => this.goToPeople(null)}\n          style={[styles.button, styles.active]}\n        >\n          See all users.\n        </Text>\n      );\n    }\n\n    const untilNext = Math.round((10 * stats.level) % 100) / 100;\n    const level = Math.floor(stats.level / 10);\n    const relGoal = Math.round((stats.relevance / stats.level) * (level + 1) * 10);\n    const relMore = Math.round(relGoal - stats.relevance);\n\n    if (!stats.tag) {\n      progressEl = (\n        <Progress.Bar\n          style={{ marginHorizontal: 15, marginBottom: 25, borderWidth: 0 }}\n          color={blue}\n          width={fullWidth - 30}\n          height={7}\n          borderRadius={0}\n          progress={this.state.loaded ? untilNext : 0}\n        >\n          <Image\n            resizeMode={'contain'}\n            style={{\n              position: 'absolute',\n              top: 0,\n              zIndex: -1,\n              width: fullWidth - 30,\n              height: 7\n            }}\n            source={require('public/img/icons/dashedbg.png')}\n          />\n        </Progress.Bar>\n      );\n    }\n\n    const rIcon = (\n      <Image\n        resizeMode={'contain'}\n        style={[styles.smallR, { width: 10, height: 12, marginRight: 0.5 }]}\n        source={require('public/img/icons/smallR.png')}\n      />\n    );\n\n    const statEls = [\n      {\n        el: <Text style={[styles.statNumber, styles.statRowNumber]}>{level}</Text>,\n        label: 'Level'\n      },\n      {\n        el: (\n          <View style={{ flexDirection: 'row', justifyContent: 'flex-start' }}>\n            <Text\n              style={[\n                styles.statNumber,\n                styles.statRowNumber,\n                { fontSize: 16, lineHeight: 18 }\n              ]}\n            >\n              #\n            </Text>\n            <Text style={[styles.statNumber, styles.statRowNumber]}>{stats.rank}</Text>\n          </View>\n        ),\n        label: 'Rank'\n      },\n      {\n        el: (\n          <View style={{ flexDirection: 'row', justifyContent: 'flex-start' }}>\n            <Text style={[styles.statNumber, styles.statRowNumber]}>\n              {Math.round(untilNext * 100)}\n            </Text>\n            <Text\n              style={[\n                styles.statNumber,\n                styles.statRowNumber,\n                { fontSize: 16, lineHeight: 18 }\n              ]}\n            >\n              %\n            </Text>\n          </View>\n        ),\n        label: 'Completed'\n      }\n    ];\n\n    return (\n      <View style={[styles.container, styles.statSection]}>\n        <View style={{ flexDirection: 'column', alignItems: 'center' }}>\n          <Text\n            onPress={titleAction}\n            style={[styles.statNumber, styles.rowTitle, titleStyle]}\n          >\n            {title}\n          </Text>\n          <View style={[styles.textRow]}>\n            <Text style={styles.smallInfo}>Get </Text>\n            {rIcon}\n            <Text style={styles.smallInfo}>{relMore} more to reach next level. </Text>\n            {button}\n          </View>\n        </View>\n\n        <View style={styles.innerContainer}>\n          <StatRow elements={statEls} />\n        </View>\n        {progressEl}\n      </View>\n    );\n  }\n}\n\nconst localStyles = StyleSheet.create({\n  rowTitle: {\n    marginVertical: 5,\n    marginBottom: 5\n  },\n\n  container: {\n    flex: 1\n  },\n  innerContainer: {\n    flexDirection: 'row',\n    flex: 1\n  },\n  vBorder: {\n    borderRightWidth: StyleSheet.hairlineWidth,\n    borderColor: 'hsl(0,0%,80%)'\n  },\n  row: {\n    marginTop: 20,\n    marginBottom: 30,\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  statRow: {\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  statRowNumber: {\n    // marginBottom: 1,\n    fontSize: 25\n  },\n  statSection: {\n    flexDirection: 'column',\n    backgroundColor: 'white',\n    marginBottom: 25,\n    marginTop: 40\n  },\n  button: {\n    flex: 0,\n    fontSize: 10\n  }\n});\n\nstyles = { ...globalStyles, ...localStyles };\n"],"file":"statCat.component.js"}