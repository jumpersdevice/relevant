{"version":3,"sources":["../../../../src/modules/ui/modals/modal.container.js"],"names":["ModalContainer","propTypes","location","PropTypes","object","history","isBrowser","process","env","BROWSER","dispatch","state","navigation","currentModal","modal","modalData","urlParams","queryString","parse","search","modalParams","qString","stringify","JSON","push","params","modalEl","modals","Body","redirect","rest","close","closeModal","queryParams","pathname"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { showModal, hideModal } from 'modules/navigation/navigation.actions';\nimport Modal from 'modules/ui/modals/modal.component';\nimport queryString from 'query-string';\nimport { withRouter } from 'react-router-dom';\nimport * as modals from './desktop.lookup';\n\nModalContainer.propTypes = {\n  location: PropTypes.object,\n  history: PropTypes.object\n};\n\nconst isBrowser = process.env.BROWSER === true;\n\nfunction ModalContainer({ location, history }) {\n  const dispatch = useDispatch();\n  const { modal: currentModal, modalData } = useSelector(state => state.navigation);\n  const urlParams = queryString.parse(location.search);\n  const { modal, modalParams } = urlParams;\n\n  useEffect(() => {\n    if ((!modal && currentModal) || (modal && currentModal && modal !== currentModal)) {\n      const qString = queryString.stringify({\n        ...urlParams,\n        modal: currentModal,\n        modalParams: JSON.stringify(modalData)\n      });\n      history.push({ search: qString });\n    }\n  }, [currentModal]); // eslint-disable-line\n\n  useEffect(() => {\n    if (!currentModal && modal && isBrowser) {\n      const params = modalParams ? JSON.parse(modalParams) : null;\n      dispatch(showModal(modal, params));\n    }\n    if (currentModal && !modal) dispatch(hideModal());\n  }, [modal]); // eslint-disable-line\n\n  if (!isBrowser) return null;\n\n  const modalEl = !!currentModal && modals[modal];\n  if (!modalEl) return null;\n\n  const { Body, redirect, ...rest } = modalEl;\n\n  const close = () => {\n    dispatch(hideModal());\n    closeModal(redirect, history, location);\n  };\n\n  return (\n    <Modal close={close} name={currentModal} {...rest}>\n      <Body close={close} />\n    </Modal>\n  );\n}\n\nfunction closeModal(redirect, history, location) {\n  const queryParams = queryString.parse(location.search);\n  if (queryParams.redirect) {\n    history.push(queryParams.redirect);\n  } else if (redirect) {\n    history.push(redirect);\n  } else {\n    history.push(location.pathname);\n  }\n}\n\nexport default withRouter(ModalContainer);\n"],"file":"modal.container.js"}