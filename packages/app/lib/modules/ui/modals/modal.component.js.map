{"version":3,"sources":["../../../../src/modules/ui/modals/modal.component.js"],"names":["DEFAULT_WIDTH","DEFAULT_PADDING","ModalParent","styled","View","colors","modalBackground","ModalScroll","Modal","layout","modalShadow","ModalComponent","propTypes","header","PropTypes","object","title","oneOfType","node","string","hideX","bool","children","footer","func","maxWidth","number","array","padding","close","props","dispatch","modalElement","headerEl","footerEl","el","current","closeModal","escFunction","e","keyCode","document","addEventListener","removeEventListener","p","white","stopPropagation","zIndex","position","top","right","require","modal","state","navigation","name","visible","ReactDOM","createPortal","body"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport styled from 'styled-components/primitives';\nimport { View, Header, Touchable, CloseX } from 'modules/styled/uni';\nimport { colors, layout } from 'app/styles';\nimport { hideModal } from 'modules/navigation/navigation.actions';\nimport { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock';\n\nconst DEFAULT_WIDTH = 95;\nconst DEFAULT_PADDING = 6;\n\nconst ModalParent = styled.View`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  max-width: 100vw;\n  height: 100vh;\n  background-color: ${colors.modalBackground};\n  z-index: 200;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  -webkit-overflow-scrolling: touch;\n`;\n\nconst ModalScroll = styled.View`\n  position: relative;\n  display: flex;\n  align-items: center;\n  min-height: 100vh;\n  justify-content: center;\n`;\n\nconst Modal = styled(View)`\n  z-index: 5;\n  ${layout.modalShadow}\n  max-width: 100vw;\n`;\n\nModalComponent.propTypes = {\n  header: PropTypes.object,\n  title: PropTypes.oneOfType([PropTypes.node, PropTypes.string]),\n  hideX: PropTypes.bool,\n  children: PropTypes.node,\n  footer: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  maxWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.array]),\n  padding: PropTypes.number,\n  close: PropTypes.func\n};\n\nfunction ModalComponent(props) {\n  const { footer, children, hideX, maxWidth, padding, header, title } = props;\n\n  const dispatch = useDispatch();\n  const close = props.close || (() => dispatch(hideModal()));\n\n  const modalElement = useRef(null);\n\n  const headerEl = header || title;\n  const footerEl = typeof footer === 'function' ? footer(props) : footer;\n\n  useEffect(() => {\n    const el = modalElement.current;\n    disableBodyScroll(el);\n    return () => enableBodyScroll(el);\n  }, [modalElement]);\n\n  const closeModal = useCallback(() => close(), [close]);\n\n  useEffect(() => {\n    const escFunction = e => (e.keyCode === 27 ? closeModal() : null);\n    document.addEventListener('keydown', escFunction, false);\n    return () => document.removeEventListener('keydown', escFunction, false);\n  }, [closeModal]);\n\n  const p = padding || [DEFAULT_PADDING, '6 3'];\n\n  return (\n    <ModalParent onClick={closeModal} ref={modalElement}>\n      <ModalScroll ignoreScrollLock>\n        <Modal\n          ignoreScrollLock\n          bg={colors.white}\n          w={maxWidth || [DEFAULT_WIDTH, '100vw']}\n          p={p}\n          justify={['space-between', 'center']}\n          fdirection=\"column\"\n          m={['6 0', '0']}\n          minheight={['auto', maxWidth ? 'auto' : '100vh']}\n          onClick={e => e.stopPropagation()}\n        >\n          {hideX ? null : (\n            <Touchable\n              onPress={closeModal}\n              style={{ zIndex: 10, position: 'absolute', top: 0, right: 0 }}\n            >\n              <CloseX\n                w={2.5}\n                h={2.5}\n                top={[6, 4]}\n                right={[6, 3]}\n                resizeMode={'contain'}\n                source={require('public/img/x.png')}\n              />\n            </Touchable>\n          )}\n          {headerEl ? (\n            <Header pr={5} mb={3} shrink={1}>\n              {headerEl}\n            </Header>\n          ) : null}\n          {children}\n          {footerEl && <View mt={6}>{footerEl}</View>}\n        </Modal>\n      </ModalScroll>\n    </ModalParent>\n  );\n}\n\nexport default props => {\n  const modal = useSelector(state => state.navigation.modal);\n  const { name } = props;\n  const visible = name && name === modal;\n  return visible && document\n    ? ReactDOM.createPortal(<ModalComponent {...props} />, document.body)\n    : null;\n};\n"],"file":"modal.component.js"}