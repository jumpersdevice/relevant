{"version":3,"sources":["../../../../src/modules/ui/web/popup.js"],"names":["process","env","BROWSER","require","Popup","visible","e","el","target","state","setState","window","addEventListener","hidePopup","bind","removeEventListener","popupOptions","props","options","map","option","text","action","preventDefault","stopPropagation","c","children","Component","PropTypes","array","node"],"mappings":"y6BAAA,qDACA,6D,4yBAEA,GAAIA,OAAO,CAACC,GAAR,CAAYC,OAAZ,GAAwB,IAA5B,CAAkC,CAChCC,OAAO,eAAP,CACD,C,GAEoBC,CAAAA,K,8YAMX,CACNC,OAAO,CAAE,KADH,C,2FAIEC,C,CAAG,CACX,GAAI,KAAKC,EAAL,GAAYD,CAAC,CAACE,MAAlB,CAA0B,OAC1B,GAAI,KAAKC,KAAL,CAAWJ,OAAf,CAAwB,CACtB,KAAKK,QAAL,CAAc,CAAEL,OAAO,CAAE,KAAX,CAAd,EACD,CACF,C,6DAEmB,CAClBM,MAAM,CAACC,gBAAP,CAAwB,OAAxB,CAAiC,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjC,EACD,C,mEAEsB,CACrBH,MAAM,CAACI,mBAAP,CAA2B,OAA3B,CAAoC,KAAKF,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAApC,EACD,C,uCAEQ,oBACCT,CAAAA,OADD,CACa,KAAKI,KADlB,CACCJ,OADD,CAEP,GAAIW,CAAAA,YAAY,CACd,oCAAK,SAAS,CAAE,cAAhB,gEACG,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,GAAnB,CAAuB,SAAAC,MAAM,QAC5B,qCAAK,GAAG,CAAEA,MAAM,CAACC,IAAjB,CAAuB,OAAO,CAAED,MAAM,CAACE,MAAvC,iEACGF,MAAM,CAACC,IADV,CAD4B,EAA7B,CADH,CADF,CASA,GAAI,CAAChB,OAAL,CAAcW,YAAY,CAAG,IAAf,CAEd,MACE,qCACE,OAAO,CAAE,iBAAAV,CAAC,CAAI,CACZ,MAAI,CAACI,QAAL,CAAc,CAAEL,OAAO,CAAE,CAACA,OAAZ,CAAd,EACAC,CAAC,CAACiB,cAAF,GACAjB,CAAC,CAACkB,eAAF,GACD,CALH,gEAOE,qCAAM,GAAG,CAAE,aAAAC,CAAC,QAAK,CAAA,MAAI,CAAClB,EAAL,CAAUkB,CAAf,EAAZ,CAA+B,SAAS,CAAE,OAA1C,gEACG,KAAKR,KAAL,CAAWS,QADd,CAPF,CAUGV,YAVH,CADF,CAcD,C,mBApDgCW,gB,qDAAdvB,K,aACA,CACjBc,OAAO,CAAEU,mBAAUC,KADF,CAEjBH,QAAQ,CAAEE,mBAAUE,IAFH,C","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nif (process.env.BROWSER === true) {\n  require('./popup.css');\n}\n\nexport default class Popup extends Component {\n  static propTypes = {\n    options: PropTypes.array,\n    children: PropTypes.node\n  };\n\n  state = {\n    visible: false\n  };\n\n  hidePopup(e) {\n    if (this.el === e.target) return;\n    if (this.state.visible) {\n      this.setState({ visible: false });\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('click', this.hidePopup.bind(this));\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', this.hidePopup.bind(this));\n  }\n\n  render() {\n    const { visible } = this.state;\n    let popupOptions = (\n      <div className={'popupOptions'}>\n        {this.props.options.map(option => (\n          <div key={option.text} onClick={option.action}>\n            {option.text}\n          </div>\n        ))}\n      </div>\n    );\n    if (!visible) popupOptions = null;\n\n    return (\n      <div\n        onClick={e => {\n          this.setState({ visible: !visible });\n          e.preventDefault();\n          e.stopPropagation();\n        }}\n      >\n        <span ref={c => (this.el = c)} className={'popup'}>\n          {this.props.children}\n        </span>\n        {popupOptions}\n      </div>\n    );\n  }\n}\n"],"file":"popup.js"}