{"version":3,"sources":["../../src/utils/numbers.js"],"names":["dayjs","extend","relativeTime","toNumber","num","dec","undefined","toFixed","percentChange","user","totalPercent","relevanceRecord","length","forEach","record","percent","endInterval","Date","endRelevance","pagerank","last","oldRel","Math","abs","relevance","timeInteraval","time","scale","total","abbreviateNumber","_fixed","fixed","Number","b","toPrecision","split","k","floor","min","slice","newNum","c","d","e","capitalize","string","map","s","charAt","toUpperCase","join","getTimestamp","date","withoutSuffix","fromNow","getMonth","format","getDayMonthYearTimestamp","guid","replace","r","random","v","toString","timeLeft","_date","index","now","seconds","round","getTime","h","m","abr","data","t","i","filter","timeLeftTick","fmtT"],"mappings":"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","sourcesContent":["import relativeTime from 'dayjs/plugin/relativeTime';\nimport dayjs from 'dayjs';\n// import moment from 'moment';\n\ndayjs.extend(relativeTime);\n\nexport function toNumber(num, dec) {\n  if (num === undefined || dec === undefined) return null;\n  return num / 10 ** dec;\n}\n\nexport function toFixed(num, dec) {\n  if (!num) return 0;\n  return num.toFixed(dec);\n}\n\nexport function percentChange(user) {\n  let totalPercent = 0;\n\n  if (!user || !user.relevanceRecord || !user.relevanceRecord.length) return 0;\n\n  user.relevanceRecord.forEach(record => {\n    let percent = 0;\n    const endInterval = new Date();\n    const endRelevance = user.pagerank;\n    const last = record;\n    const oldRel = Math.abs(last.relevance);\n    if (oldRel === 0) return;\n    percent = ((endRelevance - oldRel) * 100) / oldRel;\n    const timeInteraval = endInterval - new Date(last.time);\n    const scale = (1 * 24 * 60 * 60 * 1000) / timeInteraval;\n    percent *= scale;\n    totalPercent += percent;\n  });\n\n  const total = totalPercent / user.relevanceRecord.length;\n  return total;\n}\n\nexport function abbreviateNumber(num, _fixed) {\n  if (typeof num !== 'number') return num;\n  let fixed = 0;\n\n  if (typeof _fixed === 'number') fixed = _fixed;\n  if (num === null) {\n    return null;\n  } // terminate early\n  if (num === 0) {\n    return '0';\n  } // terminate early\n  if (typeof num !== 'number') num = Number(num);\n  fixed = !fixed || fixed < 0 ? 0 : fixed; // number of decimal places to show\n  const b = num.toPrecision(2).split('e'); // get power\n  // floor at decimals, ceiling at trillions\n  const k = b.length === 1 ? 0 : Math.floor(Math.min(b[1].slice(1), 14) / 3);\n  // divide by power\n  const newNum = k < 1 ? num : num / 10 ** (k * 3);\n  if (Math.abs(newNum) < 100) fixed = 1;\n  if (Math.abs(newNum) < 10) fixed = 1;\n  if (Math.abs(newNum) < 1) fixed++;\n  if (Math.abs(newNum) < 0.1) fixed++;\n  if (Math.abs(newNum) < 0.01) fixed++;\n  if (Math.abs(newNum) < 0.001) fixed++;\n\n  const c = newNum.toFixed(fixed);\n  const d = c < 0 ? -Math.abs(c) : Math.abs(c); // enforce -0 is 0 and trim .00s\n  const e = d + ['', 'K', 'M', 'B', 'T'][k]; // append power\n  return e;\n}\n\nexport function capitalize(string) {\n  return string\n    .split(' ')\n    .map(s => s.charAt(0).toUpperCase() + s.slice(1))\n    .join(' ');\n}\n\nexport function getTimestamp(date, withoutSuffix) {\n  if (!date) return null;\n  const fromNow = dayjs(date).fromNow(withoutSuffix);\n  return capitalize(fromNow);\n}\n\nexport function getMonth(date) {\n  if (!date) return null;\n  return dayjs(date).format('MMMM');\n}\n\nexport function getDayMonthYearTimestamp(date) {\n  if (!date) return null;\n  return dayjs(date).format('MMM D, YYYY');\n}\n\nexport function guid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (Math.random() * 16) | 0; // eslint-disable-line\n    const v = c === 'x' ? r : (r & 0x3) | 0x8; // eslint-disable-line\n    return v.toString(16);\n  });\n}\n\nexport function timeLeft({ _date, index }) {\n  const now = new Date();\n  const date = new Date(_date);\n  const seconds = Math.round((date.getTime() - now.getTime()) / 1000);\n\n  const d = 0;\n  // const d = Math.round(seconds / (3600 * 24));\n  const h = Math.round(seconds / 3600);\n  const m = Math.round((seconds % 3600) / 60);\n  const s = seconds % 60;\n  const abr = ['hr', 'min', 'sec'];\n  const data = [h > 9 ? h : d ? h : h || '0', m > 9 ? m : d && h ? m : m || '0', s]\n    .map((t, i) => (t ? t + abr[i] : null))\n    .filter(t => t);\n\n  if (index) return data[index - 1];\n  return data.join(':');\n}\n\nexport function timeLeftTick(_date) {\n  const now = new Date();\n  const date = new Date(_date);\n  const seconds = Math.round((date.getTime() - now.getTime()) / 1000);\n\n  const d = Math.round(seconds / (3600 * 24));\n  const h = Math.round((seconds % 24) / 3600);\n  const m = Math.round((seconds % 3600) / 60);\n  const s = seconds % 60;\n  const abr = [` day${d > 1 ? 's' : ''} `, ':', ':', ''];\n  const fmtT = t => (t < 10 ? '0' + t : t || '00');\n  const data = [d, fmtT(h), fmtT(m), fmtT(s)]\n    .map((t, i) => (t ? t + abr[i] : null))\n    .filter(t => t);\n\n  return data.join('');\n}\n"],"file":"numbers.js"}