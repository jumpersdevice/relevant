{"version":3,"sources":["../../src/utils/rewards.js"],"names":["computePostPayout","postData","community","parentPost","pagerank","currentShares","postCount","payoutShare","topPostShares","payout","rewardFund","TOKEN_DECIMALS","computeUserPayout","earning","status","totalPostShares","estimatedPayout","estimatedPostPayout","shares","earned"],"mappings":"8JAAA,mCAEO,QAASA,CAAAA,iBAAT,CAA2BC,QAA3B,CAAqCC,SAArC,CAAgD,CACrD,GAAI,CAACA,SAAD,EAAc,CAACD,QAAf,EAA2BA,QAAQ,CAACE,UAAxC,CAAoD,MAAO,KAAP,CACpD,GAAIF,QAAQ,CAACG,QAAT,CAAoBF,SAAS,CAACG,aAAV,EAA2BH,SAAS,CAACI,SAAV,EAAuB,CAAlD,CAAxB,CAA8E,CAC5E,MAAO,EAAP,CACD,CACDL,QAAQ,CAACM,WAAT,CACEN,QAAQ,CAACG,QAAT,EAAqBF,SAAS,CAACM,aAAV,CAA0BP,QAAQ,CAACG,QAAnC,EAA+C,CAApE,CADF,CAEAH,QAAQ,CAACQ,MAAT,CAAkBP,SAAS,CAACQ,UAAV,CAAuBT,QAAQ,CAACM,WAAlD,CACA,MAAON,CAAAA,QAAQ,CAACQ,MAAT,CAAkBE,sBAAzB,CACD,CAEM,QAASC,CAAAA,iBAAT,CAA2BC,OAA3B,CAAoC,CACzC,GAAIA,OAAO,CAACC,MAAR,GAAmB,SAAvB,CAAkC,CAChC,GAAID,OAAO,CAACE,eAAR,GAA4B,CAAhC,CAAmC,MAAO,EAAP,CACnC,GAAIC,CAAAA,eAAe,CAAGH,OAAO,CAACI,mBAA9B,CACA,GAAID,eAAe,CAAG,GAAtB,CAA2BA,eAAe,EAAIL,sBAAnB,CAC3B,GAAMF,CAAAA,MAAM,CAAIO,eAAe,CAAGH,OAAO,CAACK,MAA3B,CAAqCL,OAAO,CAACE,eAA5D,CACA,MAAON,CAAAA,MAAP,CACD,CACD,GAAII,OAAO,CAACM,MAAR,EAAkBN,OAAO,CAACC,MAAR,GAAmB,SAAzC,CAAoD,MAAOD,CAAAA,OAAO,CAACM,MAAf,CACpD,MAAO,EAAP,CACD","sourcesContent":["import { TOKEN_DECIMALS } from '@r3l/common';\n\nexport function computePostPayout(postData, community) {\n  if (!community || !postData || postData.parentPost) return null;\n  if (postData.pagerank < community.currentShares / (community.postCount || 1)) {\n    return 0;\n  }\n  postData.payoutShare =\n    postData.pagerank / (community.topPostShares + postData.pagerank || 1);\n  postData.payout = community.rewardFund * postData.payoutShare;\n  return postData.payout / TOKEN_DECIMALS;\n}\n\nexport function computeUserPayout(earning) {\n  if (earning.status === 'pending') {\n    if (earning.totalPostShares === 0) return 0;\n    let estimatedPayout = earning.estimatedPostPayout;\n    if (estimatedPayout > 1e8) estimatedPayout /= TOKEN_DECIMALS;\n    const payout = (estimatedPayout * earning.shares) / earning.totalPostShares;\n    return payout;\n  }\n  if (earning.earned || earning.status === 'paidout') return earning.earned;\n  return 0;\n}\n"],"file":"rewards.js"}