{"version":3,"sources":["../../src/test/mongo.environment.js"],"names":["NodeEnvironment","require","path","fs","mongoTestConfigPath","join","__dirname","MongoEnvironment","constructor","config","setup","mongoTestConfig","JSON","parse","readFileSync","global","MONGO_URI","mongoUri","teardown","runScript","script","module","exports"],"mappings":";;;;;;AAAA,IAAMA,eAAe,GAAGC,OAAO,CAAC,uBAAD,CAA/B;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,IAAME,EAAE,GAAGF,OAAO,CAAC,IAAD,CAAlB;;AAEA,IAAMG,mBAAmB,GAAGF,IAAI,CAACG,IAAL,CAAUC,SAAV,EAAqB,wBAArB,CAA5B;;AAEA,MAAMC,gBAAN,SAA+BP,eAA/B,CAA+C;AAC7C;AACAQ,EAAAA,WAAW,CAACC,MAAD,EAAS;AAClB,UAAMA,MAAN;AACD;;AAEKC,EAAAA,KAAN,GAAc;AAAA;AAAA;;AAAA;AACZ,UAAMC,eAAe,GAAGC,IAAI,CAACC,KAAL,CAAWV,EAAE,CAACW,YAAH,CAAgBV,mBAAhB,EAAqC,OAArC,CAAX,CAAxB;AACA,MAAA,KAAI,CAACW,MAAL,CAAYC,SAAZ,GAAwBL,eAAe,CAACM,QAAxC;AACA,YAAM,iCAAN;AAHY;AAIb;;AAEKC,EAAAA,QAAN,GAAiB;AAAA;AAAA;;AAAA;AACf,YAAM,qCAAN;AADe;AAEhB;;AAEDC,EAAAA,SAAS,CAACC,MAAD,EAAS;AAChB,WAAO,MAAMD,SAAN,CAAgBC,MAAhB,CAAP;AACD;;AAlB4C;;AAqB/CC,MAAM,CAACC,OAAP,GAAiBf,gBAAjB","sourcesContent":["const NodeEnvironment = require('jest-environment-node');\nconst path = require('path');\nconst fs = require('fs');\n\nconst mongoTestConfigPath = path.join(__dirname, './mongoTestConfig.json');\n\nclass MongoEnvironment extends NodeEnvironment {\n  // eslint-disable-next-line\n  constructor(config) {\n    super(config);\n  }\n\n  async setup() {\n    const mongoTestConfig = JSON.parse(fs.readFileSync(mongoTestConfigPath, 'utf-8'));\n    this.global.MONGO_URI = mongoTestConfig.mongoUri;\n    await super.setup();\n  }\n\n  async teardown() {\n    await super.teardown();\n  }\n\n  runScript(script) {\n    return super.runScript(script);\n  }\n}\n\nmodule.exports = MongoEnvironment;\n"],"file":"mongo.environment.js"}