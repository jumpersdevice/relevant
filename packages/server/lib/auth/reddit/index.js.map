{"version":3,"sources":["../../../src/auth/reddit/index.js"],"names":["express","require","passport","auth","config","router","Router","get","currentUser","req","res","next","invitecode","query","authenticate","callbackURL","reddit","duration","state","redirect","failureRedirect","session","scope","setTokenCookieDesktop","module","exports"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAME,IAAI,GAAGF,OAAO,mBAApB;;AACA,MAAMG,MAAM,GAAGH,OAAO,uBAAtB;;AAEA,MAAMI,MAAM,GAAGL,OAAO,CAACM,MAAR,EAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,GAAX,EAAgBJ,IAAI,CAACK,WAAL,EAAhB,EAAoC,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACtDF,EAAAA,GAAG,CAACG,UAAJ,GAAiBH,GAAG,CAACI,KAAJ,CAAUD,UAA3B;AACAV,EAAAA,QAAQ,CAACY,YAAT,CAAsB,QAAtB,EAAgC;AAC9BC,IAAAA,WAAW,EAAEX,MAAM,CAACY,MAAP,CAAcD,WADG;AAE9BE,IAAAA,QAAQ,EAAE,WAFoB;AAG9BC,IAAAA,KAAK,EAAE,eAAeT,GAAG,CAACI,KAAJ,CAAUM,QAAzB,GAAoC,cAApC,GAAqDV,GAAG,CAACI,KAAJ,CAAUD,UAHxC;AAI9BQ,IAAAA,eAAe,EAAE,aAJa;AAK9BC,IAAAA,OAAO,EAAE,KALqB;AAM9BC,IAAAA,KAAK,EAAE;AANuB,GAAhC,EAOGb,GAPH,EAOQC,GAPR,EAOaC,IAPb;AAQD,CAVD;AAYAN,MAAM,CAACE,GAAP,CACE,WADF,EAEEJ,IAAI,CAACK,WAAL,EAFF,EAGEN,QAAQ,CAACY,YAAT,CAAsB,QAAtB,EAAgC;AAC9BM,EAAAA,eAAe,EAAE,aADa;AAE9BC,EAAAA,OAAO,EAAE;AAFqB,CAAhC,CAHF,EAOElB,IAAI,CAACoB,qBAPP;AAUAC,MAAM,CAACC,OAAP,GAAiBpB,MAAjB","sourcesContent":["const express = require('express');\nconst passport = require('passport');\nconst auth = require('../auth.service');\nconst config = require('../../config/config');\n\nconst router = express.Router();\n\nrouter.get('/', auth.currentUser(), (req, res, next) => {\n  req.invitecode = req.query.invitecode;\n  passport.authenticate('reddit', {\n    callbackURL: config.reddit.callbackURL,\n    duration: 'permanent',\n    state: '?redirect=' + req.query.redirect + '&invitecode=' + req.query.invitecode,\n    failureRedirect: '/user/login',\n    session: false,\n    scope: 'identity'\n  })(req, res, next);\n});\n\nrouter.get(\n  '/callback',\n  auth.currentUser(),\n  passport.authenticate('reddit', {\n    failureRedirect: '/user/login',\n    session: false\n  }),\n  auth.setTokenCookieDesktop\n);\n\nmodule.exports = router;\n"],"file":"index.js"}