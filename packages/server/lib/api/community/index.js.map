{"version":3,"sources":["../../../src/api/community/index.js"],"names":["express","require","controller","auth","asyncMiddleware","router","Router","get","blocked","members","memberSearch","isAuthenticated","membership","currentUser","index","findOne","communityMember","checkAuthRoute","post","create","put","update","join","leave","delete","remove","module","exports"],"mappings":";;AAAA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,UAAU,GAAGD,OAAO,0BAA1B;;AACA,MAAME,IAAI,GAAGF,OAAO,2BAApB;;AACA,MAAM;AAAEG,EAAAA;AAAF,IAAsBH,OAAO,2BAAnC;;AAEA,MAAMI,MAAM,GAAGL,OAAO,CAACM,MAAR,EAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,gBAAX,EAA6BJ,IAAI,CAACK,OAAL,EAA7B,EAA6CN,UAAU,CAACO,OAAxD,E,CACA;;AACAJ,MAAM,CAACE,GAAP,CAAW,uBAAX,EAAoCJ,IAAI,CAACK,OAAL,EAApC,EAAoDN,UAAU,CAACQ,YAA/D;AACAL,MAAM,CAACE,GAAP,CAAW,mBAAX,EAAgCJ,IAAI,CAACQ,eAAL,EAAhC,EAAwDT,UAAU,CAACU,UAAnE;AACAP,MAAM,CAACE,GAAP,CAAW,GAAX,EAAgBJ,IAAI,CAACU,WAAL,EAAhB,EAAoCT,eAAe,CAACF,UAAU,CAACY,KAAZ,CAAnD;AACAT,MAAM,CAACE,GAAP,CAAW,QAAX,EAAqBJ,IAAI,CAACQ,eAAL,EAArB,EAA6CT,UAAU,CAACa,OAAxD;AACAV,MAAM,CAACE,GAAP,CACE,kBADF,EAEEJ,IAAI,CAACQ,eAAL,EAFF,EAGER,IAAI,CAACa,eAAL,EAHF,EAIEC,yBAJF;AAOAZ,MAAM,CAACa,IAAP,CAAY,GAAZ,EAAiBf,IAAI,CAACQ,eAAL,EAAjB,EAAyCT,UAAU,CAACiB,MAApD;AAEAd,MAAM,CAACe,GAAP,CACE,QADF,EAEEjB,IAAI,CAACQ,eAAL,EAFF,EAGER,IAAI,CAACa,eAAL,CAAqB,YAArB,CAHF,EAIEd,UAAU,CAACmB,MAJb;AAMAhB,MAAM,CAACe,GAAP,CAAW,aAAX,EAA0BjB,IAAI,CAACQ,eAAL,EAA1B,EAAkDT,UAAU,CAACoB,IAA7D;AACAjB,MAAM,CAACe,GAAP,CAAW,cAAX,EAA2BjB,IAAI,CAACQ,eAAL,EAA3B,EAAmDT,UAAU,CAACqB,KAA9D;AAEAlB,MAAM,CAACmB,MAAP,CAAc,MAAd,EAAsBrB,IAAI,CAACQ,eAAL,EAAtB,EAA8CT,UAAU,CAACuB,MAAzD;AAEAC,MAAM,CAACC,OAAP,GAAiBtB,MAAjB","sourcesContent":["import { checkAuthRoute } from './community.auth';\n\nconst express = require('express');\nconst controller = require('./community.controller');\nconst auth = require('../../auth/auth.service');\nconst { asyncMiddleware } = require('../../utils/middlewares');\n\nconst router = express.Router();\n\nrouter.get('/:slug/members', auth.blocked(), controller.members);\n// Search by embedded user handle and name\nrouter.get('/:slug/members/search', auth.blocked(), controller.memberSearch);\nrouter.get('/membership/:user', auth.isAuthenticated(), controller.membership);\nrouter.get('/', auth.currentUser(), asyncMiddleware(controller.index));\nrouter.get('/:slug', auth.isAuthenticated(), controller.findOne);\nrouter.get(\n  '/:slug/checkAuth',\n  auth.isAuthenticated(),\n  auth.communityMember(),\n  checkAuthRoute\n);\n\nrouter.post('/', auth.isAuthenticated(), controller.create);\n\nrouter.put(\n  '/:slug',\n  auth.isAuthenticated(),\n  auth.communityMember('superAdmin'),\n  controller.update\n);\nrouter.put('/:slug/join', auth.isAuthenticated(), controller.join);\nrouter.put('/:slug/leave', auth.isAuthenticated(), controller.leave);\n\nrouter.delete('/:id', auth.isAuthenticated(), controller.remove);\n\nmodule.exports = router;\n"],"file":"index.js"}