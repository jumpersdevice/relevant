{"version":3,"sources":["../../../src/api/subscription/subscription.controller.js"],"names":["exports","index","req","res","next","subscriptions","user","_id","Subscription","find","follower","amount","$ne","err","status","json","search","query","then","catch"],"mappings":";;;;;;AAAA;;AAEAA,OAAO,CAACC,KAAR;AAAA,6CAAgB,WAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,EAA0B;AACxC,QAAIC,aAAJ;;AACA,QAAI;AACF,UAAMC,IAAI,GAAGJ,GAAG,CAACI,IAAJ,CAASC,GAAtB;AACAF,MAAAA,aAAa,SAASG,sBAAaC,IAAb,CAAkB;AAAEC,QAAAA,QAAQ,EAAEJ,IAAZ;AAAkBK,QAAAA,MAAM,EAAE;AAAEC,UAAAA,GAAG,EAAE;AAAP;AAA1B,OAAlB,CAAtB;AACD,KAHD,CAGE,OAAOC,GAAP,EAAY;AACZT,MAAAA,IAAI,CAACS,GAAD,CAAJ;AACD;;AACD,WAAOV,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBV,aAArB,CAAP;AACD,GATD;;AAAA;AAAA;AAAA;AAAA;;AAWAL,OAAO,CAACgB,MAAR,GAAiB,CAACd,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACnC,MAAM;AAAEa,IAAAA;AAAF,MAAYf,GAAlB;;AACAM,wBAAaC,IAAb,CAAkBQ,KAAlB,EACGC,IADH,CACQb,aAAa,IAAI;AACrBF,IAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBV,aAArB;AACD,GAHH,EAIGc,KAJH,CAISf,IAJT;AAKD,CAPD","sourcesContent":["import Subscription from './subscription.model';\n\nexports.index = async (req, res, next) => {\n  let subscriptions;\n  try {\n    const user = req.user._id;\n    subscriptions = await Subscription.find({ follower: user, amount: { $ne: 0 } });\n  } catch (err) {\n    next(err);\n  }\n  return res.status(200).json(subscriptions);\n};\n\nexports.search = (req, res, next) => {\n  const { query } = req;\n  Subscription.find(query)\n    .then(subscriptions => {\n      res.status(200).json(subscriptions);\n    })\n    .catch(next);\n};\n"],"file":"subscription.controller.js"}